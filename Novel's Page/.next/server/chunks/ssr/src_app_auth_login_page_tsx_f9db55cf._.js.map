{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/matei/NovelPedia/App/frontend/src/app/auth/login/page.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { LuMail, LuLock, LuEye, LuEyeOff } from 'react-icons/lu';\nimport { FcGoogle } from 'react-icons/fc';\nimport { DiApple } from 'react-icons/di';\nimport { FaXTwitter } from 'react-icons/fa6';\nimport { FaFacebook } from 'react-icons/fa';\nimport Link from 'next/link';\n\n\nexport default function LoginPage() {\n  const [form, setForm] = useState({\n    identifier: '',\n    password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [showAllSocial, setShowAllSocial] = useState(false);\n\n  const router = useRouter();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  function isLoggedIn() {\n    const token = typeof window !== \"undefined\" ? localStorage.getItem('token') : null;\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return payload.exp * 1000 > Date.now();\n    } catch {\n      return false;\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!form.identifier.trim() || !form.password.trim()) {\n      alert('Please enter both username/email and password.');\n      return;\n    }\n    setLoading(true);\n    try {\n      const response = await fetch('http://127.0.0.1:8000/api/accounts/login/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          identifier: form.identifier.trim(),\n          password: form.password,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (!response.ok) {\n        // Show all error messages from backend\n        let errorMsg = '';\n        if (typeof data === 'object' && data !== null) {\n          errorMsg = Object.entries(data)\n            .map(([k, v]) => `${k}: ${Array.isArray(v) ? v.join(', ') : v}`)\n            .join('\\n');\n        } else {\n          errorMsg = data?.detail || 'Unknown error';\n        }\n        alert('Login failed: ' + errorMsg);\n        setLoading(false);\n        return;\n      }\n\n      if (data.access) {\n        localStorage.setItem('token', data.access);\n      }\n\n      alert('Login successful!');\n      router.push('/');\n\n    } catch (err: any) {\n      alert('Network error: ' + (err?.message || err));\n    }\n    setLoading(false);\n  };\n\n  const socialButtons = [\n    {\n      key: 'google',\n      icon: <FcGoogle className=\"text-lg\" />,\n      text: 'Continue with Google',\n    },\n    {\n      key: 'apple',\n      icon: <DiApple className=\"text-lg\" />,\n      text: 'Continue with Apple',\n    },\n    {\n      key: 'twitter',\n      icon: <FaXTwitter className=\"text-lg\" />,\n      text: 'Continue with X',\n    },\n    {\n      key: 'facebook',\n      icon: <FaFacebook className=\"text-lg\" />,\n      text: 'Continue with Facebook',\n    },\n  ];\n\n  const visibleSocialButtons = showAllSocial\n    ? socialButtons\n    : socialButtons.slice(0, 2);\n\n  return (\n    <div className=\"min-h-screen flex flex-col py-10 items-center justify-center bg-gradient-to-br from-[#2d004d] via-[#4b166c] to-[#6d28d9]\">\n      {/* Logo */}\n      <div className=\"flex flex-col items-center mb-8\">\n        <div className=\"bg-[#a259ec] p-3 rounded-full mb-2\">\n          <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"4\" fill=\"#fff\" />\n            <path\n              d=\"M8 8h8v2H8V8zm0 4h8v2H8v-2zm0 4h5v2H8v-2z\"\n              fill=\"#a259ec\"\n            />\n          </svg>\n        </div>\n        <h1 className=\"text-2xl font-bold text-white\">NovelPedia</h1>\n        <p className=\"text-sm text-violet-200 mt-1\">\n          Welcome back! Log in to continue your reading journey\n        </p>\n      </div>\n      <div className=\"w-[90vw] max-w-md bg-[#231942]/80 rounded-2xl shadow-xl px-8 py-10 flex flex-col items-center\">\n        <form className=\"w-full space-y-5\" onSubmit={handleSubmit}>\n          {/* Identifier */}\n          <div>\n            <label className=\"block text-violet-200 text-xs md:text-sm mb-1\">\n              Username or Email\n            </label>\n            <div className=\"relative\">\n              <LuMail className=\"absolute left-3 top-1/2 -translate-y-1/2 text-violet-400\" />\n              <input\n                type=\"text\"\n                name=\"identifier\"\n                value={form.identifier}\n                onChange={handleChange}\n                placeholder=\"Enter your username or email\"\n                className=\"w-full pl-10 pr-3 py-1 md:py-2 bg-[#313052] text-white rounded-lg border border-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-400\"\n                required\n              />\n            </div>\n          </div>\n          {/* Password */}\n          <div>\n            <label className=\"block text-violet-200 text-xs md:text-sm mb-1\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <LuLock className=\"absolute left-3 top-1/2 -translate-y-1/2 text-violet-400\" />\n              <input\n                type={showPassword ? 'text' : 'password'}\n                name=\"password\"\n                value={form.password}\n                onChange={handleChange}\n                placeholder=\"Enter your password\"\n                className=\"w-full pl-10 pr-10 py-1 md:py-2 bg-[#313052] text-white rounded-lg border border-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-400\"\n                required\n              />\n              <button\n                type=\"button\"\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-violet-400\"\n                tabIndex={-1}\n                onClick={() => setShowPassword((s) => !s)}\n              >\n                {showPassword ? <LuEyeOff /> : <LuEye />}\n              </button>\n            </div>\n          </div>\n          {/* Forgot password */}\n          <div className=\"flex justify-end\">\n          <Link href=\"/auth/forgotPassword\" className=\"text-violet-300 text-xs hover:underline\">\n    Forgot password?\n  </Link>\n          </div>\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-2 rounded-lg bg-gradient-to-r from-fuchsia-700 to-pink-500 text-white font-semibold flex items-center justify-center gap-2 hover:from-fuchsia-700 hover:to-pink-600 transition\"\n          >\n            {loading ? 'Logging in...' : 'Log In'}\n            <svg\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth={2}\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M5 12h14m-7-7l7 7-7 7\"\n              />\n            </svg>\n          </button>\n        </form>\n        {/* Divider */}\n        <div className=\"flex items-center w-full my-6\">\n          <div className=\"flex-1 h-px bg-violet-700\" />\n          <span className=\"mx-3 text-violet-300 text-sm\">OR LOG IN WITH</span>\n          <div className=\"flex-1 h-px bg-violet-700\" />\n        </div>\n        {/* Social Buttons */}\n        <div\n          className=\"w-full flex flex-col gap-3 overflow-hidden transition-all duration-300 ease-in-out\"\n          style={{\n            maxHeight: showAllSocial ? 400 : 110,\n            opacity: showAllSocial ? 1 : 0.95,\n          }}\n        >\n          {visibleSocialButtons.map((btn) => (\n            <button\n              key={btn.key}\n              className=\"w-full flex items-center justify-center gap-3 py-2 rounded-lg bg-white/10 border border-violet-700 text-white font-medium hover:bg-white/20 transition\"\n            >\n              {btn.icon}\n              {btn.text}\n            </button>\n          ))}\n        </div>\n        {/* Show more / Show less */}\n        <button\n          className=\"mt-4 text-violet-300 text-sm hover:underline cursor-pointer\"\n          onClick={() => setShowAllSocial((s) => !s)}\n          type=\"button\"\n        >\n          {showAllSocial ? 'Show less' : 'Show more'}\n        </button>\n        {/* Don't have an account */}\n        <div className=\"mt-6 text-violet-300 text-sm text-center\">\n          Don&apos;t have an account?\n          <Link href=\"/auth/signup\" className=\"text-white underline hover:text-violet-200\">\n            Sign up here\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}