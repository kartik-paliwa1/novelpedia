{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"index.js.map","sources":["file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/dist/index.js","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/global.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/env.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/fastdiff.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/diff.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/difftochanges.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/areconnectedthroughproperties.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/spy.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/eventinfo.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/uid.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/priorities.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/inserttopriorityarray.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/ckeditorerror.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/version.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/emittermixin.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/observablemixin.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/elementreplacer.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/abortabledebounce.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/count.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/comparearrays.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/isiterable.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/createelement.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/config.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/isnode.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/iswindow.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/emittermixin.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/findclosestscrollableancestor.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getancestors.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getdatafromelement.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getborderwidths.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getrangefrommouseevent.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getcommonancestor.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getpositionedancestor.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/istext.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/isrange.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/rect.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/resizeobserver.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/setdatainelement.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/tounit.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/indexof.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/insertat.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/iscomment.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/isvalidattributename.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/isvisible.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/position.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/remove.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/getvisualviewportoffset.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/dom/scroll.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/keyboard.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/language.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/toarray.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/translation-service.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/locale.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/collection.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/first.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/nth.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/focustracker.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/keystrokehandler.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/objecttomap.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/tomap.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/mapsequal.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/wait.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/retry.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/splicearray.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/delay.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/parsebase64encodedobject.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/crc32.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/collectstylesheets.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/formathtml.ts","file:///home/matei/NovelPedia/App/frontend/node_modules/%40ckeditor/ckeditor5-utils/src/unicode.ts"],"sourcesContent":["import { isObject as isObject$1, isString, isPlainObject, cloneDeepWith, isElement as isElement$1, isFunction, merge } from 'es-toolkit/compat';\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/global\n */ // This interface exists to make our API pages more readable.\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and `document`.\n */ /**\n * A helper (module) giving an access to the global DOM objects such as `window` and\n * `document`. Accessing these objects using this helper allows easy and bulletproof\n * testing, i.e. stubbing native properties:\n *\n * ```ts\n * import { global } from 'ckeditor5/utils';\n *\n * // This stub will work for any code using global module.\n * testUtils.sinon.stub( global, 'window', {\n * \tinnerWidth: 10000\n * } );\n *\n * console.log( global.window.innerWidth );\n * ```\n */ let globalVar; // named globalVar instead of global: https://github.com/ckeditor/ckeditor5/issues/12971\n// In some environments window and document API might not be available.\ntry {\n    globalVar = {\n        window,\n        document\n    };\n} catch  {\n    // It's not possible to mock a window object to simulate lack of a window object without writing extremely convoluted code.\n    /* istanbul ignore next -- @preserve */ // Let's cast it to not change module's API.\n    // We only handle this so loading editor in environments without window and document doesn't fail.\n    // For better DX we shouldn't introduce mixed types and require developers to check the type manually.\n    // This module should not be used on purpose in any environment outside browser.\n    globalVar = {\n        window: {},\n        document: {}\n    };\n}\n\n/**\n * Safely returns `userAgent` from browser's navigator API in a lower case.\n * If navigator API is not available it will return an empty string.\n *\n * @internal\n */ function getUserAgent() {\n    // In some environments navigator API might not be available.\n    try {\n        return navigator.userAgent.toLowerCase();\n    } catch  {\n        return '';\n    }\n}\nconst userAgent = /* #__PURE__ */ getUserAgent();\n/**\n * A namespace containing environment and browser information.\n */ const env = {\n    isMac: /* #__PURE__ */ isMac(userAgent),\n    isWindows: /* #__PURE__ */ isWindows(userAgent),\n    isGecko: /* #__PURE__ */ isGecko(userAgent),\n    isSafari: /* #__PURE__ */ isSafari(userAgent),\n    isiOS: /* #__PURE__ */ isiOS(userAgent),\n    isAndroid: /* #__PURE__ */ isAndroid(userAgent),\n    isBlink: /* #__PURE__ */ isBlink(userAgent),\n    get isMediaForcedColors () {\n        return isMediaForcedColors();\n    },\n    get isMotionReduced () {\n        return isMotionReduced();\n    },\n    features: {\n        isRegExpUnicodePropertySupported: /* #__PURE__ */ isRegExpUnicodePropertySupported()\n    }\n};\n/**\n * Checks if User Agent represented by the string is running on Macintosh.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running on Macintosh or not.\n */ function isMac(userAgent) {\n    return userAgent.indexOf('macintosh') > -1;\n}\n/**\n * Checks if User Agent represented by the string is running on Windows.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running on Windows or not.\n */ function isWindows(userAgent) {\n    return userAgent.indexOf('windows') > -1;\n}\n/**\n * Checks if User Agent represented by the string is Firefox (Gecko).\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Firefox or not.\n */ function isGecko(userAgent) {\n    return !!userAgent.match(/gecko\\/\\d+/);\n}\n/**\n * Checks if User Agent represented by the string is Safari.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Safari or not.\n */ function isSafari(userAgent) {\n    return userAgent.indexOf(' applewebkit/') > -1 && userAgent.indexOf('chrome') === -1;\n}\n/**\n * Checks if User Agent represented by the string is running in iOS.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running in iOS or not.\n */ function isiOS(userAgent) {\n    // \"Request mobile site\" || \"Request desktop site\".\n    return !!userAgent.match(/iphone|ipad/i) || isMac(userAgent) && navigator.maxTouchPoints > 0;\n}\n/**\n * Checks if User Agent represented by the string is Android mobile device.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Safari or not.\n */ function isAndroid(userAgent) {\n    return userAgent.indexOf('android') > -1;\n}\n/**\n * Checks if User Agent represented by the string is Blink engine.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Blink engine or not.\n */ function isBlink(userAgent) {\n    // The Edge browser before switching to the Blink engine used to report itself as Chrome (and \"Edge/\")\n    // but after switching to the Blink it replaced \"Edge/\" with \"Edg/\".\n    return userAgent.indexOf('chrome/') > -1 && userAgent.indexOf('edge/') < 0;\n}\n/**\n * Checks if the current environment supports ES2018 Unicode properties like `\\p{P}` or `\\p{L}`.\n * More information about unicode properties might be found\n * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n *\n * @internal\n */ function isRegExpUnicodePropertySupported() {\n    let isSupported = false;\n    // Feature detection for Unicode properties. Added in ES2018. Currently Firefox does not support it.\n    // See https://github.com/ckeditor/ckeditor5-mention/issues/44#issuecomment-487002174.\n    try {\n        // Usage of regular expression literal cause error during build (ckeditor/ckeditor5-dev#534).\n        isSupported = 'ć'.search(new RegExp('[\\\\p{L}]', 'u')) === 0;\n    } catch  {\n    // Firefox throws a SyntaxError when the group is unsupported.\n    }\n    return isSupported;\n}\n/**\n * Checks if the user agent has enabled a forced colors mode (e.g. Windows High Contrast mode).\n *\n * Returns `false` in environments where `window` global object is not available.\n *\n * @internal\n */ function isMediaForcedColors() {\n    return globalVar.window.matchMedia ? globalVar.window.matchMedia('(forced-colors: active)').matches : false;\n}\n/**\n * Checks if the user enabled \"prefers reduced motion\" setting in browser.\n *\n * Returns `false` in environments where `window` global object is not available.\n *\n * @internal\n */ function isMotionReduced() {\n    return globalVar.window.matchMedia ? globalVar.window.matchMedia('(prefers-reduced-motion)').matches : false;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/fastdiff\n */ /**\n * Finds positions of the first and last change in the given string/array and generates a set of changes:\n *\n * ```ts\n * fastDiff( '12a', '12xyza' );\n * // [ { index: 2, type: 'insert', values: [ 'x', 'y', 'z' ] } ]\n *\n * fastDiff( '12a', '12aa' );\n * // [ { index: 3, type: 'insert', values: [ 'a' ] } ]\n *\n * fastDiff( '12xyza', '12a' );\n * // [ { index: 2, type: 'delete', howMany: 3 } ]\n *\n * fastDiff( [ '1', '2', 'a', 'a' ], [ '1', '2', 'a' ] );\n * // [ { index: 3, type: 'delete', howMany: 1 } ]\n *\n * fastDiff( [ '1', '2', 'a', 'b', 'c', '3' ], [ '2', 'a', 'b' ] );\n * // [ { index: 0, type: 'insert', values: [ '2', 'a', 'b' ] }, { index: 3, type: 'delete', howMany: 6 } ]\n * ```\n *\n * Passed arrays can contain any type of data, however to compare them correctly custom comparator function\n * should be passed as a third parameter:\n *\n * ```ts\n * fastDiff( [ { value: 1 }, { value: 2 } ], [ { value: 1 }, { value: 3 } ], ( a, b ) => {\n * \treturn a.value === b.value;\n * } );\n * // [ { index: 1, type: 'insert', values: [ { value: 3 } ] }, { index: 2, type: 'delete', howMany: 1 } ]\n * ```\n *\n * The resulted set of changes can be applied to the input in order to transform it into the output, for example:\n *\n * ```ts\n * let input = '12abc3';\n * const output = '2ab';\n * const changes = fastDiff( input, output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput = input.substring( 0, change.index ) + change.values.join( '' ) + input.substring( change.index );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput = input.substring( 0, change.index ) + input.substring( change.index + change.howMany );\n * \t}\n * } );\n *\n * // input equals output now\n * ```\n *\n * or in case of arrays:\n *\n * ```ts\n * let input = [ '1', '2', 'a', 'b', 'c', '3' ];\n * const output = [ '2', 'a', 'b' ];\n * const changes = fastDiff( input, output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput = input.slice( 0, change.index ).concat( change.values, input.slice( change.index ) );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput = input.slice( 0, change.index ).concat( input.slice( change.index + change.howMany ) );\n * \t}\n * } );\n *\n * // input equals output now\n * ```\n *\n * By passing `true` as the fourth parameter (`atomicChanges`) the output of this function will become compatible with\n * the {@link module:utils/diff~diff `diff()`} function:\n *\n * ```ts\n * fastDiff( '12a', '12xyza', undefined, true );\n * // [ 'equal', 'equal', 'insert', 'insert', 'insert', 'equal' ]\n * ```\n *\n * The default output format of this function is compatible with the output format of\n * {@link module:utils/difftochanges~diffToChanges `diffToChanges()`}. The `diffToChanges()` input format is, in turn,\n * compatible with the output of {@link module:utils/diff~diff `diff()`}:\n *\n * ```ts\n * const a = '1234';\n * const b = '12xyz34';\n *\n * // Both calls will return the same results (grouped changes format).\n * fastDiff( a, b );\n * diffToChanges( diff( a, b ) );\n *\n * // Again, both calls will return the same results (atomic changes format).\n * fastDiff( a, b, undefined, true );\n * diff( a, b );\n * ```\n *\n * @typeParam T The type of array elements.\n * @typeParam AtomicChanges The type of `atomicChanges` parameter (selects the result type).\n * @param a Input array or string.\n * @param b Input array or string.\n * @param cmp Optional function used to compare array values, by default `===` (strict equal operator) is used.\n * @param atomicChanges Whether an array of `inset|delete|equal` operations should\n * be returned instead of changes set. This makes this function compatible with {@link module:utils/diff~diff `diff()`}.\n * Defaults to `false`.\n * @returns Array of changes. The elements are either {@link module:utils/diff~DiffResult} or {@link module:utils/difftochanges~Change},\n * depending on `atomicChanges` parameter.\n */ function fastDiff(a, b, cmp, atomicChanges) {\n    // Set the comparator function.\n    cmp = cmp || function(a, b) {\n        return a === b;\n    };\n    // Convert the string (or any array-like object - eg. NodeList) to an array by using the slice() method because,\n    // unlike Array.from(), it returns array of UTF-16 code units instead of the code points of a string.\n    // One code point might be a surrogate pair of two code units. All text offsets are expected to be in code units.\n    // See ckeditor/ckeditor5#3147.\n    //\n    // We need to make sure here that fastDiff() works identical to diff().\n    const arrayA = Array.isArray(a) ? a : Array.prototype.slice.call(a);\n    const arrayB = Array.isArray(b) ? b : Array.prototype.slice.call(b);\n    // Find first and last change.\n    const changeIndexes = findChangeBoundaryIndexes(arrayA, arrayB, cmp);\n    // Transform into changes array.\n    const result = atomicChanges ? changeIndexesToAtomicChanges(changeIndexes, arrayB.length) : changeIndexesToChanges(arrayB, changeIndexes);\n    return result;\n}\n/**\n * Finds position of the first and last change in the given arrays. For example:\n *\n * ```ts\n * const indexes = findChangeBoundaryIndexes( [ '1', '2', '3', '4' ], [ '1', '3', '4', '2', '4' ] );\n * console.log( indexes ); // { firstIndex: 1, lastIndexOld: 3, lastIndexNew: 4 }\n * ```\n *\n * The above indexes means that in the first array the modified part is `1[23]4` and in the second array it is `1[342]4`.\n * Based on such indexes, array with `insert`/`delete` operations which allows transforming first value into the second one\n * can be generated.\n */ function findChangeBoundaryIndexes(arr1, arr2, cmp) {\n    // Find the first difference between passed values.\n    const firstIndex = findFirstDifferenceIndex(arr1, arr2, cmp);\n    // If arrays are equal return -1 indexes object.\n    if (firstIndex === -1) {\n        return {\n            firstIndex: -1,\n            lastIndexOld: -1,\n            lastIndexNew: -1\n        };\n    }\n    // Remove the common part of each value and reverse them to make it simpler to find the last difference between them.\n    const oldArrayReversed = cutAndReverse(arr1, firstIndex);\n    const newArrayReversed = cutAndReverse(arr2, firstIndex);\n    // Find the first difference between reversed values.\n    // It should be treated as \"how many elements from the end the last difference occurred\".\n    //\n    // For example:\n    //\n    // \t\t\t\tinitial\t->\tafter cut\t-> reversed:\n    // oldValue:\t'321ba'\t->\t'21ba'\t\t-> 'ab12'\n    // newValue:\t'31xba'\t->\t'1xba'\t\t-> 'abx1'\n    // lastIndex:\t\t\t\t\t\t\t-> 2\n    //\n    // So the last change occurred two characters from the end of the arrays.\n    const lastIndex = findFirstDifferenceIndex(oldArrayReversed, newArrayReversed, cmp);\n    // Use `lastIndex` to calculate proper offset, starting from the beginning (`lastIndex` kind of starts from the end).\n    const lastIndexOld = arr1.length - lastIndex;\n    const lastIndexNew = arr2.length - lastIndex;\n    return {\n        firstIndex,\n        lastIndexOld,\n        lastIndexNew\n    };\n}\n/**\n * Returns a first index on which given arrays differ. If both arrays are the same, -1 is returned.\n */ function findFirstDifferenceIndex(arr1, arr2, cmp) {\n    for(let i = 0; i < Math.max(arr1.length, arr2.length); i++){\n        if (arr1[i] === undefined || arr2[i] === undefined || !cmp(arr1[i], arr2[i])) {\n            return i;\n        }\n    }\n    return -1; // Return -1 if arrays are equal.\n}\n/**\n * Returns a copy of the given array with `howMany` elements removed starting from the beginning and in reversed order.\n *\n * @param arr Array to be processed.\n * @param howMany How many elements from array beginning to remove.\n * @returns Shortened and reversed array.\n */ function cutAndReverse(arr, howMany) {\n    return arr.slice(howMany).reverse();\n}\n/**\n * Generates changes array based on change indexes from `findChangeBoundaryIndexes` function. This function will\n * generate array with 0 (no changes), 1 (deletion or insertion) or 2 records (insertion and deletion).\n *\n * @param newArray New array for which change indexes were calculated.\n * @param changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n * @returns Array of changes compatible with {@link module:utils/difftochanges~diffToChanges} format.\n */ function changeIndexesToChanges(newArray, changeIndexes) {\n    const result = [];\n    const { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n    // Order operations as 'insert', 'delete' array to keep compatibility with {@link module:utils/difftochanges~diffToChanges}\n    // in most cases. However, 'diffToChanges' does not stick to any order so in some cases\n    // (for example replacing '12345' with 'abcd') it will generate 'delete', 'insert' order.\n    if (lastIndexNew - firstIndex > 0) {\n        result.push({\n            index: firstIndex,\n            type: 'insert',\n            values: newArray.slice(firstIndex, lastIndexNew)\n        });\n    }\n    if (lastIndexOld - firstIndex > 0) {\n        result.push({\n            index: firstIndex + (lastIndexNew - firstIndex),\n            type: 'delete',\n            howMany: lastIndexOld - firstIndex\n        });\n    }\n    return result;\n}\n/**\n * Generates array with set `equal|insert|delete` operations based on change indexes from `findChangeBoundaryIndexes` function.\n *\n * @param changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n * @param newLength Length of the new array on which `findChangeBoundaryIndexes` calculated change indexes.\n * @returns Array of changes compatible with {@link module:utils/diff~diff} format.\n */ function changeIndexesToAtomicChanges(changeIndexes, newLength) {\n    const { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n    // No changes.\n    if (firstIndex === -1) {\n        return Array(newLength).fill('equal');\n    }\n    let result = [];\n    if (firstIndex > 0) {\n        result = result.concat(Array(firstIndex).fill('equal'));\n    }\n    if (lastIndexNew - firstIndex > 0) {\n        result = result.concat(Array(lastIndexNew - firstIndex).fill('insert'));\n    }\n    if (lastIndexOld - firstIndex > 0) {\n        result = result.concat(Array(lastIndexOld - firstIndex).fill('delete'));\n    }\n    if (lastIndexNew < newLength) {\n        result = result.concat(Array(newLength - lastIndexNew).fill('equal'));\n    }\n    return result;\n}\n\n// The following code is based on the \"O(NP) Sequence Comparison Algorithm\"\n// by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n/**\n * Calculates the difference between two arrays or strings producing an array containing a list of changes\n * necessary to transform input into output.\n *\n * ```ts\n * diff( 'aba', 'acca' ); // [ 'equal', 'insert', 'insert', 'delete', 'equal' ]\n * ```\n *\n * This function is based on the \"O(NP) Sequence Comparison Algorithm\" by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n * Unfortunately, while it gives the most precise results, its to complex for longer strings/arrow (above 200 items).\n * Therefore, `diff()` automatically switches to {@link module:utils/fastdiff~fastDiff `fastDiff()`} when detecting\n * such a scenario. The return formats of both functions are identical.\n *\n * @param a Input array or string.\n * @param b Output array or string.\n * @param cmp Optional function used to compare array values, by default === is used.\n * @returns Array of changes.\n */ function diff(a, b, cmp) {\n    // Set the comparator function.\n    cmp = cmp || function(a, b) {\n        return a === b;\n    };\n    const aLength = a.length;\n    const bLength = b.length;\n    // Perform `fastDiff` for longer strings/arrays (see #269).\n    if (aLength > 200 || bLength > 200 || aLength + bLength > 300) {\n        return diff.fastDiff(a, b, cmp, true);\n    }\n    // Temporary action type statics.\n    let _insert, _delete;\n    // Swapped the arrays to use the shorter one as the first one.\n    if (bLength < aLength) {\n        const tmp = a;\n        a = b;\n        b = tmp;\n        // We swap the action types as well.\n        _insert = 'delete';\n        _delete = 'insert';\n    } else {\n        _insert = 'insert';\n        _delete = 'delete';\n    }\n    const m = a.length;\n    const n = b.length;\n    const delta = n - m;\n    // Edit scripts, for each diagonal.\n    const es = {};\n    // Furthest points, the furthest y we can get on each diagonal.\n    const fp = {};\n    function snake(k) {\n        // We use -1 as an alternative below to handle initial values ( instead of filling the fp with -1 first ).\n        // Furthest points (y) on the diagonal below k.\n        const y1 = (fp[k - 1] !== undefined ? fp[k - 1] : -1) + 1;\n        // Furthest points (y) on the diagonal above k.\n        const y2 = fp[k + 1] !== undefined ? fp[k + 1] : -1;\n        // The way we should go to get further.\n        const dir = y1 > y2 ? -1 : 1;\n        // Clone previous changes array (if any).\n        if (es[k + dir]) {\n            es[k] = es[k + dir].slice(0);\n        }\n        // Create changes array.\n        if (!es[k]) {\n            es[k] = [];\n        }\n        // Push the action.\n        es[k].push(y1 > y2 ? _insert : _delete);\n        // Set the beginning coordinates.\n        let y = Math.max(y1, y2);\n        let x = y - k;\n        // Traverse the diagonal as long as the values match.\n        while(x < m && y < n && cmp(a[x], b[y])){\n            x++;\n            y++;\n            // Push no change action.\n            es[k].push('equal');\n        }\n        return y;\n    }\n    let p = 0;\n    let k;\n    // Traverse the graph until we reach the end of the longer string.\n    do {\n        // Updates furthest points and edit scripts for diagonals below delta.\n        for(k = -p; k < delta; k++){\n            fp[k] = snake(k);\n        }\n        // Updates furthest points and edit scripts for diagonals above delta.\n        for(k = delta + p; k > delta; k--){\n            fp[k] = snake(k);\n        }\n        // Updates furthest point and edit script for the delta diagonal.\n        // note that the delta diagonal is the one which goes through the sink (m, n).\n        fp[delta] = snake(delta);\n        p++;\n    }while (fp[delta] !== n)\n    // Return the final list of edit changes.\n    // We remove the first item that represents the action for the injected nulls.\n    return es[delta].slice(1);\n}\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\ndiff.fastDiff = fastDiff;\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/difftochanges\n */ /**\n * Creates a set of changes which need to be applied to the input in order to transform\n * it into the output. This function can be used with strings or arrays.\n *\n * ```ts\n * const input = Array.from( 'abc' );\n * const output = Array.from( 'xaby' );\n * const changes = diffToChanges( diff( input, output ), output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput.splice( change.index, 0, ...change.values );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput.splice( change.index, change.howMany );\n * \t}\n * } );\n *\n * input.join( '' ) == output.join( '' ); // -> true\n * ```\n *\n * @typeParam T The type of output array element.\n * @param diff Result of {@link module:utils/diff~diff}.\n * @param output The string or array which was passed as diff's output.\n * @returns Set of changes (insert or delete) which need to be applied to the input\n * in order to transform it into the output.\n */ function diffToChanges(diff, output) {\n    const changes = [];\n    let index = 0;\n    let lastOperation = null;\n    diff.forEach((change)=>{\n        if (change == 'equal') {\n            pushLast();\n            index++;\n        } else if (change == 'insert') {\n            if (lastOperation && lastOperation.type == 'insert') {\n                lastOperation.values.push(output[index]);\n            } else {\n                pushLast();\n                lastOperation = {\n                    type: 'insert',\n                    index,\n                    values: [\n                        output[index]\n                    ]\n                };\n            }\n            index++;\n        } else /* if ( change == 'delete' ) */ {\n            if (lastOperation && lastOperation.type == 'delete') {\n                lastOperation.howMany++;\n            } else {\n                pushLast();\n                lastOperation = {\n                    type: 'delete',\n                    index,\n                    howMany: 1\n                };\n            }\n        }\n    });\n    pushLast();\n    return changes;\n    function pushLast() {\n        if (lastOperation) {\n            changes.push(lastOperation);\n            lastOperation = null;\n        }\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/areconnectedthroughproperties\n */ /**\n * Traverses both structures to find out whether there is a reference that is shared between both structures.\n */ function areConnectedThroughProperties(obj1, obj2) {\n    if (obj1 === obj2 && isObject(obj1)) {\n        return true;\n    }\n    const subNodes1 = getSubNodes(obj1);\n    const subNodes2 = getSubNodes(obj2);\n    for (const node of subNodes1){\n        if (subNodes2.has(node)) {\n            return true;\n        }\n    }\n    return false;\n}\n/**\n * Traverses JS structure and stores all sub-nodes, including the head node.\n * It walks into each iterable structures with the `try catch` block to omit errors that might be thrown during\n * tree walking. All primitives, functions and built-ins are skipped.\n */ function getSubNodes(head) {\n    const nodes = [\n        head\n    ];\n    // Nodes are stored to prevent infinite looping.\n    const subNodes = new Set();\n    while(nodes.length > 0){\n        const node = nodes.shift();\n        if (subNodes.has(node) || shouldNodeBeSkipped(node)) {\n            continue;\n        }\n        subNodes.add(node);\n        // Handle arrays, maps, sets, custom collections that implements `[ Symbol.iterator ]()`, etc.\n        if (node[Symbol.iterator]) {\n            // The custom editor iterators might cause some problems if the editor is crashed.\n            try {\n                nodes.push(...node);\n            } // eslint-disable-next-line no-empty\n            catch  {}\n        } else {\n            nodes.push(...Object.values(node));\n        }\n    }\n    return subNodes;\n}\nfunction shouldNodeBeSkipped(node) {\n    const type = Object.prototype.toString.call(node);\n    return type === '[object Number]' || type === '[object Boolean]' || type === '[object String]' || type === '[object Symbol]' || type === '[object Function]' || type === '[object Date]' || type === '[object RegExp]' || node === undefined || node === null || // Skip native DOM objects, e.g. Window, nodes, events, etc.\n    node instanceof EventTarget || node instanceof Event;\n}\nfunction isObject(structure) {\n    return typeof structure === 'object' && structure !== null;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/spy\n */ /**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns The spy function.\n */ function spy() {\n    return function spy() {\n        spy.called = true;\n    };\n}\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */ class EventInfo {\n    /**\n\t * The object that fired the event.\n\t */ source;\n    /**\n\t * The event name.\n\t */ name;\n    /**\n\t * Path this event has followed. See {@link module:utils/emittermixin~Emitter#delegate}.\n\t */ path;\n    /**\n\t * Stops the event emitter to call further callbacks for this event interaction.\n\t */ stop;\n    /**\n\t * Removes the current callback from future interactions of this event.\n\t */ off;\n    /**\n\t * The value which will be returned by {@link module:utils/emittermixin~Emitter#fire}.\n\t *\n\t * It's `undefined` by default and can be changed by an event listener:\n\t *\n\t * ```ts\n\t * dataController.fire( 'getSelectedContent', ( evt ) => {\n\t * \t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t * \t// always return an empty DocumentFragment.\n\t * \tevt.return = new DocumentFragment();\n\t *\n\t * \t// Make sure no other listeners are executed.\n\t * \tevt.stop();\n\t * } );\n\t * ```\n\t */ return;\n    /**\n\t * @param source The emitter.\n\t * @param name The event name.\n\t */ constructor(source, name){\n        this.source = source;\n        this.name = name;\n        this.path = [];\n        // The following methods are defined in the constructor because they must be re-created per instance.\n        this.stop = spy();\n        this.off = spy();\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/uid\n */ /**\n * A hash table of hex numbers to avoid using toString() in uid() which is costly.\n * [ '00', '01', '02', ..., 'fe', 'ff' ]\n */ const HEX_NUMBERS = new Array(256).fill('').map((_, index)=>('0' + index.toString(16)).slice(-2));\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns An unique id string.\n */ function uid() {\n    // Let's create some positive random 32bit integers first.\n    const [r1, r2, r3, r4] = crypto.getRandomValues(new Uint32Array(4));\n    // Make sure that id does not start with number.\n    return 'e' + HEX_NUMBERS[r1 >> 0 & 0xFF] + HEX_NUMBERS[r1 >> 8 & 0xFF] + HEX_NUMBERS[r1 >> 16 & 0xFF] + HEX_NUMBERS[r1 >> 24 & 0xFF] + HEX_NUMBERS[r2 >> 0 & 0xFF] + HEX_NUMBERS[r2 >> 8 & 0xFF] + HEX_NUMBERS[r2 >> 16 & 0xFF] + HEX_NUMBERS[r2 >> 24 & 0xFF] + HEX_NUMBERS[r3 >> 0 & 0xFF] + HEX_NUMBERS[r3 >> 8 & 0xFF] + HEX_NUMBERS[r3 >> 16 & 0xFF] + HEX_NUMBERS[r3 >> 24 & 0xFF] + HEX_NUMBERS[r4 >> 0 & 0xFF] + HEX_NUMBERS[r4 >> 8 & 0xFF] + HEX_NUMBERS[r4 >> 16 & 0xFF] + HEX_NUMBERS[r4 >> 24 & 0xFF];\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/priorities\n */ /**\n * String representing a priority value.\n */ /**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n */ const priorities = {\n    get (priority = 'normal') {\n        if (typeof priority != 'number') {\n            return this[priority] || this.normal;\n        } else {\n            return priority;\n        }\n    },\n    highest: 100000,\n    high: 1000,\n    normal: 0,\n    low: -1e3,\n    lowest: -1e5\n};\n\n/**\n * Inserts any object with priority at correct index by priority so registered objects are always sorted from highest to lowest priority.\n *\n * @param objects Array of objects with priority to insert object to.\n * @param objectToInsert Object with `priority` property.\n */ function insertToPriorityArray(objects, objectToInsert) {\n    const priority = priorities.get(objectToInsert.priority);\n    // Binary search for better performance in large tables.\n    let left = 0;\n    let right = objects.length;\n    while(left < right){\n        const mid = left + right >> 1; // Use bitwise operator for faster floor division by 2.\n        const midPriority = priorities.get(objects[mid].priority);\n        if (midPriority < priority) {\n            right = mid;\n        } else {\n            left = mid + 1;\n        }\n    }\n    objects.splice(left, 0, objectToInsert);\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/ckeditorerror\n */ /**\n * URL to the documentation with error codes.\n */ const DOCUMENTATION_URL = 'https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html';\n/**\n * The CKEditor error class.\n *\n * You should throw `CKEditorError` when:\n *\n * * An unexpected situation occurred and the editor (most probably) will not work properly. Such exception will be handled\n * by the {@link module:watchdog/watchdog~Watchdog watchdog} (if it is integrated),\n * * If the editor is incorrectly integrated or the editor API is used in the wrong way. This way you will give\n * feedback to the developer as soon as possible. Keep in mind that for common integration issues which should not\n * stop editor initialization (like missing upload adapter, wrong name of a toolbar component) we use\n * {@link module:utils/ckeditorerror~logWarning `logWarning()`} and\n * {@link module:utils/ckeditorerror~logError `logError()`}\n * to improve developers experience and let them see the a working editor as soon as possible.\n *\n * ```ts\n * /**\n *  * Error thrown when a plugin cannot be loaded due to JavaScript errors, lack of plugins with a given name, etc.\n *  *\n *  * @error plugin-load\n *  * @param pluginName The name of the plugin that could not be loaded.\n *  * @param moduleName The name of the module which tried to load this plugin.\n *  *\\/\n * throw new CKEditorError( 'plugin-load', {\n * \tpluginName: 'foo',\n * \tmoduleName: 'bar'\n * } );\n * ```\n */ class CKEditorError extends Error {\n    /**\n\t * A context of the error by which the Watchdog is able to determine which editor crashed.\n\t */ context;\n    /**\n\t * The additional error data passed to the constructor. Undefined if none was passed.\n\t */ data;\n    /**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * @param errorName The error id in an `error-name` format. A link to this error documentation page will be added\n\t * to the thrown error's `message`.\n\t * @param context A context of the error by which the {@link module:watchdog/watchdog~Watchdog watchdog}\n\t * is able to determine which editor crashed. It should be an editor instance or a property connected to it. It can be also\n\t * a `null` value if the editor should not be restarted in case of the error (e.g. during the editor initialization).\n\t * The error context should be checked using the `areConnectedThroughProperties( editor, context )` utility\n\t * to check if the object works as the context.\n\t * @param data Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t * @param originalError An optional original error that is being wrapped in the `CKEditorError` instance.\n\t */ constructor(errorName, context, data, originalError){\n        super(getErrorMessage(errorName, data, originalError));\n        this.name = 'CKEditorError';\n        this.context = context;\n        this.data = data;\n        // Wrapping an original error in a CKEditorError instance.\n        if (originalError) {\n            // Restore the original stack trace to make the error look like the original one.\n            // See https://github.com/ckeditor/ckeditor5/issues/5595 for more details.\n            this.stack = originalError.stack;\n        }\n    }\n    /**\n\t * Checks if the error is of the `CKEditorError` type.\n\t */ is(type) {\n        return type === 'CKEditorError';\n    }\n    /**\n\t * A utility that ensures that the thrown error is a {@link module:utils/ckeditorerror~CKEditorError} one.\n\t * It is useful when combined with the {@link module:watchdog/watchdog~Watchdog} feature, which can restart the editor in case\n\t * of a {@link module:utils/ckeditorerror~CKEditorError} error.\n\t *\n\t * @param error The error to rethrow.\n\t * @param context An object connected through properties with the editor instance. This context will be used\n\t * by the watchdog to verify which editor should be restarted.\n\t */ static rethrowUnexpectedError(error, context) {\n        if (error.is && error.is('CKEditorError')) {\n            throw error;\n        }\n        /**\n\t\t * An unexpected error occurred inside the CKEditor 5 codebase. This error will look like the original one\n\t\t * to make the debugging easier.\n\t\t *\n\t\t * This error is only useful when the editor is initialized using the {@link module:watchdog/watchdog~Watchdog} feature.\n\t\t * In case of such error (or any {@link module:utils/ckeditorerror~CKEditorError} error) the watchdog should restart the editor.\n\t\t *\n\t\t * @error unexpected-error\n\t\t */ throw new CKEditorError('unexpected-error', context, undefined, error);\n    }\n}\n/**\n * Logs a warning to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log a warning to the console.\n *\n * ```ts\n * /**\n *  * There was a problem processing the configuration of the toolbar. The item with the given\n *  * name does not exist, so it was omitted when rendering the toolbar.\n *  *\n *  * @error toolbarview-item-unavailable\n *  * @param {String} name The name of the component.\n *  *\\/\n * logWarning( 'toolbarview-item-unavailable', { name } );\n * ```\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to throw an error and when to log\n * a warning or an error to the console.\n *\n * @param errorName The error name to be logged.\n * @param data Additional data to be logged.\n */ function logWarning(errorName, data) {\n    console.warn(...formatConsoleArguments(errorName, data));\n}\n/**\n * Logs an error to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log an error to the console.\n *\n * ```ts\n * /**\n *  * There was a problem processing the configuration of the toolbar. The item with the given\n *  * name does not exist, so it was omitted when rendering the toolbar.\n *  *\n *  * @error toolbarview-item-unavailable\n *  * @param {String} name The name of the component.\n *  *\\/\n *  logError( 'toolbarview-item-unavailable', { name } );\n * ```\n *\n * **Note**: In most cases logging a warning using {@link module:utils/ckeditorerror~logWarning} is enough.\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to use each method.\n *\n * @param errorName The error name to be logged.\n * @param data Additional data to be logged.\n */ function logError(errorName, data) {\n    console.error(...formatConsoleArguments(errorName, data));\n}\n/**\n * Returns formatted link to documentation message.\n */ function getLinkToDocumentationMessage(errorName) {\n    return `\\nRead more: ${DOCUMENTATION_URL}#error-${errorName}`;\n}\n/**\n * Returns formatted error message.\n */ function getErrorMessage(errorName, data, originalError) {\n    const processedObjects = new WeakSet();\n    const circularReferencesReplacer = (key, value)=>{\n        if (typeof value === 'object' && value !== null) {\n            if (processedObjects.has(value)) {\n                return `[object ${value.constructor.name}]`;\n            }\n            processedObjects.add(value);\n        }\n        return value;\n    };\n    const stringifiedData = data ? ` ${JSON.stringify(data, circularReferencesReplacer)}` : '';\n    const documentationLink = getLinkToDocumentationMessage(errorName);\n    const originalErrorMessage = originalError ? `\\nOriginal error: ${originalError.name}: ${originalError.message}` : '';\n    return errorName + stringifiedData + documentationLink + originalErrorMessage;\n}\n/**\n * Returns formatted console error arguments.\n */ function formatConsoleArguments(errorName, data) {\n    const documentationMessage = getLinkToDocumentationMessage(errorName);\n    return data ? [\n        errorName,\n        data,\n        documentationMessage\n    ] : [\n        errorName,\n        documentationMessage\n    ];\n}\n\nconst version = '46.0.2';\n// The second argument is not a month. It is `monthIndex` and starts from `0`.\nconst releaseDate = new Date(2025, 7, 19);\n/* istanbul ignore next -- @preserve */ if (globalThis.CKEDITOR_VERSION) {\n    /**\n\t * This error is thrown when, due to a mistake in the way CKEditor&nbsp;5 was installed,\n\t * imported, or initialized, some of its modules were evaluated and executed twice.\n\t * Duplicate modules inevitably lead to runtime errors and increased bundle size.\n\t *\n\t * # Check dependency versions\n\t *\n\t * First, make sure that you use the latest version of all CKEditor&nbsp;5 dependencies.\n\t * Depending on the installation method, you should check the versions of the `ckeditor5`,\n\t * `ckeditor5-premium-features`, or `@ckeditor/ckeditor5-<NAME>` packages. If you cannot update\n\t * to the latest version, ensure that all the CKEditor&nbsp;5 packages are\n\t * in the same version.\n\t *\n\t * If you use third-party plugins, make sure to update them, too. If they are incompatible\n\t * with the version of CKEditor&nbsp;5 you use, you may need to downgrade the CKEditor&nbsp;5 packages\n\t * (which we do not recommend). Ask the plugin's author to upgrade the dependencies,\n\t * or fork their project and update it yourself.\n\t *\n\t * # Check imports\n\t *\n\t * The next step is to look at how you import CKEditor&nbsp;5 into your project.\n\t *\n\t * **The {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods}\n\t * are designed to prevent module duplication, so if you are not using them yet, you should consider\n\t * updating your project**. However, several legacy installation methods are still supported for backward\n\t * compatibility, and mixing them may result in module duplication.\n\t *\n\t * These are the most common import methods of the CKEditor&nbsp;5 packages.\n\t *\n\t * - **New installation methods (NIM)** &ndash; Imports from the `ckeditor5` and `ckeditor5-premium-features` packages.\n\t * - **Optimized build** for the new installation methods &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>/dist/index.js`.\n\t * - **Predefined builds** (no longer supported) &ndash; Imports from the `@ckeditor/ckeditor5-build-<NAME>` packages.\n\t * - **Default imports** (legacy) &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>` packages (default export).\n\t * - **`src`** (legacy) &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>/src/*`.\n\t * - **DLL builds** (legacy) &ndash; Imports from the `ckeditor5/build/<NAME>` and `@ckeditor/ckeditor5-<NAME>/build/*`.\n\t *\n\t * The best way to avoid duplicate modules is to avoid mixing these installation methods. For example, if you use imports\n\t * specific to the optimized build, you should use them for all CKEditor&nbsp;5 packages. In addition, since\n\t * the DLL builds already include the core of the editor, they cannot be used with other types of imports.\n\t *\n\t * Here is a matrix showing which installation methods are compatible with each other:\n\t *\n\t * |                  | NIM | Optimized build | Predefined builds | Default imports | `src` | DLL builds |\n\t * |------------------|-----|-----------------|-------------------|-----------------|-------|------------|\n\t * | NIM              | ✅  | ✅              | ❌                | ❌              | ❌    | ❌         |\n\t * | Optimized builds | ✅  | ✅              | ❌                | ❌              | ❌    | ❌         |\n\t * | Predefined build | ❌  | ❌              | ✅                | ❌              | ❌    | ❌         |\n\t * | Default imports  | ❌  | ❌              | ❌                | ✅              | ✅    | ❌         |\n\t * | `src`            | ❌  | ❌              | ❌                | ✅              | ✅    | ❌         |\n\t * | DLL builds       | ❌  | ❌              | ❌                | ❌              | ❌    | ✅         |\n\t *\n\t * If you use any third-party plugins, make sure the way you import them is compatible with\n\t * the way you import CKEditor&nbsp;5.\n\t *\n\t * <details>\n\t * <summary>New installation methods and optimized builds</summary>\n\t *\n\t * If you use the {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods},\n\t * you should only import { code } from the `ckeditor5` and `ckeditor5-premium-features` packages.\n\t * Do not import { code } from the `@ckeditor/ckeditor5-<NAME>` packages unless you follow\n\t * the {@glink getting-started/setup/optimizing-build-size Optimizing build size} guide and the imports from\n\t * the `@ckeditor/ckeditor5-<NAME>` packages end with `/dist/index.js`.\n\t *\n\t * If you use a CDN, ensure that some files are not included twice in your project.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor, Highlight } from 'ckeditor5'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight.js'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Deprecated) Predefined builds</summary>\n\t *\n\t * **As of April, 2025 predefined build are no longer supported. Please refer to the\n\t * {@glink getting-started/index Quick Start} guide\n\t * to choose one of the modern installation and integration methods available**.\n\t *\n\t * If you use the predefined builds, you cannot import any additional plugins.\n\t * These builds already include the editor's core and selected plugins and importing additional\n\t * ones will cause some modules to be bundled and loaded twice.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor } from '@ckeditor/ckeditor5-build-classic'; // ✅\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight'; // ❌\n\t * ```\n\t *\n\t * If you are missing some features from the list of plugins, you should switch to the\n\t * {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods}\n\t * which do not have this limitation.\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Legacy) Default imports and `src` imports</summary>\n\t *\n\t * If you use the {@glink getting-started/legacy/installation-methods/quick-start-other legacy customized installation}\n\t * method, you should only import { code from the `@ckeditor/ckeditor5-<NAME>` packages. While you can import code } from\n\t * the `@ckeditor/ckeditor5-<NAME>/src/*` files, it is not recommended as it can make migration to the new installation\n\t * methods more difficult.\n\t *\n\t * If you use this installation method, you should not import { code } from the `ckeditor5` or `ckeditor5-premium-features` packages.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor } from '@ckeditor/ckeditor5-editor-classic'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ✅ (not recommended)\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Legacy) DLL builds</summary>\n\t *\n\t * If you are using the {@glink getting-started/legacy/advanced/alternative-setups/dll-builds legacy DLL builds},\n\t * you should not import any non-DLL modules.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import 'ckeditor5/build/ckeditor5-dll.js';// ✅\n\t * import '@ckeditor/ckeditor5-editor-classic/build/editor-classic.js';// ✅\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight.js';// ✅\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * # Reinstall `node_modules`\n\t *\n\t * Usually, npm and other package managers deduplicate all packages - for example, `ckeditor5` is only installed once\n\t * in `node_modules/`. However, it is known to fail to do so occasionally.\n\t *\n\t * To rule out this possibility, you can try the following:\n\t *\n\t * 1. Remove the `node_modules` directory.\n\t * 2. Remove the `package-lock.json`, `yarn.lock`, or `pnpm-lock.yaml` files (depending on the package manager used).\n\t * 3. Run `npm install` to reinstall all packages.\n\t * 4. Run `npm ls` to check how many times packages like `@ckeditor/ckeditor5-core` are installed.\n\t * If they are installed more than once, verify which package causes that.\n\t *\n\t * @error ckeditor-duplicated-modules\n\t */ throw new CKEditorError('ckeditor-duplicated-modules', null);\n} else {\n    globalThis.CKEDITOR_VERSION = version;\n}\n\nconst _listeningTo = Symbol('listeningTo');\nconst _emitterId = Symbol('emitterId');\nconst _delegations = Symbol('delegations');\nconst defaultEmitterClass$1 = /* #__PURE__ */ EmitterMixin(Object);\nfunction EmitterMixin(base) {\n    if (!base) {\n        return defaultEmitterClass$1;\n    }\n    class Mixin extends base {\n        on(event, callback, options) {\n            this.listenTo(this, event, callback, options);\n        }\n        once(event, callback, options) {\n            let wasFired = false;\n            const onceCallback = (event, ...args)=>{\n                // Ensure the callback is called only once even if the callback itself leads to re-firing the event\n                // (which would call the callback again).\n                if (!wasFired) {\n                    wasFired = true;\n                    // Go off() at the first call.\n                    event.off();\n                    // Go with the original callback.\n                    callback.call(this, event, ...args);\n                }\n            };\n            // Make a similar on() call, simply replacing the callback.\n            this.listenTo(this, event, onceCallback, options);\n        }\n        off(event, callback) {\n            this.stopListening(this, event, callback);\n        }\n        listenTo(emitter, event, callback, options = {}) {\n            let emitterInfo, eventCallbacks;\n            // _listeningTo contains a list of emitters that this object is listening to.\n            // This list has the following format:\n            //\n            // _listeningTo: {\n            //     emitterId: {\n            //         emitter: emitter,\n            //         callbacks: {\n            //             event1: [ callback1, callback2, ... ]\n            //             ....\n            //         }\n            //     },\n            //     ...\n            // }\n            if (!this[_listeningTo]) {\n                this[_listeningTo] = {};\n            }\n            const emitters = this[_listeningTo];\n            if (!_getEmitterId(emitter)) {\n                _setEmitterId(emitter);\n            }\n            const emitterId = _getEmitterId(emitter);\n            if (!(emitterInfo = emitters[emitterId])) {\n                emitterInfo = emitters[emitterId] = {\n                    emitter,\n                    callbacks: {}\n                };\n            }\n            if (!(eventCallbacks = emitterInfo.callbacks[event])) {\n                eventCallbacks = emitterInfo.callbacks[event] = [];\n            }\n            eventCallbacks.push(callback);\n            // Finally register the callback to the event.\n            addEventListener(this, emitter, event, callback, options);\n        }\n        stopListening(emitter, event, callback) {\n            const emitters = this[_listeningTo];\n            let emitterId = emitter && _getEmitterId(emitter);\n            const emitterInfo = emitters && emitterId ? emitters[emitterId] : undefined;\n            const eventCallbacks = emitterInfo && event ? emitterInfo.callbacks[event] : undefined;\n            // Stop if nothing has been listened.\n            if (!emitters || emitter && !emitterInfo || event && !eventCallbacks) {\n                return;\n            }\n            // All params provided. off() that single callback.\n            if (callback) {\n                removeEventListener(this, emitter, event, callback);\n                // We must remove callbacks as well in order to prevent memory leaks.\n                // See https://github.com/ckeditor/ckeditor5/pull/8480\n                const index = eventCallbacks.indexOf(callback);\n                if (index !== -1) {\n                    if (eventCallbacks.length === 1) {\n                        delete emitterInfo.callbacks[event];\n                    } else {\n                        removeEventListener(this, emitter, event, callback);\n                    }\n                }\n            } else if (eventCallbacks) {\n                while(callback = eventCallbacks.pop()){\n                    removeEventListener(this, emitter, event, callback);\n                }\n                delete emitterInfo.callbacks[event];\n            } else if (emitterInfo) {\n                for(event in emitterInfo.callbacks){\n                    this.stopListening(emitter, event);\n                }\n                delete emitters[emitterId];\n            } else {\n                for(emitterId in emitters){\n                    this.stopListening(emitters[emitterId].emitter);\n                }\n                delete this[_listeningTo];\n            }\n        }\n        fire(eventOrInfo, ...args) {\n            try {\n                const eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo(this, eventOrInfo);\n                const event = eventInfo.name;\n                let callbacks = getCallbacksForEvent(this, event);\n                // Record that the event passed this emitter on its path.\n                eventInfo.path.push(this);\n                // Handle event listener callbacks first.\n                if (callbacks) {\n                    // Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n                    // are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n                    // failed if callbacks were added to the queue before currently processed callback.\n                    // If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n                    // event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n                    callbacks = callbacks.slice();\n                    for(let i = 0; i < callbacks.length; i++){\n                        const fn = callbacks[i].callback;\n                        fn.call(this, eventInfo, ...args);\n                        // Remove the callback from future requests if off() has been called.\n                        if (eventInfo.off.called) {\n                            // Remove the called mark for the next calls.\n                            delete eventInfo.off.called;\n                            this._removeEventListener(event, fn);\n                        }\n                        // Do not execute next callbacks if stop() was called.\n                        if (eventInfo.stop.called) {\n                            break;\n                        }\n                    }\n                }\n                // Delegate event to other emitters if needed.\n                const delegations = this[_delegations];\n                if (delegations) {\n                    const destinations = delegations.get(event);\n                    const passAllDestinations = delegations.get('*');\n                    if (destinations) {\n                        fireDelegatedEvents(destinations, eventInfo, args);\n                    }\n                    if (passAllDestinations) {\n                        fireDelegatedEvents(passAllDestinations, eventInfo, args);\n                    }\n                }\n                return eventInfo.return;\n            } catch (err) {\n                // @if CK_DEBUG // throw err;\n                /* istanbul ignore next -- @preserve */ CKEditorError.rethrowUnexpectedError(err, this);\n            }\n        }\n        delegate(...events) {\n            return {\n                to: (emitter, nameOrFunction)=>{\n                    if (!this[_delegations]) {\n                        this[_delegations] = new Map();\n                    }\n                    // Originally there was a for..of loop which unfortunately caused an error in Babel that didn't allow\n                    // build an application. See: https://github.com/ckeditor/ckeditor5-react/issues/40.\n                    events.forEach((eventName)=>{\n                        const destinations = this[_delegations].get(eventName);\n                        if (!destinations) {\n                            this[_delegations].set(eventName, new Map([\n                                [\n                                    emitter,\n                                    nameOrFunction\n                                ]\n                            ]));\n                        } else {\n                            destinations.set(emitter, nameOrFunction);\n                        }\n                    });\n                }\n            };\n        }\n        stopDelegating(event, emitter) {\n            if (!this[_delegations]) {\n                return;\n            }\n            if (!event) {\n                this[_delegations].clear();\n            } else if (!emitter) {\n                this[_delegations].delete(event);\n            } else {\n                const destinations = this[_delegations].get(event);\n                if (destinations) {\n                    destinations.delete(emitter);\n                }\n            }\n        }\n        _addEventListener(event, callback, options) {\n            createEventNamespace(this, event);\n            const lists = getCallbacksListsForNamespace(this, event);\n            const priority = priorities.get(options.priority);\n            const callbackDefinition = {\n                callback,\n                priority\n            };\n            // Add the callback to all callbacks list.\n            for (const callbacks of lists){\n                // Add the callback to the list in the right priority position.\n                insertToPriorityArray(callbacks, callbackDefinition);\n            }\n        }\n        _removeEventListener(event, callback) {\n            const lists = getCallbacksListsForNamespace(this, event);\n            for (const callbacks of lists){\n                for(let i = 0; i < callbacks.length; i++){\n                    if (callbacks[i].callback == callback) {\n                        // Remove the callback from the list (fixing the next index).\n                        callbacks.splice(i, 1);\n                        i--;\n                    }\n                }\n            }\n        }\n    }\n    return Mixin;\n}\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @internal\n * @param listeningEmitter An emitter that listens.\n * @param listenedToEmitterId Unique emitter id of emitter listened to.\n */ function _getEmitterListenedTo(listeningEmitter, listenedToEmitterId) {\n    const listeningTo = listeningEmitter[_listeningTo];\n    if (listeningTo && listeningTo[listenedToEmitterId]) {\n        return listeningTo[listenedToEmitterId].emitter;\n    }\n    return null;\n}\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @internal\n * @param emitter An emitter for which id will be set.\n * @param id Unique id to set. If not passed, random unique id will be set.\n */ function _setEmitterId(emitter, id) {\n    if (!emitter[_emitterId]) {\n        emitter[_emitterId] = id || uid();\n    }\n}\n/**\n * Returns emitter's unique id.\n *\n * @internal\n * @param emitter An emitter which id will be returned.\n */ function _getEmitterId(emitter) {\n    return emitter[_emitterId];\n}\n/**\n * Gets the internal `_events` property of the given object.\n * `_events` property store all lists with callbacks for registered event names.\n * If there were no events registered on the object, empty `_events` object is created.\n */ function getEvents(source) {\n    if (!source._events) {\n        Object.defineProperty(source, '_events', {\n            value: {}\n        });\n    }\n    return source._events;\n}\n/**\n * Creates event node for generic-specific events relation architecture.\n */ function makeEventNode() {\n    return {\n        callbacks: [],\n        childEvents: []\n    };\n}\n/**\n * Creates an architecture for generic-specific events relation.\n * If needed, creates all events for given eventName, i.e. if the first registered event\n * is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n * It also copies callbacks from more generic events to more specific events when\n * specific events are created.\n */ function createEventNamespace(source, eventName) {\n    const events = getEvents(source);\n    // First, check if the event we want to add to the structure already exists.\n    if (events[eventName]) {\n        // If it exists, we don't have to do anything.\n        return;\n    }\n    // In other case, we have to create the structure for the event.\n    // Note, that we might need to create intermediate events too.\n    // I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n    // we need to also register foo:bar.\n    // Currently processed event name.\n    let name = eventName;\n    // Name of the event that is a child event for currently processed event.\n    let childEventName = null;\n    // Array containing all newly created specific events.\n    const newEventNodes = [];\n    // While loop can't check for ':' index because we have to handle generic events too.\n    // In each loop, we truncate event name, going from the most specific name to the generic one.\n    // I.e. foo:bar:abc -> foo:bar -> foo.\n    while(name !== ''){\n        if (events[name]) {\n            break;\n        }\n        // If this event is not yet registered, create a new object for it.\n        events[name] = makeEventNode();\n        // Add it to the array with newly created events.\n        newEventNodes.push(events[name]);\n        // Add previously processed event name as a child of this event.\n        if (childEventName) {\n            events[name].childEvents.push(childEventName);\n        }\n        childEventName = name;\n        // If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n        name = name.substr(0, name.lastIndexOf(':'));\n    }\n    if (name !== '') {\n        // If name is not empty, we found an already registered event that was a parent of the\n        // event we wanted to register.\n        // Copy that event's callbacks to newly registered events.\n        for (const node of newEventNodes){\n            node.callbacks = events[name].callbacks.slice();\n        }\n        // Add last newly created event to the already registered event.\n        events[name].childEvents.push(childEventName);\n    }\n}\n/**\n * Gets an array containing callbacks list for a given event and it's more specific events.\n * I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n * return callback list of foo:bar and foo:bar:abc (but not foo).\n */ function getCallbacksListsForNamespace(source, eventName) {\n    const eventNode = getEvents(source)[eventName];\n    if (!eventNode) {\n        return [];\n    }\n    let callbacksLists = [\n        eventNode.callbacks\n    ];\n    for(let i = 0; i < eventNode.childEvents.length; i++){\n        const childCallbacksLists = getCallbacksListsForNamespace(source, eventNode.childEvents[i]);\n        callbacksLists = callbacksLists.concat(childCallbacksLists);\n    }\n    return callbacksLists;\n}\n/**\n * Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n * If there are no callbacks registered for given event, it checks if this is a specific event and looks\n * for callbacks for it's more generic version.\n */ function getCallbacksForEvent(source, eventName) {\n    if (!source._events) {\n        return null;\n    }\n    let currentEventName = eventName;\n    do {\n        const event = source._events[currentEventName];\n        if (event && event.callbacks && event.callbacks.length) {\n            return event.callbacks;\n        }\n        const colonIndex = currentEventName.lastIndexOf(':');\n        currentEventName = colonIndex > -1 ? currentEventName.substring(0, colonIndex) : '';\n    }while (currentEventName)\n    return null;\n}\n/**\n * Fires delegated events for given map of destinations.\n *\n * @param destinations A map containing `[ {@link module:utils/emittermixin~Emitter}, \"event name\" ]` pair destinations.\n * @param eventInfo The original event info object.\n * @param fireArgs Arguments the original event was fired with.\n */ function fireDelegatedEvents(destinations, eventInfo, fireArgs) {\n    for (let [emitter, name] of destinations){\n        if (!name) {\n            name = eventInfo.name;\n        } else if (typeof name == 'function') {\n            name = name(eventInfo.name);\n        }\n        const delegatedInfo = new EventInfo(eventInfo.source, name);\n        delegatedInfo.path = [\n            ...eventInfo.path\n        ];\n        emitter.fire(delegatedInfo, ...fireArgs);\n    }\n}\n/**\n * Helper for registering event callback on the emitter.\n */ function addEventListener(listener, emitter, event, callback, options) {\n    if (emitter._addEventListener) {\n        emitter._addEventListener(event, callback, options);\n    } else {\n        // Allow listening on objects that do not implement Emitter interface.\n        // This is needed in some tests that are using mocks instead of the real objects with EmitterMixin mixed.\n        listener._addEventListener.call(emitter, event, callback, options);\n    }\n}\n/**\n * Helper for removing event callback from the emitter.\n */ function removeEventListener(listener, emitter, event, callback) {\n    if (emitter._removeEventListener) {\n        emitter._removeEventListener(event, callback);\n    } else {\n        // Allow listening on objects that do not implement Emitter interface.\n        // This is needed in some tests that are using mocks instead of the real objects with EmitterMixin mixed.\n        listener._removeEventListener.call(emitter, event, callback);\n    }\n}\n\nconst observablePropertiesSymbol = Symbol('observableProperties');\nconst boundObservablesSymbol = Symbol('boundObservables');\nconst boundPropertiesSymbol = Symbol('boundProperties');\nconst decoratedMethods = Symbol('decoratedMethods');\nconst decoratedOriginal = Symbol('decoratedOriginal');\nconst defaultObservableClass = /* #__PURE__ */ ObservableMixin(/* #__PURE__ */ EmitterMixin());\nfunction ObservableMixin(base) {\n    if (!base) {\n        return defaultObservableClass;\n    }\n    class Mixin extends base {\n        set(name, value) {\n            // If the first parameter is an Object, iterate over its properties.\n            if (isObject$1(name)) {\n                Object.keys(name).forEach((property)=>{\n                    this.set(property, name[property]);\n                }, this);\n                return;\n            }\n            initObservable(this);\n            const properties = this[observablePropertiesSymbol];\n            if (name in this && !properties.has(name)) {\n                /**\n\t\t\t\t * Cannot override an existing property.\n\t\t\t\t *\n\t\t\t\t * This error is thrown when trying to {@link module:utils/observablemixin~Observable#set set} a property with\n\t\t\t\t * a name of an already existing property. For example:\n\t\t\t\t *\n\t\t\t\t * ```ts\n\t\t\t\t * let observable = new Model();\n\t\t\t\t * observable.property = 1;\n\t\t\t\t * observable.set( 'property', 2 );\t\t\t// throws\n\t\t\t\t *\n\t\t\t\t * observable.set( 'property', 1 );\n\t\t\t\t * observable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t\t * ```\n\t\t\t\t *\n\t\t\t\t * @error observable-set-cannot-override\n\t\t\t\t */ throw new CKEditorError('observable-set-cannot-override', this);\n            }\n            Object.defineProperty(this, name, {\n                enumerable: true,\n                configurable: true,\n                get () {\n                    return properties.get(name);\n                },\n                set (value) {\n                    const oldValue = properties.get(name);\n                    // Fire `set` event before the new value will be set to make it possible\n                    // to override observable property without affecting `change` event.\n                    // See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n                    let newValue = this.fire(`set:${name}`, name, value, oldValue);\n                    if (newValue === undefined) {\n                        newValue = value;\n                    }\n                    // Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n                    // Note: When properties map has no such own property, then its value is undefined.\n                    if (oldValue !== newValue || !properties.has(name)) {\n                        properties.set(name, newValue);\n                        this.fire(`change:${name}`, name, newValue, oldValue);\n                    }\n                }\n            });\n            this[name] = value;\n        }\n        bind(...bindProperties) {\n            if (!bindProperties.length || !isStringArray(bindProperties)) {\n                /**\n\t\t\t\t * All properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-wrong-properties\n\t\t\t\t */ throw new CKEditorError('observable-bind-wrong-properties', this);\n            }\n            if (new Set(bindProperties).size !== bindProperties.length) {\n                /**\n\t\t\t\t * Properties must be unique.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t\t */ throw new CKEditorError('observable-bind-duplicate-properties', this);\n            }\n            initObservable(this);\n            const boundProperties = this[boundPropertiesSymbol];\n            bindProperties.forEach((propertyName)=>{\n                if (boundProperties.has(propertyName)) {\n                    /**\n\t\t\t\t\t * Cannot bind the same property more than once.\n\t\t\t\t\t *\n\t\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t\t */ throw new CKEditorError('observable-bind-rebind', this);\n                }\n            });\n            const bindings = new Map();\n            bindProperties.forEach((a)=>{\n                const binding = {\n                    property: a,\n                    to: []\n                };\n                boundProperties.set(a, binding);\n                bindings.set(a, binding);\n            });\n            return {\n                to: bindTo,\n                toMany: bindToMany,\n                _observable: this,\n                _bindProperties: bindProperties,\n                _to: [],\n                _bindings: bindings\n            };\n        }\n        unbind(...unbindProperties) {\n            // Nothing to do here if not inited yet.\n            if (!this[observablePropertiesSymbol]) {\n                return;\n            }\n            const boundProperties = this[boundPropertiesSymbol];\n            const boundObservables = this[boundObservablesSymbol];\n            if (unbindProperties.length) {\n                if (!isStringArray(unbindProperties)) {\n                    /**\n\t\t\t\t\t * Properties must be strings.\n\t\t\t\t\t *\n\t\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t\t */ throw new CKEditorError('observable-unbind-wrong-properties', this);\n                }\n                unbindProperties.forEach((propertyName)=>{\n                    const binding = boundProperties.get(propertyName);\n                    // Nothing to do if the binding is not defined\n                    if (!binding) {\n                        return;\n                    }\n                    binding.to.forEach(([toObservable, toProperty])=>{\n                        const toProperties = boundObservables.get(toObservable);\n                        const toPropertyBindings = toProperties[toProperty];\n                        toPropertyBindings.delete(binding);\n                        if (!toPropertyBindings.size) {\n                            delete toProperties[toProperty];\n                        }\n                        if (!Object.keys(toProperties).length) {\n                            boundObservables.delete(toObservable);\n                            this.stopListening(toObservable, 'change');\n                        }\n                    });\n                    boundProperties.delete(propertyName);\n                });\n            } else {\n                boundObservables.forEach((bindings, boundObservable)=>{\n                    this.stopListening(boundObservable, 'change');\n                });\n                boundObservables.clear();\n                boundProperties.clear();\n            }\n        }\n        decorate(methodName) {\n            initObservable(this);\n            const originalMethod = this[methodName];\n            if (!originalMethod) {\n                /**\n\t\t\t\t * Cannot decorate an undefined method.\n\t\t\t\t *\n\t\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t\t * @param {object} object The object which method should be decorated.\n\t\t\t\t * @param {string} methodName Name of the method which does not exist.\n\t\t\t\t */ throw new CKEditorError('observablemixin-cannot-decorate-undefined', this, {\n                    object: this,\n                    methodName\n                });\n            }\n            this.on(methodName, (evt, args)=>{\n                evt.return = originalMethod.apply(this, args);\n            });\n            this[methodName] = function(...args) {\n                return this.fire(methodName, args);\n            };\n            this[methodName][decoratedOriginal] = originalMethod;\n            if (!this[decoratedMethods]) {\n                this[decoratedMethods] = [];\n            }\n            this[decoratedMethods].push(methodName);\n        }\n        // Override the EmitterMixin stopListening method to be able to clean (and restore) decorated methods.\n        // This is needed in case of:\n        //  1. Have x.foo() decorated.\n        //  2. Call x.stopListening()\n        //  3. Call x.foo(). Problem: nothing happens (the original foo() method is not executed)\n        stopListening(emitter, event, callback) {\n            // Removing all listeners so let's clean the decorated methods to the original state.\n            if (!emitter && this[decoratedMethods]) {\n                for (const methodName of this[decoratedMethods]){\n                    this[methodName] = this[methodName][decoratedOriginal];\n                }\n                delete this[decoratedMethods];\n            }\n            super.stopListening(emitter, event, callback);\n        }\n        [observablePropertiesSymbol];\n        [decoratedMethods];\n        [boundPropertiesSymbol];\n        [boundObservablesSymbol];\n    }\n    return Mixin;\n}\n// Init symbol properties needed for the observable mechanism to work.\nfunction initObservable(observable) {\n    // Do nothing if already inited.\n    if (observable[observablePropertiesSymbol]) {\n        return;\n    }\n    // The internal hash containing the observable's state.\n    Object.defineProperty(observable, observablePropertiesSymbol, {\n        value: new Map()\n    });\n    // Map containing bindings to external observables. It shares the binding objects\n    // (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~Observable#_boundProperties} and\n    // it is used to observe external observables to update own properties accordingly.\n    // See {@link module:utils/observablemixin~Observable#bind}.\n    //\n    //\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n    //\t\tconsole.log( A._boundObservables );\n    //\n    //\t\t\tMap( {\n    //\t\t\t\tB: {\n    //\t\t\t\t\tx: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n    //\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n    //\t\t\t\t\t] ),\n    //\t\t\t\t\ty: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n    //\t\t\t\t\t] )\n    //\t\t\t\t}\n    //\t\t\t} )\n    //\n    //\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n    //\t\tconsole.log( A._boundObservables );\n    //\n    //\t\t\tMap( {\n    //\t\t\t\tB: {\n    //\t\t\t\t\tx: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n    //\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n    //\t\t\t\t\t] ),\n    //\t\t\t\t\ty: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n    //\t\t\t\t\t] ),\n    //\t\t\t\t\tz: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n    //\t\t\t\t\t] )\n    //\t\t\t\t},\n    //\t\t\t\tC: {\n    //\t\t\t\t\tw: Set( [\n    //\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n    //\t\t\t\t\t] )\n    //\t\t\t\t}\n    //\t\t\t} )\n    //\n    Object.defineProperty(observable, boundObservablesSymbol, {\n        value: new Map()\n    });\n    // Object that stores which properties of this observable are bound and how. It shares\n    // the binding objects (`{ observable: A, property: 'a', to: ... }`) with\n    // {@link module:utils/observablemixin~Observable#_boundObservables}. This data structure is\n    // a reverse of {@link module:utils/observablemixin~Observable#_boundObservables} and it is helpful for\n    // {@link module:utils/observablemixin~Observable#unbind}.\n    //\n    // See {@link module:utils/observablemixin~Observable#bind}.\n    //\n    //\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n    //\t\tconsole.log( A._boundProperties );\n    //\n    //\t\t\tMap( {\n    //\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n    //\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n    //\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n    //\t\t\t} )\n    //\n    //\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n    //\t\tconsole.log( A._boundProperties );\n    //\n    //\t\t\tMap( {\n    //\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n    //\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n    //\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n    //\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n    //\t\t\t} )\n    Object.defineProperty(observable, boundPropertiesSymbol, {\n        value: new Map()\n    });\n}\n/**\n * A chaining for {@link module:utils/observablemixin~Observable#bind} providing `.to()` interface.\n *\n * @param args Arguments of the `.to( args )` binding.\n */ function bindTo(...args) {\n    const parsedArgs = parseBindToArgs(...args);\n    const bindingsKeys = Array.from(this._bindings.keys());\n    const numberOfBindings = bindingsKeys.length;\n    // Eliminate A.bind( 'x' ).to( B, C )\n    if (!parsedArgs.callback && parsedArgs.to.length > 1) {\n        /**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-to-no-callback\n\t\t */ throw new CKEditorError('observable-bind-to-no-callback', this);\n    }\n    // Eliminate A.bind( 'x', 'y' ).to( B, callback )\n    if (numberOfBindings > 1 && parsedArgs.callback) {\n        /**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */ throw new CKEditorError('observable-bind-to-extra-callback', this);\n    }\n    parsedArgs.to.forEach((to)=>{\n        // Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n        if (to.properties.length && to.properties.length !== numberOfBindings) {\n            /**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */ throw new CKEditorError('observable-bind-to-properties-length', this);\n        }\n        // When no to.properties specified, observing source properties instead i.e.\n        // A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n        if (!to.properties.length) {\n            to.properties = this._bindProperties;\n        }\n    });\n    this._to = parsedArgs.to;\n    // Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n    if (parsedArgs.callback) {\n        this._bindings.get(bindingsKeys[0]).callback = parsedArgs.callback;\n    }\n    attachBindToListeners(this._observable, this._to);\n    // Update observable._boundProperties and observable._boundObservables.\n    updateBindToBound(this);\n    // Set initial values of bound properties.\n    this._bindProperties.forEach((propertyName)=>{\n        updateBoundObservableProperty(this._observable, propertyName);\n    });\n}\n/**\n * Binds to an attribute in a set of iterable observables.\n */ function bindToMany(observables, attribute, callback) {\n    if (this._bindings.size > 1) {\n        /**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */ throw new CKEditorError('observable-bind-to-many-not-one-binding', this);\n    }\n    this.to(// Bind to #attribute of each observable...\n    ...getBindingTargets(observables, attribute), // ...using given callback to parse attribute values.\n    callback);\n}\n/**\n * Returns an array of binding components for\n * {@link Observable#bind} from a set of iterable observables.\n */ function getBindingTargets(observables, attribute) {\n    const observableAndAttributePairs = observables.map((observable)=>[\n            observable,\n            attribute\n        ]);\n    // Merge pairs to one-dimension array of observables and attributes.\n    return Array.prototype.concat.apply([], observableAndAttributePairs);\n}\n/**\n * Check if all entries of the array are of `String` type.\n */ function isStringArray(arr) {\n    return arr.every((a)=>typeof a == 'string');\n}\n/**\n * Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n * an object with a parsed structure. For example\n *\n * ```ts\n * A.bind( 'x' ).to( B, 'a', C, 'b', call );\n * ```\n *\n * becomes\n *\n * ```ts\n * {\n * \tto: [\n * \t\t{ observable: B, properties: [ 'a' ] },\n * \t\t{ observable: C, properties: [ 'b' ] },\n * \t],\n * \tcallback: call\n * }\n *\n * @param args Arguments of {@link Observable#bind}`.to( args )`.\n */ function parseBindToArgs(...args) {\n    // Eliminate A.bind( 'x' ).to()\n    if (!args.length) {\n        /**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */ throw new CKEditorError('observable-bind-to-parse-error', null);\n    }\n    const parsed = {\n        to: []\n    };\n    let lastObservable;\n    if (typeof args[args.length - 1] == 'function') {\n        parsed.callback = args.pop();\n    }\n    args.forEach((a)=>{\n        if (typeof a == 'string') {\n            lastObservable.properties.push(a);\n        } else if (typeof a == 'object') {\n            lastObservable = {\n                observable: a,\n                properties: []\n            };\n            parsed.to.push(lastObservable);\n        } else {\n            throw new CKEditorError('observable-bind-to-parse-error', null);\n        }\n    });\n    return parsed;\n}\n/**\n * Synchronizes {@link module:utils/observable#_boundObservables} with {@link Binding}.\n *\n * @param binding A binding to store in {@link Observable#_boundObservables}.\n * @param toObservable A observable, which is a new component of `binding`.\n * @param toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\n */ function updateBoundObservables(observable, binding, toObservable, toPropertyName) {\n    const boundObservables = observable[boundObservablesSymbol];\n    const bindingsToObservable = boundObservables.get(toObservable);\n    const bindings = bindingsToObservable || {};\n    if (!bindings[toPropertyName]) {\n        bindings[toPropertyName] = new Set();\n    }\n    // Pass the binding to a corresponding Set in `observable._boundObservables`.\n    bindings[toPropertyName].add(binding);\n    if (!bindingsToObservable) {\n        boundObservables.set(toObservable, bindings);\n    }\n}\n/**\n * Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n * with {@link BindChain}.\n *\n * Assuming the following binding being created\n *\n * ```ts\n * A.bind( 'a', 'b' ).to( B, 'x', 'y' );\n * ```\n *\n * the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n *\n * ```ts\n * {\n * \ta: { observable: A, property: 'a', to: [] },\n * \tb: { observable: A, property: 'b', to: [] },\n * }\n * ```\n *\n * Iterate over all bindings in this chain and fill their `to` properties with\n * corresponding to( ... ) arguments (components of the binding), so\n *\n * ```ts\n * {\n * \ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n * \tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n * }\n * ```\n *\n * Then update the structure of {@link Observable#_boundObservables} with updated\n * binding, so it becomes:\n *\n * ```ts\n * Map( {\n * \tB: {\n * \t\tx: Set( [\n * \t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n * \t\t] ),\n * \t\ty: Set( [\n * \t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n * \t\t] )\n * \t}\n * } )\n * ```\n *\n * @param chain The binding initialized by {@link Observable#bind}.\n */ function updateBindToBound(chain) {\n    let toProperty;\n    chain._bindings.forEach((binding, propertyName)=>{\n        // Note: For a binding without a callback, this will run only once\n        // like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n        // TODO: ES6 destructuring.\n        chain._to.forEach((to)=>{\n            toProperty = to.properties[binding.callback ? 0 : chain._bindProperties.indexOf(propertyName)];\n            binding.to.push([\n                to.observable,\n                toProperty\n            ]);\n            updateBoundObservables(chain._observable, binding, to.observable, toProperty);\n        });\n    });\n}\n/**\n * Updates an property of a {@link Observable} with a value\n * determined by an entry in {@link Observable#_boundProperties}.\n *\n * @param observable A observable which property is to be updated.\n * @param propertyName An property to be updated.\n */ function updateBoundObservableProperty(observable, propertyName) {\n    const boundProperties = observable[boundPropertiesSymbol];\n    const binding = boundProperties.get(propertyName);\n    let propertyValue;\n    // When a binding with callback is created like\n    //\n    // \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n    //\n    // collect B.b and C.c, then pass them to callback to set A.a.\n    if (binding.callback) {\n        propertyValue = binding.callback.apply(observable, binding.to.map((to)=>to[0][to[1]]));\n    } else {\n        propertyValue = binding.to[0];\n        propertyValue = propertyValue[0][propertyValue[1]];\n    }\n    if (Object.prototype.hasOwnProperty.call(observable, propertyName)) {\n        observable[propertyName] = propertyValue;\n    } else {\n        observable.set(propertyName, propertyValue);\n    }\n}\n/**\n * Starts listening to changes in {@link BindChain._to} observables to update\n * {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n * initial state of {@link BindChain._observable}.\n *\n * @param chain The chain initialized by {@link Observable#bind}.\n */ function attachBindToListeners(observable, toBindings) {\n    toBindings.forEach((to)=>{\n        const boundObservables = observable[boundObservablesSymbol];\n        let bindings;\n        // If there's already a chain between the observables (`observable` listens to\n        // `to.observable`), there's no need to create another `change` event listener.\n        if (!boundObservables.get(to.observable)) {\n            observable.listenTo(to.observable, 'change', (evt, propertyName)=>{\n                bindings = boundObservables.get(to.observable)[propertyName];\n                // Note: to.observable will fire for any property change, react\n                // to changes of properties which are bound only.\n                if (bindings) {\n                    bindings.forEach((binding)=>{\n                        updateBoundObservableProperty(observable, binding.property);\n                    });\n                }\n            });\n        }\n    });\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/elementreplacer\n */ /**\n * Utility class allowing to hide existing HTML elements or replace them with given ones in a way that doesn't remove\n * the original elements from the DOM.\n */ class ElementReplacer {\n    /**\n\t * The elements replaced by {@link #replace} and their replacements.\n\t */ _replacedElements;\n    constructor(){\n        this._replacedElements = [];\n    }\n    /**\n\t * Hides the `element` and, if specified, inserts the the given element next to it.\n\t *\n\t * The effect of this method can be reverted by {@link #restore}.\n\t *\n\t * @param element The element to replace.\n\t * @param newElement The replacement element. If not passed, then the `element` will just be hidden.\n\t */ replace(element, newElement) {\n        this._replacedElements.push({\n            element,\n            newElement\n        });\n        element.style.display = 'none';\n        if (newElement) {\n            element.parentNode.insertBefore(newElement, element.nextSibling);\n        }\n    }\n    /**\n\t * Restores what {@link #replace} did.\n\t */ restore() {\n        this._replacedElements.forEach(({ element, newElement })=>{\n            element.style.display = '';\n            if (newElement) {\n                newElement.remove();\n            }\n        });\n        this._replacedElements = [];\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/abortabledebounce\n */ /**\n * Returns a function wrapper that will execute the provided function and abort any previous call that is still in progress.\n *\n * @param func The function to be called. It will be provided with `AbortSignal` as the first parameter.\n */ function abortableDebounce(func) {\n    let controller = new AbortController();\n    function abortable(...args) {\n        controller.abort();\n        controller = new AbortController();\n        return func(controller.signal, ...args);\n    }\n    abortable.abort = ()=>controller.abort();\n    return abortable;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/count\n */ /**\n * Returns the number of items return by the iterator.\n *\n * ```ts\n * count( [ 1, 2, 3, 4, 5 ] ); // 5;\n * ```\n *\n * @param iterable Any iterable.\n * @returns Number of items returned by that iterable.\n */ function count(iterable) {\n    let count = 0;\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    for (const _ of iterable){\n        count++;\n    }\n    return count;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/comparearrays\n */ /**\n * Compares how given arrays relate to each other. One array can be: same as another array, prefix of another array\n * or completely different. If arrays are different, first index at which they differ is returned. Otherwise,\n * a flag specifying the relation is returned. Flags are negative numbers, so whenever a number >= 0 is returned\n * it means that arrays differ.\n *\n * ```ts\n * compareArrays( [ 0, 2 ], [ 0, 2 ] );\t\t// 'same'\n * compareArrays( [ 0, 2 ], [ 0, 2, 1 ] );\t\t// 'prefix'\n * compareArrays( [ 0, 2 ], [ 0 ] );\t\t\t// 'extension'\n * compareArrays( [ 0, 2 ], [ 1, 2 ] );\t\t// 0\n * compareArrays( [ 0, 2 ], [ 0, 1 ] );\t\t// 1\n * ```\n *\n * @param a Array that is compared.\n * @param b Array to compare with.\n * @returns How array `a` is related to `b`.\n */ function compareArrays(a, b) {\n    const minLen = Math.min(a.length, b.length);\n    for(let i = 0; i < minLen; i++){\n        if (a[i] != b[i]) {\n            // The arrays are different.\n            return i;\n        }\n    }\n    // Both arrays were same at all points.\n    if (a.length == b.length) {\n        // If their length is also same, they are the same.\n        return 'same';\n    } else if (a.length < b.length) {\n        // Compared array is shorter so it is a prefix of the other array.\n        return 'prefix';\n    } else {\n        // Compared array is longer so it is an extension of the other array.\n        return 'extension';\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/isiterable\n */ /**\n * Checks if value implements iterator interface.\n *\n * @param value The value to check.\n * @returns True if value implements iterator interface.\n */ function isIterable(value) {\n    return !!(value && value[Symbol.iterator]);\n}\n\n/**\n * Creates an HTML or SVG element with attributes and children elements.\n *\n * ```ts\n * createElement( document, 'p' ); // <p>\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg' } ); // <mask>\n * ```\n *\n * @param doc Document used to create the element.\n * @param name Name of the element.\n * @param attributes Object where keys represent attribute keys and values represent attribute values.\n * @param children Child or any iterable of children. Strings will be automatically turned into Text nodes.\n * @returns HTML or SVG element.\n */ function createElement(doc, name, attributes = {}, children = []) {\n    const namespace = attributes && attributes.xmlns;\n    const element = namespace ? doc.createElementNS(namespace, name) : doc.createElement(name);\n    for(const key in attributes){\n        element.setAttribute(key, attributes[key]);\n    }\n    if (isString(children) || !isIterable(children)) {\n        children = [\n            children\n        ];\n    }\n    for (let child of children){\n        if (isString(child)) {\n            child = doc.createTextNode(child);\n        }\n        element.appendChild(child);\n    }\n    return element;\n}\n\n/**\n * Handles a configuration dictionary.\n *\n * @typeParam Cfg A type of the configuration dictionary.\n */ class Config {\n    /**\n\t * Store for the whole configuration.\n\t */ _config;\n    /**\n\t * Creates an instance of the {@link ~Config} class.\n\t *\n\t * @param configurations The initial configurations to be set. Usually, provided by the user.\n\t * @param defaultConfigurations The default configurations. Usually, provided by the system.\n\t */ constructor(configurations, defaultConfigurations){\n        this._config = Object.create(null);\n        // Set default configuration.\n        if (defaultConfigurations) {\n            // Clone the configuration to make sure that the properties will not be shared\n            // between editors and make the watchdog feature work correctly.\n            this.define(cloneConfig(defaultConfigurations));\n        }\n        // Set initial configuration.\n        if (configurations) {\n            this._setObjectToTarget(this._config, configurations);\n        }\n    }\n    set(name, value) {\n        this._setToTarget(this._config, name, value);\n    }\n    define(name, value) {\n        const isDefine = true;\n        this._setToTarget(this._config, name, value, isDefine);\n    }\n    /**\n\t * Gets the value for a configuration entry.\n\t *\n\t * ```ts\n\t * config.get( 'name' );\n\t * ```\n\t *\n\t * Deep configurations can be retrieved by separating each part with a dot.\n\t *\n\t * ```ts\n\t * config.get( 'toolbar.collapsed' );\n\t * ```\n\t *\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @returns The configuration value or `undefined` if the configuration entry was not found.\n\t */ get(name) {\n        return this._getFromSource(this._config, name);\n    }\n    /**\n\t * Iterates over all top level configuration names.\n\t */ *names() {\n        for (const name of Object.keys(this._config)){\n            yield name;\n        }\n    }\n    /**\n\t * Saves passed configuration to the specified target (nested object).\n\t *\n\t * @param target Nested config object.\n\t * @param name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param value The configuration value. Used if a name is passed.\n\t * @param isDefine Define if passed configuration should overwrite existing one.\n\t */ _setToTarget(target, name, value, isDefine = false) {\n        // In case of an object, iterate through it and call `_setToTarget` again for each property.\n        if (isPlainObject(name)) {\n            this._setObjectToTarget(target, name, isDefine);\n            return;\n        }\n        // The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n        const parts = name.split('.');\n        // Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n        name = parts.pop();\n        // Iterate over parts to check if currently stored configuration has proper structure.\n        for (const part of parts){\n            // If there is no object for specified part then create one.\n            if (!isPlainObject(target[part])) {\n                target[part] = Object.create(null);\n            }\n            // Nested object becomes a target.\n            target = target[part];\n        }\n        // In case of value is an object.\n        if (isPlainObject(value)) {\n            // We take care of proper config structure.\n            if (!isPlainObject(target[name])) {\n                target[name] = Object.create(null);\n            }\n            target = target[name];\n            // And iterate through this object calling `_setToTarget` again for each property.\n            this._setObjectToTarget(target, value, isDefine);\n            return;\n        }\n        // Do nothing if we are defining configuration for non empty name.\n        if (isDefine && typeof target[name] != 'undefined') {\n            return;\n        }\n        target[name] = value;\n    }\n    /**\n\t * Get specified configuration from specified source (nested object).\n\t *\n\t * @param source level of nested object.\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @returns The configuration value or `undefined` if the configuration entry was not found.\n\t */ _getFromSource(source, name) {\n        // The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n        const parts = name.split('.');\n        // Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n        name = parts.pop();\n        // Iterate over parts to check if currently stored configuration has proper structure.\n        for (const part of parts){\n            if (!isPlainObject(source[part])) {\n                source = null;\n                break;\n            }\n            // Nested object becomes a source.\n            source = source[part];\n        }\n        // Always returns undefined for non existing configuration.\n        return source ? cloneConfig(source[name]) : undefined;\n    }\n    /**\n\t * Iterates through passed object and calls {@link #_setToTarget} method with object key and value for each property.\n\t *\n\t * @param target Nested config object.\n\t * @param configuration Configuration data set\n\t * @param isDefine Defines if passed configuration is default configuration or not.\n\t */ _setObjectToTarget(target, configuration, isDefine) {\n        Object.keys(configuration).forEach((key)=>{\n            this._setToTarget(target, key, configuration[key], isDefine);\n        });\n    }\n}\n/**\n * Clones configuration object or value.\n */ function cloneConfig(source) {\n    return cloneDeepWith(source, leaveItemReferences);\n}\n/**\n * A customized function for cloneDeepWith.\n * In case if it's a DOM Element it will leave references to DOM Elements instead of cloning them.\n * If it's a function it will leave reference to actuall function.\n */ function leaveItemReferences(value) {\n    return isElement$1(value) || typeof value === 'function' ? value : undefined;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/isnode\n */ /**\n * Checks if the object is a native DOM Node.\n */ function isNode(obj) {\n    if (obj) {\n        if (obj.defaultView) {\n            return obj instanceof obj.defaultView.Document;\n        } else if (obj.ownerDocument && obj.ownerDocument.defaultView) {\n            return obj instanceof obj.ownerDocument.defaultView.Node;\n        }\n    }\n    return false;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/iswindow\n */ /**\n * Checks if the object is a native DOM Window.\n */ function isWindow(obj) {\n    const stringifiedObject = Object.prototype.toString.apply(obj);\n    // Returns `true` for the `window` object in browser environments.\n    if (stringifiedObject == '[object Window]') {\n        return true;\n    }\n    // Returns `true` for the `window` object in the Electron environment.\n    if (stringifiedObject == '[object global]') {\n        return true;\n    }\n    return false;\n}\n\nconst defaultEmitterClass = /* #__PURE__ */ DomEmitterMixin(/* #__PURE__ */ EmitterMixin());\nfunction DomEmitterMixin(base) {\n    if (!base) {\n        return defaultEmitterClass;\n    }\n    class Mixin extends base {\n        listenTo(emitter, event, callback, options = {}) {\n            // Check if emitter is an instance of DOM Node. If so, use corresponding ProxyEmitter (or create one if not existing).\n            if (isNode(emitter) || isWindow(emitter) || emitter instanceof globalVar.window.EventTarget) {\n                const proxyOptions = {\n                    capture: !!options.useCapture,\n                    passive: !!options.usePassive\n                };\n                const proxyEmitter = this._getProxyEmitter(emitter, proxyOptions) || new ProxyEmitter(emitter, proxyOptions);\n                this.listenTo(proxyEmitter, event, callback, options);\n            } else {\n                // Execute parent class method with Emitter (or ProxyEmitter) instance.\n                super.listenTo(emitter, event, callback, options);\n            }\n        }\n        stopListening(emitter, event, callback) {\n            // Check if the emitter is an instance of DOM Node. If so, forward the call to the corresponding ProxyEmitters.\n            if (isNode(emitter) || isWindow(emitter) || emitter instanceof globalVar.window.EventTarget) {\n                const proxyEmitters = this._getAllProxyEmitters(emitter);\n                for (const proxy of proxyEmitters){\n                    this.stopListening(proxy, event, callback);\n                }\n            } else {\n                // Execute parent class method with Emitter (or ProxyEmitter) instance.\n                super.stopListening(emitter, event, callback);\n            }\n        }\n        /**\n\t\t * Retrieves ProxyEmitter instance for given DOM Node residing in this Host and given options.\n\t\t *\n\t\t * @param node DOM Node of the ProxyEmitter.\n\t\t * @param options Additional options.\n\t\t * @param options.useCapture Indicates that events of this type will be dispatched to the registered\n\t\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t\t * @param options.usePassive Indicates that the function specified by listener will never call preventDefault()\n\t\t * and prevents blocking browser's main thread by this event handler.\n\t\t * @returns ProxyEmitter instance bound to the DOM Node.\n\t\t */ _getProxyEmitter(node, options) {\n            return _getEmitterListenedTo(this, getProxyEmitterId(node, options));\n        }\n        /**\n\t\t * Retrieves all the ProxyEmitter instances for given DOM Node residing in this Host.\n\t\t *\n\t\t * @param node DOM Node of the ProxyEmitter.\n\t\t */ _getAllProxyEmitters(node) {\n            return [\n                {\n                    capture: false,\n                    passive: false\n                },\n                {\n                    capture: false,\n                    passive: true\n                },\n                {\n                    capture: true,\n                    passive: false\n                },\n                {\n                    capture: true,\n                    passive: true\n                }\n            ].map((options)=>this._getProxyEmitter(node, options)).filter((proxy)=>!!proxy);\n        }\n    }\n    return Mixin;\n}\n/**\n * Creates a ProxyEmitter instance. Such an instance is a bridge between a DOM Node firing events\n * and any Host listening to them. It is backwards compatible with {@link module:utils/emittermixin~Emitter#on}.\n * There is a separate instance for each combination of modes (useCapture & usePassive). The mode is concatenated with\n * UID stored in HTMLElement to give each instance unique identifier.\n *\n *                                  listenTo( click, ... )\n *                    +-----------------------------------------+\n *                    |              stopListening( ... )       |\n *     +----------------------------+                           |             addEventListener( click, ... )\n *     | Host                       |                           |   +---------------------------------------------+\n *     +----------------------------+                           |   |       removeEventListener( click, ... )     |\n *     | _listeningTo: {            |                +----------v-------------+                                   |\n *     |   UID+mode: {              |                | ProxyEmitter           |                                   |\n *     |     emitter: ProxyEmitter, |                +------------------------+                      +------------v----------+\n *     |     callbacks: {           |                | events: {              |                      | Node (HTMLElement)    |\n *     |       click: [ callbacks ] |                |   click: [ callbacks ] |                      +-----------------------+\n *     |     }                      |                | },                     |                      | data-ck-expando: UID  |\n *     |   }                        |                | _domNode: Node,        |                      +-----------------------+\n *     | }                          |                | _domListeners: {},     |                                   |\n *     | +------------------------+ |                | _emitterId: UID+mode   |                                   |\n *     | | DomEmitterMixin        | |                +--------------^---------+                                   |\n *     | +------------------------+ |                           |   |                                             |\n *     +--------------^-------------+                           |   +---------------------------------------------+\n *                    |                                         |                  click (DOM Event)\n *                    +-----------------------------------------+\n *                                fire( click, DOM Event )\n */ class ProxyEmitter extends /* #__PURE__ */ EmitterMixin() {\n    _domNode;\n    _options;\n    /**\n\t * @param node DOM Node that fires events.\n\t * @param options Additional options.\n\t * @param options.useCapture Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param options.usePassive Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */ constructor(node, options){\n        super();\n        // Set emitter ID to match DOM Node \"expando\" property.\n        _setEmitterId(this, getProxyEmitterId(node, options));\n        // Remember the DOM Node this ProxyEmitter is bound to.\n        this._domNode = node;\n        // And given options.\n        this._options = options;\n    }\n    /**\n\t * Collection of native DOM listeners.\n\t */ _domListeners;\n    /**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * It attaches a native DOM listener to the DOM Node. When fired,\n\t * a corresponding Emitter event will also fire with DOM Event object as an argument.\n\t *\n\t * **Note**: This is automatically called by the\n\t * {@link module:utils/emittermixin~Emitter#listenTo `Emitter#listenTo()`}.\n\t *\n\t * @param event The name of the event.\n\t */ attach(event) {\n        // If the DOM Listener for given event already exist it is pointless\n        // to attach another one.\n        if (this._domListeners && this._domListeners[event]) {\n            return;\n        }\n        const domListener = this._createDomListener(event);\n        // Attach the native DOM listener to DOM Node.\n        this._domNode.addEventListener(event, domListener, this._options);\n        if (!this._domListeners) {\n            this._domListeners = {};\n        }\n        // Store the native DOM listener in this ProxyEmitter. It will be helpful\n        // when stopping listening to the event.\n        this._domListeners[event] = domListener;\n    }\n    /**\n\t * Stops executing the callback on the given event.\n\t *\n\t * **Note**: This is automatically called by the\n\t * {@link module:utils/emittermixin~Emitter#stopListening `Emitter#stopListening()`}.\n\t *\n\t * @param event The name of the event.\n\t */ detach(event) {\n        let events;\n        // Remove native DOM listeners which are orphans. If no callbacks\n        // are awaiting given event, detach native DOM listener from DOM Node.\n        // See: {@link attach}.\n        if (this._domListeners[event] && (!(events = this._events[event]) || !events.callbacks.length)) {\n            this._domListeners[event].removeListener();\n        }\n    }\n    /**\n\t * Adds callback to emitter for given event.\n\t *\n\t * @internal\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */ _addEventListener(event, callback, options) {\n        this.attach(event);\n        EmitterMixin().prototype._addEventListener.call(this, event, callback, options);\n    }\n    /**\n\t * Removes callback from emitter for given event.\n\t *\n\t * @internal\n\t * @param event The name of the event.\n\t * @param callback The function to stop being called.\n\t */ _removeEventListener(event, callback) {\n        EmitterMixin().prototype._removeEventListener.call(this, event, callback);\n        this.detach(event);\n    }\n    /**\n\t * Creates a native DOM listener callback. When the native DOM event\n\t * is fired it will fire corresponding event on this ProxyEmitter.\n\t * Note: A native DOM Event is passed as an argument.\n\t *\n\t * @param event The name of the event.\n\t * @returns The DOM listener callback.\n\t */ _createDomListener(event) {\n        const domListener = (domEvt)=>{\n            this.fire(event, domEvt);\n        };\n        // Supply the DOM listener callback with a function that will help\n        // detach it from the DOM Node, when it is no longer necessary.\n        // See: {@link detach}.\n        domListener.removeListener = ()=>{\n            this._domNode.removeEventListener(event, domListener, this._options);\n            delete this._domListeners[event];\n        };\n        return domListener;\n    }\n}\n/**\n * Gets an unique DOM Node identifier. The identifier will be set if not defined.\n *\n * @returns UID for given DOM Node.\n */ function getNodeUID(node) {\n    return node['data-ck-expando'] || (node['data-ck-expando'] = uid());\n}\n/**\n * Gets id of the ProxyEmitter for the given node.\n */ function getProxyEmitterId(node, options) {\n    let id = getNodeUID(node);\n    for (const option of Object.keys(options).sort()){\n        if (options[option]) {\n            id += '-' + option;\n        }\n    }\n    return id;\n}\n\n/**\n * Returns the closest scrollable ancestor of a DOM element.\n *\n * @param domElement DOM element.\n * @returns First ancestor of `domElement` that is scrollable or null if such ancestor doesn't exist.\n */ function findClosestScrollableAncestor(domElement) {\n    let element = domElement.parentElement;\n    if (!element) {\n        return null;\n    }\n    while(element.tagName != 'BODY'){\n        const overflow = element.style.overflowY || globalVar.window.getComputedStyle(element).overflowY;\n        if (overflow === 'auto' || overflow === 'scroll') {\n            break;\n        }\n        element = element.parentElement;\n        if (!element) {\n            return null;\n        }\n    }\n    return element;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/getancestors\n */ /**\n * Returns all ancestors of given DOM node, starting from the top-most (root). Includes the given node itself. If the\n * node is a part of `DocumentFragment` that `DocumentFragment` will be returned. In contrary, if the node is\n * appended to a `Document`, that `Document` will not be returned (algorithms operating on DOM tree care for `Document#documentElement`\n * at most, which will be returned).\n *\n * @param node DOM node.\n * @returns Array of given `node` parents.\n */ function getAncestors(node) {\n    const nodes = [];\n    let currentNode = node;\n    // We are interested in `Node`s `DocumentFragment`s only.\n    while(currentNode && currentNode.nodeType != Node.DOCUMENT_NODE){\n        nodes.unshift(currentNode);\n        currentNode = currentNode.parentNode;\n    }\n    return nodes;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/getdatafromelement\n */ /**\n * Gets data from a given source element.\n *\n * @param el The element from which the data will be retrieved.\n * @returns The data string.\n */ function getDataFromElement(el) {\n    if (el instanceof HTMLTextAreaElement) {\n        return el.value;\n    }\n    return el.innerHTML;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/getborderwidths\n */ /**\n * Returns an object containing CSS border widths of a specified HTML element.\n *\n * @param element An element which has CSS borders.\n * @returns An object containing `top`, `left`, `right` and `bottom` properties\n * with numerical values of the `border-[top,left,right,bottom]-width` CSS styles.\n */ function getBorderWidths(element) {\n    // Call getComputedStyle on the window the element document belongs to.\n    const style = element.ownerDocument.defaultView.getComputedStyle(element);\n    return {\n        top: parseInt(style.borderTopWidth, 10),\n        right: parseInt(style.borderRightWidth, 10),\n        bottom: parseInt(style.borderBottomWidth, 10),\n        left: parseInt(style.borderLeftWidth, 10)\n    };\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/getrangefrommouseevent\n */ /**\n * Returns a DOM range from a given point specified by a mouse event.\n *\n * @param domEvent The mouse event.\n * @returns The DOM range.\n */ function getRangeFromMouseEvent(domEvent) {\n    if (!domEvent.target) {\n        return null;\n    }\n    const domDoc = domEvent.target.ownerDocument;\n    const x = domEvent.clientX;\n    const y = domEvent.clientY;\n    let domRange = null;\n    // Webkit & Blink.\n    if (domDoc.caretRangeFromPoint && domDoc.caretRangeFromPoint(x, y)) {\n        domRange = domDoc.caretRangeFromPoint(x, y);\n    } else if (domEvent.rangeParent) {\n        domRange = domDoc.createRange();\n        domRange.setStart(domEvent.rangeParent, domEvent.rangeOffset);\n        domRange.collapse(true);\n    }\n    return domRange;\n}\n\n/**\n * Searches and returns the lowest common ancestor of two given nodes.\n *\n * @param nodeA First node.\n * @param nodeB Second node.\n * @returns Lowest common ancestor of both nodes or `null` if nodes do not have a common ancestor.\n */ function getCommonAncestor(nodeA, nodeB) {\n    const ancestorsA = getAncestors(nodeA);\n    const ancestorsB = getAncestors(nodeB);\n    let i = 0;\n    // It does not matter which array is shorter.\n    while(ancestorsA[i] == ancestorsB[i] && ancestorsA[i]){\n        i++;\n    }\n    return i === 0 ? null : ancestorsA[i - 1];\n}\n\n/**\n * For a given element, returns the nearest ancestor element which CSS position is not \"static\".\n *\n * @param element The native DOM element to be checked.\n */ function getPositionedAncestor(element) {\n    if (!element || !element.parentNode) {\n        return null;\n    }\n    if (element.offsetParent === globalVar.document.body) {\n        return null;\n    }\n    return element.offsetParent;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/istext\n */ /**\n * Checks if the object is a native DOM Text node.\n */ function isText(obj) {\n    return Object.prototype.toString.call(obj) == '[object Text]';\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/isrange\n */ /**\n * Checks if the object is a native DOM Range.\n */ function isRange(obj) {\n    return Object.prototype.toString.apply(obj) == '[object Range]';\n}\n\nconst rectProperties = [\n    'top',\n    'right',\n    'bottom',\n    'left',\n    'width',\n    'height'\n];\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */ class Rect {\n    /**\n\t * The \"top\" value of the rect.\n\t *\n\t * @readonly\n\t */ top;\n    /**\n\t * The \"right\" value of the rect.\n\t *\n\t * @readonly\n\t */ right;\n    /**\n\t * The \"bottom\" value of the rect.\n\t *\n\t * @readonly\n\t */ bottom;\n    /**\n\t * The \"left\" value of the rect.\n\t *\n\t * @readonly\n\t */ left;\n    /**\n\t * The \"width\" value of the rect.\n\t *\n\t * @readonly\n\t */ width;\n    /**\n\t * The \"height\" value of the rect.\n\t *\n\t * @readonly\n\t */ height;\n    /**\n\t * The object this rect is for.\n\t *\n\t * @readonly\n\t */ _source;\n    /**\n\t * Creates an instance of rect.\n\t *\n\t * ```ts\n\t * // Rect of an HTMLElement.\n\t * const rectA = new Rect( document.body );\n\t *\n\t * // Rect of a DOM Range.\n\t * const rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t * // Rect of a window (web browser viewport).\n\t * const rectC = new Rect( window );\n\t *\n\t * // Rect out of an object.\n\t * const rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t * // Rect out of another Rect instance.\n\t * const rectE = new Rect( rectD );\n\t *\n\t * // Rect out of a ClientRect.\n\t * const rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t * ```\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param source A source object to create the rect.\n\t */ constructor(source){\n        const isSourceRange = isRange(source);\n        Object.defineProperty(this, '_source', {\n            // If the source is a Rect instance, copy it's #_source.\n            value: source._source || source,\n            writable: true,\n            enumerable: false\n        });\n        if (isDomElement(source) || isSourceRange) {\n            // The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods. If the source\n            // of a rect in an HTML element or a DOM range but it does not belong to any rendered DOM tree, these methods\n            // will fail to obtain the geometry and the rect instance makes little sense to the features using it.\n            // To get rid of this warning make sure the source passed to the constructor is a descendant of `window.document.body`.\n            // @if CK_DEBUG // const sourceNode = isSourceRange ? source.startContainer : source;\n            // @if CK_DEBUG // if ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n            // @if CK_DEBUG // \tconsole.warn(\n            // @if CK_DEBUG // \t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n            // @if CK_DEBUG // \t\t{ source } );\n            // @if CK_DEBUG // }\n            if (isSourceRange) {\n                const rangeRects = Rect.getDomRangeRects(source);\n                copyRectProperties(this, Rect.getBoundingRect(rangeRects));\n            } else {\n                copyRectProperties(this, source.getBoundingClientRect());\n            }\n        } else if (isWindow(source)) {\n            const { innerWidth, innerHeight } = source;\n            copyRectProperties(this, {\n                top: 0,\n                right: innerWidth,\n                bottom: innerHeight,\n                left: 0,\n                width: innerWidth,\n                height: innerHeight\n            });\n        } else {\n            copyRectProperties(this, source);\n        }\n    }\n    /**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns A cloned rect.\n\t */ clone() {\n        return new Rect(this);\n    }\n    /**\n\t * Moves the rect so that its upper–left corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param x Desired horizontal location.\n\t * @param y Desired vertical location.\n\t * @returns A rect which has been moved.\n\t */ moveTo(x, y) {\n        this.top = y;\n        this.right = x + this.width;\n        this.bottom = y + this.height;\n        this.left = x;\n        return this;\n    }\n    /**\n\t * Moves the rect in–place by a dedicated offset.\n\t *\n\t * @param x A horizontal offset.\n\t * @param y A vertical offset\n\t * @returns A rect which has been moved.\n\t */ moveBy(x, y) {\n        this.top += y;\n        this.right += x;\n        this.left += x;\n        this.bottom += y;\n        return this;\n    }\n    /**\n\t * Returns a new rect a a result of intersection with another rect.\n\t */ getIntersection(anotherRect) {\n        const rect = {\n            top: Math.max(this.top, anotherRect.top),\n            right: Math.min(this.right, anotherRect.right),\n            bottom: Math.min(this.bottom, anotherRect.bottom),\n            left: Math.max(this.left, anotherRect.left),\n            width: 0,\n            height: 0\n        };\n        rect.width = rect.right - rect.left;\n        rect.height = rect.bottom - rect.top;\n        if (rect.width < 0 || rect.height < 0) {\n            return null;\n        } else {\n            const newRect = new Rect(rect);\n            newRect._source = this._source;\n            return newRect;\n        }\n    }\n    /**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @returns Area of intersection.\n\t */ getIntersectionArea(anotherRect) {\n        const rect = this.getIntersection(anotherRect);\n        if (rect) {\n            return rect.getArea();\n        } else {\n            return 0;\n        }\n    }\n    /**\n\t * Returns the area of the rect.\n\t */ getArea() {\n        return this.width * this.height;\n    }\n    /**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user and is relative to the,`body`,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * **Note**: This method does not consider the boundaries of the viewport (window).\n\t * To get a rect cropped by all ancestors and the viewport, use an intersection such as:\n\t *\n\t * ```ts\n\t * const visibleInViewportRect = new Rect( window ).getIntersection( new Rect( source ).getVisible() );\n\t * ```\n\t *\n\t * @returns A visible rect instance or `null`, if there's none.\n\t */ getVisible() {\n        const source = this._source;\n        let visibleRect = this.clone();\n        // There's no ancestor to crop <body> with the overflow.\n        if (isBody(source)) {\n            return visibleRect;\n        }\n        let child = source;\n        let parent = source.parentNode || source.commonAncestorContainer;\n        let absolutelyPositionedChildElement;\n        // Check the ancestors all the way up to the <body>.\n        while(parent && !isBody(parent)){\n            const isParentOverflowVisible = getElementOverflow(parent) === 'visible';\n            if (child instanceof HTMLElement && getElementPosition(child) === 'absolute') {\n                absolutelyPositionedChildElement = child;\n            }\n            const parentElementPosition = getElementPosition(parent);\n            // The child will be cropped only if it has `position: absolute` and the parent has `position: relative` + some overflow.\n            // Otherwise there's no chance of visual clipping and the parent can be skipped\n            // https://github.com/ckeditor/ckeditor5/issues/14107.\n            //\n            // condition: isParentOverflowVisible\n            // \t\t+---------------------------+\n            //\t\t| #parent\t\t\t\t\t|\n            //\t\t| (overflow: visible)\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t|\t\t\t\t| child\t\t\t\t\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t+---------------------------+\n            //\n            // condition: absolutelyPositionedChildElement && parentElementPosition === 'relative' && isParentOverflowVisible\n            // \t\t+---------------------------+\n            //\t\t| parent\t\t\t\t\t|\n            //\t\t| (position: relative;)\t\t|\n            //\t\t| (overflow: visible;)\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t|\t\t\t\t| child  \t\t\t\t\t|\n            //\t\t|\t\t\t\t| (position: absolute;)\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t+---------------------------+\n            //\n            // condition: absolutelyPositionedChildElement && parentElementPosition !== 'relative'\n            // \t\t+---------------------------+\n            //\t\t| parent\t\t\t\t\t|\n            //\t\t| (position: static;)\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t|\t\t\t\t| child  \t\t\t\t\t|\n            //\t\t|\t\t\t\t| (position: absolute;)\t\t|\n            //\t\t|\t\t\t\t+-----------+---------------+\n            //\t\t+---------------------------+\n            if (isParentOverflowVisible || absolutelyPositionedChildElement && (parentElementPosition === 'relative' && isParentOverflowVisible || parentElementPosition !== 'relative')) {\n                child = parent;\n                parent = parent.parentNode;\n                continue;\n            }\n            const parentRect = new Rect(parent);\n            const intersectionRect = visibleRect.getIntersection(parentRect);\n            if (intersectionRect) {\n                if (intersectionRect.getArea() < visibleRect.getArea()) {\n                    // Reduce the visible rect to the intersection.\n                    visibleRect = intersectionRect;\n                }\n            } else {\n                // There's no intersection, the rect is completely invisible.\n                return null;\n            }\n            child = parent;\n            parent = parent.parentNode;\n        }\n        return visibleRect;\n    }\n    /**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param anotherRect A rect instance to compare with.\n\t * @returns `true` when Rects are equal. `false` otherwise.\n\t */ isEqual(anotherRect) {\n        for (const prop of rectProperties){\n            if (this[prop] !== anotherRect[prop]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param anotherRect\n\t * @returns `true` if contains, `false` otherwise.\n\t */ contains(anotherRect) {\n        const intersectRect = this.getIntersection(anotherRect);\n        return !!(intersectRect && intersectRect.isEqual(anotherRect));\n    }\n    /**\n\t * Recalculates screen coordinates to coordinates relative to the positioned ancestor offset.\n\t */ toAbsoluteRect() {\n        const { scrollX, scrollY } = globalVar.window;\n        const absoluteRect = this.clone().moveBy(scrollX, scrollY);\n        if (isDomElement(absoluteRect._source)) {\n            const positionedAncestor = getPositionedAncestor(absoluteRect._source);\n            if (positionedAncestor) {\n                shiftRectToCompensatePositionedAncestor(absoluteRect, positionedAncestor);\n            }\n        }\n        return absoluteRect;\n    }\n    /**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns A rect which has been updated.\n\t */ excludeScrollbarsAndBorders() {\n        const source = this._source;\n        let scrollBarWidth, scrollBarHeight, direction;\n        if (isWindow(source)) {\n            scrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n            scrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n            direction = source.getComputedStyle(source.document.documentElement).direction;\n        } else {\n            const borderWidths = getBorderWidths(source);\n            scrollBarWidth = source.offsetWidth - source.clientWidth - borderWidths.left - borderWidths.right;\n            scrollBarHeight = source.offsetHeight - source.clientHeight - borderWidths.top - borderWidths.bottom;\n            direction = source.ownerDocument.defaultView.getComputedStyle(source).direction;\n            this.left += borderWidths.left;\n            this.top += borderWidths.top;\n            this.right -= borderWidths.right;\n            this.bottom -= borderWidths.bottom;\n            this.width = this.right - this.left;\n            this.height = this.bottom - this.top;\n        }\n        this.width -= scrollBarWidth;\n        if (direction === 'ltr') {\n            this.right -= scrollBarWidth;\n        } else {\n            this.left += scrollBarWidth;\n        }\n        this.height -= scrollBarHeight;\n        this.bottom -= scrollBarHeight;\n        return this;\n    }\n    /**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param range A native DOM range.\n\t * @returns DOM Range rects.\n\t */ static getDomRangeRects(range) {\n        const rects = [];\n        // Safari does not iterate over ClientRectList using for...of loop.\n        const clientRects = Array.from(range.getClientRects());\n        if (clientRects.length) {\n            for (const rect of clientRects){\n                rects.push(new Rect(rect));\n            }\n        } else {\n            let startContainer = range.startContainer;\n            if (isText(startContainer)) {\n                startContainer = startContainer.parentNode;\n            }\n            const rect = new Rect(startContainer.getBoundingClientRect());\n            rect.right = rect.left;\n            rect.width = 0;\n            rects.push(rect);\n        }\n        return rects;\n    }\n    /**\n\t * Returns a bounding rectangle that contains all the given `rects`.\n\t *\n\t * @param rects A list of rectangles that should be contained in the result rectangle.\n\t * @returns Bounding rectangle or `null` if no `rects` were given.\n\t */ static getBoundingRect(rects) {\n        const boundingRectData = {\n            left: Number.POSITIVE_INFINITY,\n            top: Number.POSITIVE_INFINITY,\n            right: Number.NEGATIVE_INFINITY,\n            bottom: Number.NEGATIVE_INFINITY,\n            width: 0,\n            height: 0\n        };\n        let rectangleCount = 0;\n        for (const rect of rects){\n            rectangleCount++;\n            boundingRectData.left = Math.min(boundingRectData.left, rect.left);\n            boundingRectData.top = Math.min(boundingRectData.top, rect.top);\n            boundingRectData.right = Math.max(boundingRectData.right, rect.right);\n            boundingRectData.bottom = Math.max(boundingRectData.bottom, rect.bottom);\n        }\n        if (rectangleCount == 0) {\n            return null;\n        }\n        boundingRectData.width = boundingRectData.right - boundingRectData.left;\n        boundingRectData.height = boundingRectData.bottom - boundingRectData.top;\n        return new Rect(boundingRectData);\n    }\n}\n/**\n * Acquires all the rect properties from the passed source.\n */ function copyRectProperties(rect, source) {\n    for (const p of rectProperties){\n        rect[p] = source[p];\n    }\n}\n/**\n * Checks if provided object is a <body> HTML element.\n */ function isBody(value) {\n    if (!isDomElement(value)) {\n        return false;\n    }\n    return value === value.ownerDocument.body;\n}\n/**\n * Checks if provided object \"looks like\" a DOM Element and has API required by `Rect` class.\n */ function isDomElement(value) {\n    // Note: earlier we used `isElement()` from lodash library, however that function is less performant because\n    // it makes complicated checks to make sure that given value is a DOM element.\n    return value !== null && typeof value === 'object' && value.nodeType === 1 && typeof value.getBoundingClientRect === 'function';\n}\n/**\n * Returns the value of the `position` style of an `HTMLElement`.\n */ function getElementPosition(element) {\n    return element instanceof HTMLElement ? element.ownerDocument.defaultView.getComputedStyle(element).position : 'static';\n}\n/**\n * Returns the value of the `overflow` style of an `HTMLElement` or a `Range`.\n */ function getElementOverflow(element) {\n    return element instanceof HTMLElement ? element.ownerDocument.defaultView.getComputedStyle(element).overflow : 'visible';\n}\n/**\n * For a given absolute Rect coordinates object and a positioned element ancestor, it updates its\n * coordinates that make up for the position and the scroll of the ancestor.\n *\n * This is necessary because while Rects (and DOMRects) are relative to the browser's viewport, their coordinates\n * are used in real–life to position elements with `position: absolute`, which are scoped by any positioned\n * (and scrollable) ancestors.\n */ function shiftRectToCompensatePositionedAncestor(rect, positionedElementAncestor) {\n    const ancestorPosition = new Rect(positionedElementAncestor);\n    const ancestorBorderWidths = getBorderWidths(positionedElementAncestor);\n    let moveX = 0;\n    let moveY = 0;\n    // (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n    // If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n    // consideration. `Rect` is always relative to the viewport while `position: absolute` works\n    // with respect to that positioned ancestor.\n    moveX -= ancestorPosition.left;\n    moveY -= ancestorPosition.top;\n    // (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n    // If there's some positioned ancestor of the panel, not only its position must be taken into\n    // consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n    // is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n    // must compensate that scrolling.\n    moveX += positionedElementAncestor.scrollLeft;\n    moveY += positionedElementAncestor.scrollTop;\n    // (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n    // If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n    // while `position: absolute` positioning does not consider it.\n    // E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n    // not upper-left corner of its border.\n    moveX -= ancestorBorderWidths.left;\n    moveY -= ancestorBorderWidths.top;\n    rect.moveBy(moveX, moveY);\n}\n\n/**\n * A helper class which instances allow performing custom actions when native DOM elements are resized.\n *\n * ```ts\n * const editableElement = editor.editing.view.getDomRoot();\n *\n * const observer = new ResizeObserver( editableElement, entry => {\n * \tconsole.log( 'The editable element has been resized in DOM.' );\n * \tconsole.log( entry.target ); // -> editableElement\n * \tconsole.log( entry.contentRect.width ); // -> e.g. '423px'\n * } );\n * ```\n *\n * It uses the [native DOM resize observer](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)\n * under the hood.\n */ class ResizeObserver {\n    /**\n\t * The element observed by this observer.\n\t */ _element;\n    /**\n\t * The callback executed each time {@link #_element} is resized.\n\t */ _callback;\n    /**\n\t * The single native observer instance shared across all {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n\t */ static _observerInstance = null;\n    /**\n\t * A mapping of native DOM elements and their callbacks shared across all\n\t * {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n\t */ static _elementCallbacks = null;\n    /**\n\t * Creates an instance of the `ResizeObserver` class.\n\t *\n\t * @param element A DOM element that is to be observed for resizing. Note that\n\t * the element must be visible (i.e. not detached from DOM) for the observer to work.\n\t * @param callback A function called when the observed element was resized. It passes\n\t * the [`ResizeObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserverEntry)\n\t * object with information about the resize event.\n\t */ constructor(element, callback){\n        // **Note**: For the maximum performance, this class ensures only a single instance of the native\n        // observer is used no matter how many instances of this class were created.\n        if (!ResizeObserver._observerInstance) {\n            ResizeObserver._createObserver();\n        }\n        this._element = element;\n        this._callback = callback;\n        ResizeObserver._addElementCallback(element, callback);\n        ResizeObserver._observerInstance.observe(element);\n    }\n    /**\n\t * The element observed by this observer.\n\t */ get element() {\n        return this._element;\n    }\n    /**\n\t * Destroys the observer which disables the `callback` passed to the {@link #constructor}.\n\t */ destroy() {\n        ResizeObserver._deleteElementCallback(this._element, this._callback);\n    }\n    /**\n\t * Registers a new resize callback for the DOM element.\n\t */ static _addElementCallback(element, callback) {\n        if (!ResizeObserver._elementCallbacks) {\n            ResizeObserver._elementCallbacks = new Map();\n        }\n        let callbacks = ResizeObserver._elementCallbacks.get(element);\n        if (!callbacks) {\n            callbacks = new Set();\n            ResizeObserver._elementCallbacks.set(element, callbacks);\n        }\n        callbacks.add(callback);\n    }\n    /**\n\t * Removes a resize callback from the DOM element. If no callbacks are left\n\t * for the element, it removes the element from the native observer.\n\t */ static _deleteElementCallback(element, callback) {\n        const callbacks = ResizeObserver._getElementCallbacks(element);\n        // Remove the element callback. Check if exist first in case someone\n        // called destroy() twice.\n        if (callbacks) {\n            callbacks.delete(callback);\n            // If no callbacks left for the element, also remove the element.\n            if (!callbacks.size) {\n                ResizeObserver._elementCallbacks.delete(element);\n                ResizeObserver._observerInstance.unobserve(element);\n            }\n        }\n        if (ResizeObserver._elementCallbacks && !ResizeObserver._elementCallbacks.size) {\n            ResizeObserver._observerInstance = null;\n            ResizeObserver._elementCallbacks = null;\n        }\n    }\n    /**\n\t * Returns are registered resize callbacks for the DOM element.\n\t */ static _getElementCallbacks(element) {\n        if (!ResizeObserver._elementCallbacks) {\n            return null;\n        }\n        return ResizeObserver._elementCallbacks.get(element);\n    }\n    /**\n\t * Creates the single native observer shared across all `ResizeObserver` instances.\n\t */ static _createObserver() {\n        ResizeObserver._observerInstance = new globalVar.window.ResizeObserver((entries)=>{\n            for (const entry of entries){\n                const callbacks = ResizeObserver._getElementCallbacks(entry.target);\n                if (callbacks) {\n                    for (const callback of callbacks){\n                        callback(entry);\n                    }\n                }\n            }\n        });\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/setdatainelement\n */ /**\n * Sets data in a given element.\n *\n * @param el The element in which the data will be set.\n * @param data The data string.\n */ function setDataInElement(el, data) {\n    if (el instanceof HTMLTextAreaElement) {\n        el.value = data;\n    }\n    el.innerHTML = data;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/tounit\n */ /**\n * Returns a helper function, which adds a desired trailing\n * `unit` to the passed value.\n *\n * @param unit An unit like \"px\" or \"em\".\n */ function toUnit(unit) {\n    return (value)=>value + unit;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/indexof\n */ /**\n * Returns index of the node in the parent element.\n *\n * @param node Node which index is tested.\n * @returns Index of the node in the parent element. Returns 0 if node has no parent.\n */ function indexOf(node) {\n    let index = 0;\n    while(node.previousSibling){\n        node = node.previousSibling;\n        index++;\n    }\n    return index;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/insertat\n */ /**\n * Inserts node to the parent at given index.\n *\n * @param parentElement Parent element.\n * @param index Insertions index.\n * @param nodeToInsert Node to insert.\n */ function insertAt(parentElement, index, nodeToInsert) {\n    parentElement.insertBefore(nodeToInsert, parentElement.childNodes[index] || null);\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/iscomment\n */ /**\n * Checks whether the object is a native DOM Comment node.\n */ function isComment(obj) {\n    return obj && obj.nodeType === Node.COMMENT_NODE;\n}\n\n/**\n * Checks if the given attribute name is valid in terms of HTML.\n *\n * @param name Attribute name.\n */ function isValidAttributeName(name) {\n    try {\n        globalVar.document.createAttribute(name);\n    } catch  {\n        return false;\n    }\n    return true;\n}\n\n/**\n * Checks whether the element is visible to the user in DOM:\n *\n * * connected to the root of the document,\n * * has no `display: none`,\n * * has no ancestors with `display: none`.\n *\n * **Note**: This helper does not check whether the element is hidden by cropping, overflow, etc..\n * To check that, use {@link module:utils/dom/rect~Rect} instead.\n */ function isVisible(element) {\n    if (!element) {\n        return false;\n    }\n    if (isText(element)) {\n        return isVisible(element.parentElement);\n    }\n    if (element.getClientRects) {\n        return !!element.getClientRects().length;\n    }\n    return false;\n}\n\n// @if CK_DEBUG_POSITION // const {\n// @if CK_DEBUG_POSITION // \tdefault: RectDrawer,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesBlack,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesGreen,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesRed\n// @if CK_DEBUG_POSITION // } = require( '@ckeditor/ckeditor5-utils/tests/_utils/rectdrawer' );\n// @if CK_DEBUG_POSITION // const TARGET_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px', outlineStyle: 'dashed', outlineColor: 'blue', outlineOffset: '2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VISIBLE_TARGET_RECT_STYLE = {\n// @if CK_DEBUG_POSITION //\t\t...diagonalStylesBlack,\n// @if CK_DEBUG_POSITION //\t\topacity: '1',\n// @if CK_DEBUG_POSITION //\t\tbackgroundColor: '#00000033',\n// @if CK_DEBUG_POSITION //\t\toutlineWidth: '2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VIEWPORT_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px',\n// @if CK_DEBUG_POSITION // \toutlineOffset: '-2px',\n// @if CK_DEBUG_POSITION // \toutlineStyle: 'solid',\n// @if CK_DEBUG_POSITION // \toutlineColor: 'red'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VISIBLE_LIMITER_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \t...diagonalStylesGreen,\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px',\n// @if CK_DEBUG_POSITION // \toutlineOffset: '-2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const ELEMENT_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px', outlineColor: 'orange', outlineOffset: '-2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const CHOSEN_POSITION_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \topacity: .5, outlineColor: 'magenta', backgroundColor: 'magenta'\n// @if CK_DEBUG_POSITION // };\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n * **Note**: If there are no position coordinates found that meet the requirements (arguments of this helper),\n * `null` is returned.\n *\n * ```ts\n * // The element which is to be positioned.\n * const element = document.body.querySelector( '#toolbar' );\n *\n * // A target to which the element is positioned relatively.\n * const target = document.body.querySelector( '#container' );\n *\n * // Finding the optimal coordinates for the positioning.\n * const { left, top, name } = getOptimalPosition( {\n * \telement: element,\n * \ttarget: target,\n *\n * \t// The algorithm will chose among these positions to meet the requirements such\n * \t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t// in the order of the array.\n * \tpositions: [\n * \t\t//\n * \t \t//\t[ Target ]\n * \t\t//\t+-----------------+\n * \t\t//\t|     Element     |\n * \t\t//\t+-----------------+\n * \t\t//\n * \t\ttargetRect => ( {\n * \t\t\ttop: targetRect.bottom,\n * \t\t\tleft: targetRect.left,\n * \t\t\tname: 'mySouthEastPosition'\n * \t\t} ),\n *\n * \t\t//\n * \t\t//\t+-----------------+\n * \t\t//\t|     Element     |\n * \t\t//\t+-----------------+\n * \t\t//\t[ Target ]\n * \t\t//\n * \t\t( targetRect, elementRect ) => ( {\n * \t\t\ttop: targetRect.top - elementRect.height,\n * \t\t\tleft: targetRect.left,\n * \t\t\tname: 'myNorthEastPosition'\n * \t\t} )\n * \t],\n *\n * \t// Find a position such guarantees the element remains within visible boundaries of <body>.\n * \tlimiter: document.body,\n *\n * \t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n * \tfitInViewport: true\n * } );\n *\n * // The best position which fits into document.body and the viewport. May be useful\n * // to set proper class on the `element`.\n * console.log( name ); // -> \"myNorthEastPosition\"\n *\n * // Using the absolute coordinates which has been found to position the element\n * // as in the diagram depicting the \"myNorthEastPosition\" position.\n * element.style.top = top;\n * element.style.left = left;\n * ```\n *\n * @param options The input data and configuration of the helper.\n */ function getOptimalPosition({ element, target, positions, limiter, fitInViewport, viewportOffsetConfig }) {\n    // If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n    // https://github.com/ckeditor/ckeditor5-utils/issues/157\n    if (isFunction(target)) {\n        target = target();\n    }\n    // If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n    // https://github.com/ckeditor/ckeditor5-ui/issues/260\n    if (isFunction(limiter)) {\n        limiter = limiter();\n    }\n    const positionedElementAncestor = getPositionedAncestor(element);\n    const constrainedViewportRect = getConstrainedViewportRect(viewportOffsetConfig);\n    const elementRect = new Rect(element);\n    const visibleTargetRect = getVisibleViewportIntersectionRect(target, constrainedViewportRect);\n    let bestPosition;\n    // @if CK_DEBUG_POSITION // const targetRect = new Rect( target );\n    // @if CK_DEBUG_POSITION // RectDrawer.clear();\n    // @if CK_DEBUG_POSITION // RectDrawer.draw( targetRect, TARGET_RECT_STYLE, 'Target' );\n    // @if CK_DEBUG_POSITION // if ( constrainedViewportRect ) {\n    // @if CK_DEBUG_POSITION //\t\tRectDrawer.draw( constrainedViewportRect, VIEWPORT_RECT_STYLE, 'Viewport' );\n    // @if CK_DEBUG_POSITION // }\n    // If the target got cropped by ancestors or went off the screen, positioning does not make any sense.\n    if (!visibleTargetRect || !constrainedViewportRect.getIntersection(visibleTargetRect)) {\n        return null;\n    }\n    // @if CK_DEBUG_POSITION //\tRectDrawer.draw( visibleTargetRect, VISIBLE_TARGET_RECT_STYLE, 'VisTgt' );\n    const positionOptions = {\n        targetRect: visibleTargetRect,\n        elementRect,\n        positionedElementAncestor,\n        viewportRect: constrainedViewportRect\n    };\n    // If there are no limits, just grab the very first position and be done with that drama.\n    if (!limiter && !fitInViewport) {\n        bestPosition = new PositionObject(positions[0], positionOptions);\n    } else {\n        if (limiter) {\n            const visibleLimiterRect = getVisibleViewportIntersectionRect(limiter, constrainedViewportRect);\n            if (visibleLimiterRect) {\n                positionOptions.limiterRect = visibleLimiterRect;\n            // @if CK_DEBUG_POSITION // RectDrawer.draw( visibleLimiterRect, VISIBLE_LIMITER_RECT_STYLE, 'VisLim' );\n            }\n        }\n        // If there's no best position found, i.e. when all intersections have no area because\n        // rects have no width or height, then just return `null`\n        bestPosition = getBestPosition(positions, positionOptions);\n    }\n    return bestPosition;\n}\n/**\n * Returns intersection of visible source `Rect` with Viewport `Rect`. In case when source `Rect` is not visible\n * or there is no intersection between source `Rect` and Viewport `Rect`, `null` will be returned.\n */ function getVisibleViewportIntersectionRect(source, viewportRect) {\n    const visibleSourceRect = new Rect(source).getVisible();\n    if (!visibleSourceRect) {\n        return null;\n    }\n    return visibleSourceRect.getIntersection(viewportRect);\n}\n/**\n * Returns a viewport `Rect` shrunk by the viewport offset config from all sides.\n */ function getConstrainedViewportRect(viewportOffsetConfig) {\n    viewportOffsetConfig = Object.assign({\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0\n    }, viewportOffsetConfig);\n    const viewportRect = new Rect(globalVar.window);\n    viewportRect.top += viewportOffsetConfig.top;\n    viewportRect.height -= viewportOffsetConfig.top;\n    viewportRect.bottom -= viewportOffsetConfig.bottom;\n    viewportRect.height -= viewportOffsetConfig.bottom;\n    return viewportRect;\n}\n/**\n * For a given array of positioning functions, returns such that provides the best\n * fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n */ function getBestPosition(positions, options) {\n    const { elementRect } = options;\n    // This is when element is fully visible.\n    const elementRectArea = elementRect.getArea();\n    const positionInstances = positions.map((positioningFunction)=>new PositionObject(positioningFunction, options))// Some positioning functions may return `null` if they don't want to participate.\n    .filter((position)=>!!position.name);\n    let maxFitFactor = 0;\n    let bestPosition = null;\n    for (const position of positionInstances){\n        const { limiterIntersectionArea, viewportIntersectionArea } = position;\n        // If a such position is found that element is fully contained by the limiter then, obviously,\n        // there will be no better one, so finishing.\n        if (limiterIntersectionArea === elementRectArea) {\n            // @if CK_DEBUG_POSITION //\tRectDrawer.draw( position._rect, CHOSEN_POSITION_RECT_STYLE, [\n            // @if CK_DEBUG_POSITION //\t\tposition.name,\n            // @if CK_DEBUG_POSITION //\t\t'100% fit',\n            // @if CK_DEBUG_POSITION //\t].join( '\\n' ) );\n            return position;\n        }\n        // To maximize both viewport and limiter intersection areas we use distance on _viewportIntersectionArea\n        // and _limiterIntersectionArea plane (without sqrt because we are looking for max value).\n        const fitFactor = viewportIntersectionArea ** 2 + limiterIntersectionArea ** 2;\n        // @if CK_DEBUG_POSITION //\tRectDrawer.draw( position._rect, { opacity: .4 }, [\n        // @if CK_DEBUG_POSITION //\t\tposition.name,\n        // @if CK_DEBUG_POSITION //\t\t'Vi=' +  Math.round( viewportIntersectionArea ),\n        // @if CK_DEBUG_POSITION //\t\t'Li=' + Math.round( limiterIntersectionArea )\n        // @if CK_DEBUG_POSITION //\t].join( '\\n' ) );\n        if (fitFactor > maxFitFactor) {\n            maxFitFactor = fitFactor;\n            bestPosition = position;\n        }\n    }\n    // @if CK_DEBUG_POSITION // if ( bestPosition ) {\n    // @if CK_DEBUG_POSITION // \tRectDrawer.draw( bestPosition._rect, CHOSEN_POSITION_RECT_STYLE );\n    // @if CK_DEBUG_POSITION // }\n    return bestPosition;\n}\n/**\n * A position class which instances are created and used by the {@link module:utils/dom/position~getOptimalPosition} helper.\n *\n * {@link module:utils/dom/position~Position#top} and {@link module:utils/dom/position~Position#left} properties of the position instance\n * translate directly to the `top` and `left` properties in CSS \"`position: absolute` coordinate system\". If set on the positioned element\n * in DOM, they will make it display it in the right place in the viewport.\n */ class PositionObject {\n    name;\n    config;\n    _positioningFunctionCoordinates;\n    _options;\n    _cachedRect;\n    _cachedAbsoluteRect;\n    /**\n\t * Creates an instance of the {@link module:utils/dom/position~PositionObject} class.\n\t *\n\t * @param positioningFunction function The function that defines the expected\n\t * coordinates the positioned element should move to.\n\t * @param options options object.\n\t * @param options.elementRect The positioned element rect.\n\t * @param options.targetRect The target element rect.\n\t * @param options.viewportRect The viewport rect.\n\t * @param options.limiterRect The limiter rect.\n\t * @param options.positionedElementAncestor Nearest element ancestor element which CSS position is not \"static\".\n\t */ constructor(positioningFunction, options){\n        const positioningFunctionOutput = positioningFunction(options.targetRect, options.elementRect, options.viewportRect, options.limiterRect);\n        // Nameless position for a function that didn't participate.\n        if (!positioningFunctionOutput) {\n            return;\n        }\n        const { left, top, name, config } = positioningFunctionOutput;\n        this.name = name;\n        this.config = config;\n        this._positioningFunctionCoordinates = {\n            left,\n            top\n        };\n        this._options = options;\n    }\n    /**\n\t * The left value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */ get left() {\n        return this._absoluteRect.left;\n    }\n    /**\n\t * The top value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */ get top() {\n        return this._absoluteRect.top;\n    }\n    /**\n\t * An intersection area between positioned element and limiter within viewport constraints.\n\t */ get limiterIntersectionArea() {\n        const limiterRect = this._options.limiterRect;\n        if (limiterRect) {\n            return limiterRect.getIntersectionArea(this._rect);\n        }\n        return 0;\n    }\n    /**\n\t * An intersection area between positioned element and viewport.\n\t */ get viewportIntersectionArea() {\n        const viewportRect = this._options.viewportRect;\n        return viewportRect.getIntersectionArea(this._rect);\n    }\n    /**\n\t * An already positioned element rect. A clone of the element rect passed to the constructor\n\t * but placed in the viewport according to the positioning function.\n\t */ get _rect() {\n        if (this._cachedRect) {\n            return this._cachedRect;\n        }\n        this._cachedRect = this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left, this._positioningFunctionCoordinates.top);\n        return this._cachedRect;\n    }\n    /**\n\t * An already absolutely positioned element rect. See ({@link #_rect}).\n\t */ get _absoluteRect() {\n        if (this._cachedAbsoluteRect) {\n            return this._cachedAbsoluteRect;\n        }\n        this._cachedAbsoluteRect = this._rect.toAbsoluteRect();\n        return this._cachedAbsoluteRect;\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/dom/remove\n */ /**\n * Removes given node from parent.\n *\n * @param node Node to remove.\n */ function remove(node) {\n    const parent = node.parentNode;\n    if (parent) {\n        parent.removeChild(node);\n    }\n}\n\n/**\n * Returns the visual viewport offsets to adjust elements with `position: fixed` style.\n */ function getVisualViewportOffset() {\n    const visualViewport = globalVar.window.visualViewport;\n    if (!visualViewport || !(env.isiOS || env.isSafari)) {\n        return {\n            left: 0,\n            top: 0\n        };\n    }\n    const left = Math.max(Math.round(visualViewport.offsetLeft), 0);\n    const top = Math.max(Math.round(visualViewport.offsetTop), 0);\n    return {\n        left,\n        top\n    };\n}\n\n/**\n * Makes any page `HTMLElement` or `Range` (`target`) visible inside the browser viewport.\n * This helper will scroll all `target` ancestors and the web browser viewport to reveal the target to\n * the user. If the `target` is already visible, nothing will happen.\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.target A target, which supposed to become visible to the user.\n * @param options.viewportOffset An offset from the edge of the viewport (in pixels)\n * the `target` will be moved by if the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the viewport and thus making it easier to\n * read or edit by the user.\n * @param options.ancestorOffset An offset from the boundary of scrollable ancestors (if any)\n * the `target` will be moved by if the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the ancestors and thus making it easier to\n * read or edit by the user.\n * @param options.alignToTop When set `true`, the helper will make sure the `target` is scrolled up\n * to the top boundary of the viewport and/or scrollable ancestors if scrolled up. When not set\n * (default), the `target` will be revealed by scrolling as little as possible. This option will\n * not affect `targets` that must be scrolled down because they will appear at the top of the boundary\n * anyway.\n *\n * ```\n *                                             scrollViewportToShowTarget() with            scrollViewportToShowTarget() with\n *          Initial state                        alignToTop unset (default)                        alignToTop = true\n *\n * ┌────────────────────────────────┬─┐       ┌────────────────────────────────┬─┐        ┌────────────────────────────────┬─┐\n * │                                │▲│       │                                │▲│        │   [ Target to be revealed ]    │▲│\n * │                                │ │       │                                │ │        │                                │ │\n * │                                │█│       │                                │ │        │                                │ │\n * │                                │█│       │                                │ │        │                                │ │\n * │                                │ │       │                                │█│        │                                │ │\n * │                                │ │       │                                │█│        │                                │█│\n * │                                │ │       │                                │ │        │                                │█│\n * │                                │▼│       │   [ Target to be revealed ]    │▼│        │                                │▼│\n * └────────────────────────────────┴─┘       └────────────────────────────────┴─┘        └────────────────────────────────┴─┘\n *\n *\n *     [ Target to be revealed ]\n *```\n *\n * @param options.forceScroll When set `true`, the `target` will be aligned to the top of the viewport\n * and scrollable ancestors whether it is already visible or not. This option will only work when `alignToTop`\n * is `true`\n */ function scrollViewportToShowTarget({ target, viewportOffset = 0, ancestorOffset = 0, alignToTop, forceScroll }) {\n    const targetWindow = getWindow(target);\n    let currentWindow = targetWindow;\n    let currentFrame = null;\n    viewportOffset = normalizeViewportOffset(viewportOffset);\n    // Iterate over all windows, starting from target's parent window up to window#top.\n    while(currentWindow){\n        let firstAncestorToScroll;\n        // Let's scroll target's ancestors first to reveal it. Then, once the ancestor scrolls\n        // settled down, the algorithm can eventually scroll the viewport of the current window.\n        //\n        // Note: If the current window is target's **original** window (e.g. the first one),\n        // start scrolling the closest parent of the target. If not, scroll the closest parent\n        // of an iframe that resides in the current window.\n        if (currentWindow == targetWindow) {\n            firstAncestorToScroll = getParentElement(target);\n        } else {\n            firstAncestorToScroll = getParentElement(currentFrame);\n        }\n        // Scroll the target's ancestors first. Once done, scrolling the viewport is easy.\n        scrollAncestorsToShowRect({\n            parent: firstAncestorToScroll,\n            getRect: ()=>{\n                // Note: If the target does not belong to the current window **directly**,\n                // i.e. it resides in an iframe belonging to the window, obtain the target's rect\n                // in the coordinates of the current window. By default, a Rect returns geometry\n                // relative to the current window's viewport. To make it work in a parent window,\n                // it must be shifted.\n                return getRectRelativeToWindow(target, currentWindow);\n            },\n            alignToTop,\n            ancestorOffset,\n            forceScroll\n        });\n        // Obtain the rect of the target after it has been scrolled within its ancestors.\n        // It's time to scroll the viewport.\n        let targetRect = getRectRelativeToWindow(target, currentWindow);\n        // Detect situation where the target is higher than the first scrollable ancestor.\n        // In such case scrolling the viewport to reveal the target might be malfunctioning because\n        // the target `.top` position is lower than the ancestor's `.top` position. If it's large enough it can be negative.\n        // It causes the `scrollWindowToShowRect` to scroll the viewport to the negative top position which is not possible\n        // and leads to the viewport being scrolled to the absolute top of the document. To prevent this, the target's rect\n        // must be shifted to the ancestor's top position. It should not affect the target's visibility because the ancestor\n        // is already scrolled to reveal the target.\n        // See more: https://github.com/ckeditor/ckeditor5/issues/17079\n        const ancestorWindowRelativeRect = getRectRelativeToWindow(firstAncestorToScroll, currentWindow);\n        if (targetRect.height > ancestorWindowRelativeRect.height) {\n            const ancestorTargetIntersection = targetRect.getIntersection(ancestorWindowRelativeRect);\n            if (ancestorTargetIntersection) {\n                targetRect = ancestorTargetIntersection;\n            }\n        }\n        scrollWindowToShowRect({\n            window: currentWindow,\n            rect: targetRect,\n            viewportOffset,\n            alignToTop,\n            forceScroll\n        });\n        if (currentWindow.parent != currentWindow) {\n            // Keep the reference to the <iframe> element the \"previous current window\" was\n            // rendered within. It will be useful to re–calculate the rect of the target\n            // in the parent window's relative geometry. The target's rect must be shifted\n            // by it's iframe's position.\n            currentFrame = currentWindow.frameElement;\n            currentWindow = currentWindow.parent;\n            // If the current window has some parent but frameElement is inaccessible, then they have\n            // different domains/ports and, due to security reasons, accessing and scrolling\n            // the parent window won't be possible.\n            // See https://github.com/ckeditor/ckeditor5/issues/930.\n            if (!currentFrame) {\n                return;\n            }\n        } else {\n            currentWindow = null;\n        }\n    }\n}\n/**\n * Makes any page `HTMLElement` or `Range` (target) visible within its scrollable ancestors,\n * e.g. if they have `overflow: scroll` CSS style.\n *\n * @param target A target, which supposed to become visible to the user.\n * @param ancestorOffset An offset between the target and the boundary of scrollable ancestors\n * to be maintained while scrolling.\n * @param limiterElement The outermost ancestor that should be scrolled. If specified, it can prevent\n * scrolling the whole page.\n */ function scrollAncestorsToShowTarget(target, ancestorOffset, limiterElement) {\n    const targetParent = getParentElement(target);\n    scrollAncestorsToShowRect({\n        parent: targetParent,\n        getRect: ()=>new Rect(target),\n        ancestorOffset,\n        limiterElement\n    });\n}\n/**\n * Makes a given rect visible within its parent window.\n *\n * Note: Avoid the situation where the caret is still in the viewport, but totally\n * at the edge of it. In such situation, if it moved beyond the viewport in the next\n * action e.g. after paste, the scrolling would move it to the viewportOffset level\n * and it all would look like the caret visually moved up/down:\n *\n * 1.\n * ```\n * | foo[]\n * |                                    <--- N px of space below the caret\n * +---------------------------------...\n * ```\n *\n * 2. *paste*\n * 3.\n * ```\n * |\n * |\n * +-foo-----------------------------...\n *   bar[]                              <--- caret below viewport, scrolling...\n * ```\n *\n * 4. *scrolling*\n * 5.\n * ```\n * |\n * | foo\n * | bar[]                              <--- caret precisely at the edge\n * +---------------------------------...\n * ```\n *\n * To prevent this, this method checks the rects moved by the viewportOffset to cover\n * the upper/lower edge of the viewport. It makes sure if the action repeats, there's\n * no twitching – it's a purely visual improvement:\n *\n * 5. (after fix)\n * ```\n * |\n * | foo\n * | bar[]\n * |                                    <--- N px of space below the caret\n * +---------------------------------...\n * ```\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.window A window which is scrolled to reveal the rect.\n * @param options.rect A rect which is to be revealed.\n * @param options.viewportOffset An offset from the edge of the viewport (in pixels) the `rect` will be\n * moved by if the viewport is scrolled.\n * @param options.alignToTop When set `true`, the helper will make sure the `rect` is scrolled up\n * to the top boundary of the viewport if scrolled up. When not set (default), the `rect` will be\n * revealed by scrolling as little as possible. This option will not affect rects that must be scrolled\n * down because they will appear at the top of the boundary anyway.\n * @param options.forceScroll When set `true`, the `rect` will be aligned to the top of the viewport\n * whether it is already visible or not. This option will only work when `alignToTop` is `true`\n */ function scrollWindowToShowRect({ window, rect, alignToTop, forceScroll, viewportOffset }) {\n    const targetShiftedDownRect = rect.clone().moveBy(0, viewportOffset.bottom);\n    const targetShiftedUpRect = rect.clone().moveBy(0, -viewportOffset.top);\n    const viewportRect = new Rect(window).excludeScrollbarsAndBorders();\n    const rects = [\n        targetShiftedUpRect,\n        targetShiftedDownRect\n    ];\n    const forceScrollToTop = alignToTop && forceScroll;\n    const allRectsFitInViewport = rects.every((rect)=>viewportRect.contains(rect));\n    let { scrollX, scrollY } = window;\n    const initialScrollX = scrollX;\n    const initialScrollY = scrollY;\n    if (forceScrollToTop) {\n        scrollY -= viewportRect.top - rect.top + viewportOffset.top;\n    } else if (!allRectsFitInViewport) {\n        if (isAbove(targetShiftedUpRect, viewportRect)) {\n            scrollY -= viewportRect.top - rect.top + viewportOffset.top;\n        } else if (isBelow(targetShiftedDownRect, viewportRect)) {\n            if (alignToTop) {\n                scrollY += rect.top - viewportRect.top - viewportOffset.top;\n            } else {\n                scrollY += rect.bottom - viewportRect.bottom + viewportOffset.bottom;\n            }\n        }\n    }\n    if (!allRectsFitInViewport) {\n        // TODO: Web browsers scroll natively to place the target in the middle\n        // of the viewport. It's not a very popular case, though.\n        if (isLeftOf(rect, viewportRect)) {\n            scrollX -= viewportRect.left - rect.left + viewportOffset.left;\n        } else if (isRightOf(rect, viewportRect)) {\n            scrollX += rect.right - viewportRect.right + viewportOffset.right;\n        }\n    }\n    if (scrollX != initialScrollX || scrollY !== initialScrollY) {\n        window.scrollTo(scrollX, scrollY);\n    }\n}\n/**\n * Recursively scrolls element ancestors to visually reveal a rect.\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.parent The first parent ancestor to start scrolling.\n * @param options.getRect A function which returns the Rect, which is to be revealed.\n * @param options.ancestorOffset An offset from the boundary of scrollable ancestors (if any)\n * the `Rect` instance will be moved by if the viewport is scrolled.\n * @param options.alignToTop When set `true`, the helper will make sure the `Rect` instance is scrolled up\n * to the top boundary of the scrollable ancestors if scrolled up. When not set (default), the `rect`\n * will be revealed by scrolling as little as possible. This option will not affect rects that must be\n * scrolled down because they will appear at the top of the boundary\n * anyway.\n * @param options.forceScroll When set `true`, the `rect` will be aligned to the top of scrollable ancestors\n * whether it is already visible or not. This option will only work when `alignToTop` is `true`\n * @param options.limiterElement The outermost ancestor that should be scrolled. Defaults to the `<body>` element.\n */ function scrollAncestorsToShowRect({ parent, getRect, alignToTop, forceScroll, ancestorOffset = 0, limiterElement }) {\n    const parentWindow = getWindow(parent);\n    const forceScrollToTop = alignToTop && forceScroll;\n    let parentRect, targetRect, targetFitsInTarget;\n    const limiter = limiterElement || parentWindow.document.body;\n    while(parent != limiter){\n        targetRect = getRect();\n        parentRect = new Rect(parent).excludeScrollbarsAndBorders();\n        targetFitsInTarget = parentRect.contains(targetRect);\n        if (forceScrollToTop) {\n            parent.scrollTop -= parentRect.top - targetRect.top + ancestorOffset;\n        } else if (!targetFitsInTarget) {\n            if (isAbove(targetRect, parentRect)) {\n                parent.scrollTop -= parentRect.top - targetRect.top + ancestorOffset;\n            } else if (isBelow(targetRect, parentRect)) {\n                if (alignToTop) {\n                    parent.scrollTop += targetRect.top - parentRect.top - ancestorOffset;\n                } else {\n                    parent.scrollTop += targetRect.bottom - parentRect.bottom + ancestorOffset;\n                }\n            }\n        }\n        if (!targetFitsInTarget) {\n            if (isLeftOf(targetRect, parentRect)) {\n                parent.scrollLeft -= parentRect.left - targetRect.left + ancestorOffset;\n            } else if (isRightOf(targetRect, parentRect)) {\n                parent.scrollLeft += targetRect.right - parentRect.right + ancestorOffset;\n            }\n        }\n        parent = parent.parentNode;\n    }\n}\n/**\n * Determines if a given `Rect` extends beyond the bottom edge of the second `Rect`.\n */ function isBelow(firstRect, secondRect) {\n    return firstRect.bottom > secondRect.bottom;\n}\n/**\n * Determines if a given `Rect` extends beyond the top edge of the second `Rect`.\n */ function isAbove(firstRect, secondRect) {\n    return firstRect.top < secondRect.top;\n}\n/**\n * Determines if a given `Rect` extends beyond the left edge of the second `Rect`.\n */ function isLeftOf(firstRect, secondRect) {\n    return firstRect.left < secondRect.left;\n}\n/**\n * Determines if a given `Rect` extends beyond the right edge of the second `Rect`.\n */ function isRightOf(firstRect, secondRect) {\n    return firstRect.right > secondRect.right;\n}\n/**\n * Returns the closest window of an element or range.\n */ function getWindow(elementOrRange) {\n    if (isRange(elementOrRange)) {\n        return elementOrRange.startContainer.ownerDocument.defaultView;\n    } else {\n        return elementOrRange.ownerDocument.defaultView;\n    }\n}\n/**\n * Returns the closest parent of an element or DOM range.\n */ function getParentElement(elementOrRange) {\n    if (isRange(elementOrRange)) {\n        let parent = elementOrRange.commonAncestorContainer;\n        // If a Range is attached to the Text, use the closest element ancestor.\n        if (isText(parent)) {\n            parent = parent.parentNode;\n        }\n        return parent;\n    } else {\n        return elementOrRange.parentNode;\n    }\n}\n/**\n * Returns the rect of an element or range residing in an iframe.\n * The result rect is relative to the geometry of the passed window instance.\n *\n * @param target Element or range which rect should be returned.\n * @param relativeWindow A window the rect should be relative to.\n */ function getRectRelativeToWindow(target, relativeWindow) {\n    const targetWindow = getWindow(target);\n    const rect = new Rect(target);\n    if (targetWindow === relativeWindow) {\n        return rect;\n    } else {\n        let currentWindow = targetWindow;\n        while(currentWindow != relativeWindow){\n            const frame = currentWindow.frameElement;\n            const frameRect = new Rect(frame).excludeScrollbarsAndBorders();\n            rect.moveBy(frameRect.left, frameRect.top);\n            currentWindow = currentWindow.parent;\n        }\n    }\n    return rect;\n}\n/**\n * A helper that explodes the `viewportOffset` configuration if defined as a plain number into an object\n * with `top`, `bottom`, `left`, and `right` properties.\n *\n * If an object value is passed, this helper will pass it through.\n *\n * @param viewportOffset Viewport offset to be normalized.\n */ function normalizeViewportOffset(viewportOffset) {\n    if (typeof viewportOffset === 'number') {\n        return {\n            top: viewportOffset,\n            bottom: viewportOffset,\n            left: viewportOffset,\n            right: viewportOffset\n        };\n    }\n    return viewportOffset;\n}\n\nconst modifiersToGlyphsMac = {\n    ctrl: '⌃',\n    cmd: '⌘',\n    alt: '⌥',\n    shift: '⇧'\n};\nconst modifiersToGlyphsNonMac = {\n    ctrl: 'Ctrl+',\n    alt: 'Alt+',\n    shift: 'Shift+'\n};\nconst keyCodesToGlyphs = {\n    37: '←',\n    38: '↑',\n    39: '→',\n    40: '↓',\n    9: '⇥',\n    33: 'Page Up',\n    34: 'Page Down'\n};\n/**\n * An object with `keyName => keyCode` pairs for a set of known keys.\n *\n * Contains:\n *\n * * `a-z`,\n * * `0-9`,\n * * `f1-f12`,\n * * `` ` ``, `-`, `=`, `[`, `]`, `;`, `'`, `,`, `.`, `/`, `\\`,\n * * `arrow(left|up|right|bottom)`,\n * * `backspace`, `delete`, `end`, `enter`, `esc`, `home`, `tab`,\n * * `ctrl`, `cmd`, `shift`, `alt`.\n */ const keyCodes = /* #__PURE__ */ generateKnownKeyCodes();\nconst keyCodeNames = /* #__PURE__ */ Object.fromEntries(/* #__PURE__ */ Object.entries(keyCodes).map(([name, code])=>{\n    let prettyKeyName;\n    if (code in keyCodesToGlyphs) {\n        prettyKeyName = keyCodesToGlyphs[code];\n    } else {\n        prettyKeyName = name.charAt(0).toUpperCase() + name.slice(1);\n    }\n    return [\n        code,\n        prettyKeyName\n    ];\n}));\n/**\n * Converts a key name or {@link module:utils/keyboard~KeystrokeInfo keystroke info} into a key code.\n *\n * Note: Key names are matched with {@link module:utils/keyboard#keyCodes} in a case-insensitive way.\n *\n * @param key A key name (see {@link module:utils/keyboard#keyCodes}) or a keystroke data object.\n * @returns Key or keystroke code.\n */ function getCode(key) {\n    let keyCode;\n    if (typeof key == 'string') {\n        keyCode = keyCodes[key.toLowerCase()];\n        if (!keyCode) {\n            /**\n\t\t\t * Unknown key name. Only key names included in the {@link module:utils/keyboard#keyCodes} can be used.\n\t\t\t *\n\t\t\t * @error keyboard-unknown-key\n\t\t\t * @param {string} key Ths specified key name.\n\t\t\t */ throw new CKEditorError('keyboard-unknown-key', null, {\n                key\n            });\n        }\n    } else {\n        keyCode = key.keyCode + (key.altKey ? keyCodes.alt : 0) + (key.ctrlKey ? keyCodes.ctrl : 0) + (key.shiftKey ? keyCodes.shift : 0) + (key.metaKey ? keyCodes.cmd : 0);\n    }\n    return keyCode;\n}\n/**\n * Parses the keystroke and returns a keystroke code that will match the code returned by\n * {@link module:utils/keyboard~getCode} for the corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.\n *\n * The keystroke can be passed in two formats:\n *\n * * as a single string – e.g. `ctrl + A`,\n * * as an array of {@link module:utils/keyboard~keyCodes known key names} and key codes – e.g.:\n *   * `[ 'ctrl', 32 ]` (ctrl + space),\n *   * `[ 'ctrl', 'a' ]` (ctrl + A).\n *\n * Note: Key names are matched with {@link module:utils/keyboard#keyCodes} in a case-insensitive way.\n *\n * Note: Only keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is OK, but `ctrl+A+B` is not).\n *\n * Note: On macOS, keystroke handling is translating the `Ctrl` key to the `Cmd` key and handling only that keystroke.\n * For example, a registered keystroke `Ctrl+A` will be translated to `Cmd+A` on macOS. To disable the translation of some keystroke,\n * use the forced modifier: `Ctrl!+A` (note the exclamation mark).\n *\n * @param keystroke The keystroke definition.\n * @returns Keystroke code.\n */ function parseKeystroke(keystroke) {\n    if (typeof keystroke == 'string') {\n        keystroke = splitKeystrokeText(keystroke);\n    }\n    return keystroke.map((key)=>typeof key == 'string' ? getEnvKeyCode(key) : key).reduce((key, sum)=>sum + key, 0);\n}\n/**\n * Translates any keystroke string text like `\"Ctrl+A\"` to an\n * environment–specific keystroke, i.e. `\"⌘A\"` on macOS.\n *\n * @param keystroke The keystroke text.\n * @param [forcedEnv] The environment to force the key translation to. If not provided, the current environment is used.\n * @returns The keystroke text specific for the environment.\n */ function getEnvKeystrokeText(keystroke, forcedEnv) {\n    let keystrokeCode = parseKeystroke(keystroke);\n    const isMac = forcedEnv ? forcedEnv === 'Mac' : env.isMac || env.isiOS;\n    const modifiersToGlyphs = Object.entries(isMac ? modifiersToGlyphsMac : modifiersToGlyphsNonMac);\n    const modifiers = modifiersToGlyphs.reduce((modifiers, [name, glyph])=>{\n        // Modifier keys are stored as a bit mask so extract those from the keystroke code.\n        if ((keystrokeCode & keyCodes[name]) != 0) {\n            keystrokeCode &= ~keyCodes[name];\n            modifiers += glyph;\n        }\n        return modifiers;\n    }, '');\n    return modifiers + (keystrokeCode ? keyCodeNames[keystrokeCode] : '');\n}\n/**\n * Returns `true` if the provided key code represents one of the arrow keys.\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n */ function isArrowKeyCode(keyCode) {\n    return keyCode == keyCodes.arrowright || keyCode == keyCodes.arrowleft || keyCode == keyCodes.arrowup || keyCode == keyCodes.arrowdown;\n}\n/**\n * Returns the direction in which the {@link module:engine/model/documentselection~ModelDocumentSelection selection}\n * will move when the provided arrow key code is pressed considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) content languages, pressing the left arrow means moving the selection right (forward)\n * in the model structure. Similarly, pressing the right arrow moves the selection left (backward).\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns Localized arrow direction or `undefined` for non-arrow key codes.\n */ function getLocalizedArrowKeyCodeDirection(keyCode, contentLanguageDirection) {\n    const isLtrContent = contentLanguageDirection === 'ltr';\n    switch(keyCode){\n        case keyCodes.arrowleft:\n            return isLtrContent ? 'left' : 'right';\n        case keyCodes.arrowright:\n            return isLtrContent ? 'right' : 'left';\n        case keyCodes.arrowup:\n            return 'up';\n        case keyCodes.arrowdown:\n            return 'down';\n    }\n}\n/**\n * Converts a key name to the key code with mapping based on the env.\n *\n * See: {@link module:utils/keyboard~getCode}.\n *\n * @param key The key name (see {@link module:utils/keyboard#keyCodes}).\n * @returns Key code.\n */ function getEnvKeyCode(key) {\n    // Don't remap modifier key for forced modifiers.\n    if (key.endsWith('!')) {\n        return getCode(key.slice(0, -1));\n    }\n    const code = getCode(key);\n    return (env.isMac || env.isiOS) && code == keyCodes.ctrl ? keyCodes.cmd : code;\n}\n/**\n * Determines if the provided key code moves the {@link module:engine/model/documentselection~ModelDocumentSelection selection}\n * forward or backward considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) languages, pressing the left arrow means moving forward\n * in the model structure. Similarly, pressing the right arrow moves the selection backward.\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n */ function isForwardArrowKeyCode(keyCode, contentLanguageDirection) {\n    const localizedKeyCodeDirection = getLocalizedArrowKeyCodeDirection(keyCode, contentLanguageDirection);\n    return localizedKeyCodeDirection === 'down' || localizedKeyCodeDirection === 'right';\n}\nfunction generateKnownKeyCodes() {\n    const keyCodes = {\n        pageup: 33,\n        pagedown: 34,\n        end: 35,\n        home: 36,\n        arrowleft: 37,\n        arrowup: 38,\n        arrowright: 39,\n        arrowdown: 40,\n        backspace: 8,\n        delete: 46,\n        enter: 13,\n        space: 32,\n        esc: 27,\n        tab: 9,\n        // The idea about these numbers is that they do not collide with any real key codes, so we can use them\n        // like bit masks.\n        ctrl: 0x110000,\n        shift: 0x220000,\n        alt: 0x440000,\n        cmd: 0x880000\n    };\n    // a-z\n    for(let code = 65; code <= 90; code++){\n        const letter = String.fromCharCode(code);\n        keyCodes[letter.toLowerCase()] = code;\n    }\n    // 0-9\n    for(let code = 48; code <= 57; code++){\n        keyCodes[code - 48] = code;\n    }\n    // F1-F12\n    for(let code = 112; code <= 123; code++){\n        keyCodes['f' + (code - 111)] = code;\n    }\n    // other characters\n    Object.assign(keyCodes, {\n        '\\'': 222,\n        ',': 108,\n        '-': 109,\n        '.': 110,\n        '/': 111,\n        ';': 186,\n        '=': 187,\n        '[': 219,\n        '\\\\': 220,\n        ']': 221,\n        '`': 223\n    });\n    return keyCodes;\n}\nfunction splitKeystrokeText(keystroke) {\n    return keystroke.split('+').map((key)=>key.trim());\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/language\n */ /**\n * String representing a language direction.\n */ const RTL_LANGUAGE_CODES = [\n    'ar',\n    'ara',\n    'dv',\n    'div',\n    'fa',\n    'per',\n    'fas',\n    'he',\n    'heb',\n    'ku',\n    'kur',\n    'ug',\n    'uig',\n    'ur',\n    'urd' // Urdu\n];\n/**\n * Helps determine whether a language text direction is LTR or RTL.\n *\n * @param languageCode The ISO 639-1 or ISO 639-2 language code.\n */ function getLanguageDirection(languageCode) {\n    return RTL_LANGUAGE_CODES.includes(languageCode) ? 'rtl' : 'ltr';\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/toarray\n */ /**\n * Transforms any value to an array. If the provided value is already an array, it is returned unchanged.\n *\n * @label MUTABLE\n * @param data The value to transform to an array.\n * @returns An array created from data.\n */ function toArray(data) {\n    return Array.isArray(data) ? data : [\n        data\n    ];\n}\n\n/* istanbul ignore else -- @preserve */ if (!globalVar.window.CKEDITOR_TRANSLATIONS) {\n    globalVar.window.CKEDITOR_TRANSLATIONS = {};\n}\n/**\n * Adds translations to existing ones or overrides the existing translations. These translations will later\n * be available for the {@link module:utils/locale~Locale#t `t()`} function.\n *\n * The `translations` is an object which consists of `messageId: translation` pairs. Note that the message ID can be\n * either constructed from the message string or from the message ID if it was passed\n * (this happens rarely and mostly for short messages or messages with placeholders).\n * Since the editor displays only the message string, the message ID can be found either in the source code or in the\n * built translations for another language.\n *\n * ```ts\n * add( 'pl', {\n * \t'Cancel': 'Anuluj',\n * \t'IMAGE': 'obraz', // Note that the `IMAGE` comes from the message ID, while the string can be `image`.\n * } );\n * ```\n *\n * If the message is supposed to support various plural forms, make sure to provide an array with the singular form and all plural forms:\n *\n * ```ts\n * add( 'pl', {\n * \t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * } );\n * ```\n *\n * You should also specify the third argument (the `getPluralForm()` function) that will be used to determine the plural form if no\n * language file was loaded for that language. All language files coming from CKEditor 5 sources will have this option set, so\n * these plural form rules will be reused by other translations added to the registered languages. The `getPluralForm()` function\n * can return either a Boolean or a number.\n *\n * ```ts\n * add( 'en', {\n * \t// ... Translations.\n * }, n => n !== 1 );\n * add( 'pl', {\n * \t// ... Translations.\n * }, n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n * ```\n *\n * All translations extend the global `window.CKEDITOR_TRANSLATIONS` object. An example of this object can be found below:\n *\n * ```ts\n * {\n * \tpl: {\n * \t\tdictionary: {\n * \t\t\t'Cancel': 'Anuluj',\n * \t\t\t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * \t\t},\n * \t\t// A function that returns the plural form index.\n * \t\tgetPluralForm: n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n * \t}\n * \t// Other languages.\n * \t}\n * ```\n *\n * If you cannot import { this function } from this module (e.g. because you use a CKEditor 5 build), you can\n * still add translations by extending the global `window.CKEDITOR_TRANSLATIONS` object by using a function like\n * the one below:\n *\n * ```ts\n * function addTranslations( language, translations, getPluralForm ) {\n * \tif ( !global.window.CKEDITOR_TRANSLATIONS ) {\n * \t\tglobal.window.CKEDITOR_TRANSLATIONS = {};\n * \t}\n\n * \tif ( !global.window.CKEDITOR_TRANSLATIONS[ language ] ) {\n * \t\tglobal.window.CKEDITOR_TRANSLATIONS[ language ] = {};\n * \t}\n *\n * \tconst languageTranslations = global.window.CKEDITOR_TRANSLATIONS[ language ];\n *\n * \tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n * \tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n *\n * \t// Extend the dictionary for the given language.\n * \tObject.assign( languageTranslations.dictionary, translations );\n * }\n * ```\n *\n * @param language Target language.\n * @param translations An object with translations which will be added to the dictionary.\n * For each message ID the value should be either a translation or an array of translations if the message\n * should support plural forms.\n * @param getPluralForm A function that returns the plural form index (a number).\n */ function add(language, translations, getPluralForm) {\n    if (!globalVar.window.CKEDITOR_TRANSLATIONS[language]) {\n        globalVar.window.CKEDITOR_TRANSLATIONS[language] = {};\n    }\n    const languageTranslations = globalVar.window.CKEDITOR_TRANSLATIONS[language];\n    languageTranslations.dictionary = languageTranslations.dictionary || {};\n    languageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n    Object.assign(languageTranslations.dictionary, translations);\n}\n/**\n * **Note:** This method is internal, use {@link module:utils/locale~Locale#t the `t()` function} instead to translate\n * the editor UI parts.\n *\n * This function is responsible for translating messages to the specified language. It uses translations added perviously\n * by {@link module:utils/translation-service~add} (a translations dictionary and the `getPluralForm()` function\n * to provide accurate translations of plural forms).\n *\n * When no translation is defined in the dictionary or the dictionary does not exist, this function returns\n * the original message string or the message plural depending on the number of elements.\n *\n * ```ts\n * translate( 'pl', { string: 'Cancel' } ); // 'Cancel'\n * ```\n *\n * The third optional argument is the number of elements, based on which the single form or one of the plural forms\n * should be picked when the message is supposed to support various plural forms.\n *\n * ```ts\n * translate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space'\n * translate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 3 ); // 'Add %0 spaces'\n * ```\n *\n * The message should provide an ID using the `id` property when the message strings are not unique and their\n * translations should be different.\n *\n * ```ts\n * translate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n * translate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n * ```\n *\n * @internal\n * @param language Target language.\n * @param message A message that will be translated.\n * @param quantity The number of elements for which a plural form should be picked from the target language dictionary.\n * @param translations Translations passed in editor config, if not provided use the global `window.CKEDITOR_TRANSLATIONS`.\n * @returns Translated sentence.\n */ function _translate(language, message, quantity = 1, translations) {\n    if (typeof quantity !== 'number') {\n        /**\n\t\t * An incorrect value was passed to the translation function. This was probably caused\n\t\t * by an incorrect message interpolation of a plural form. Note that for messages supporting plural forms\n\t\t * the second argument of the `t()` function should always be a number or an array with a number as the first element.\n\t\t *\n\t\t * @error translation-service-quantity-not-a-number\n\t\t */ throw new CKEditorError('translation-service-quantity-not-a-number', null, {\n            quantity\n        });\n    }\n    const normalizedTranslations = translations || globalVar.window.CKEDITOR_TRANSLATIONS;\n    const numberOfLanguages = getNumberOfLanguages(normalizedTranslations);\n    if (numberOfLanguages === 1) {\n        // Override the language to the only supported one.\n        // This can't be done in the `Locale` class, because the translations comes after the `Locale` class initialization.\n        language = Object.keys(normalizedTranslations)[0];\n    }\n    const messageId = message.id || message.string;\n    if (numberOfLanguages === 0 || !hasTranslation(language, messageId, normalizedTranslations)) {\n        if (quantity !== 1) {\n            // Return the default plural form that was passed in the `message.plural` parameter.\n            return message.plural;\n        }\n        return message.string;\n    }\n    const dictionary = normalizedTranslations[language].dictionary;\n    const getPluralForm = normalizedTranslations[language].getPluralForm || ((n)=>n === 1 ? 0 : 1);\n    const translation = dictionary[messageId];\n    if (typeof translation === 'string') {\n        return translation;\n    }\n    const pluralFormIndex = Number(getPluralForm(quantity));\n    // Note: The `translate` function is not responsible for replacing `%0, %1, ...` with values.\n    return translation[pluralFormIndex];\n}\n/**\n * Clears dictionaries for test purposes.\n *\n * @internal\n */ function _clear() {\n    if (globalVar.window.CKEDITOR_TRANSLATIONS) {\n        globalVar.window.CKEDITOR_TRANSLATIONS = {};\n    }\n}\n/**\n * If array then merge objects which are inside otherwise return given object.\n *\n * @internal\n * @param translations Translations passed in editor config.\n */ function _unifyTranslations(translations) {\n    return Array.isArray(translations) ? translations.reduce((acc, translation)=>merge(acc, translation)) : translations;\n}\n/**\n * Checks whether the dictionary exists and translation in that dictionary exists.\n */ function hasTranslation(language, messageId, translations) {\n    return !!translations[language] && !!translations[language].dictionary[messageId];\n}\nfunction getNumberOfLanguages(translations) {\n    return Object.keys(translations).length;\n}\n\n/**\n * Represents the localization services.\n */ class Locale {\n    /**\n\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * If the {@link #contentLanguage content language} was not specified in the `Locale` constructor,\n\t * it also defines the language of the content.\n\t */ uiLanguage;\n    /**\n\t * Text direction of the {@link #uiLanguage editor UI language}. Either `'ltr'` or `'rtl'`.\n\t */ uiLanguageDirection;\n    /**\n\t * The editor content language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * Usually the same as the {@link #uiLanguage editor language}, it can be customized by passing an optional\n\t * argument to the `Locale` constructor.\n\t */ contentLanguage;\n    /**\n\t * Text direction of the {@link #contentLanguage editor content language}.\n\t *\n\t * If the content language was passed directly to the `Locale` constructor, this property represents the\n\t * direction of that language.\n\t *\n\t * If the {@link #contentLanguage editor content language} was derived from the {@link #uiLanguage editor language},\n\t * the content language direction is the same as the {@link #uiLanguageDirection UI language direction}.\n\t *\n\t * The value is either `'ltr'` or `'rtl'`.\n\t */ contentLanguageDirection;\n    /**\n\t * Translates the given message to the {@link #uiLanguage}. This method is also available in\n\t * {@link module:core/editor/editor~Editor#t `Editor`} and {@link module:ui/view~View#t `View`}.\n\t *\n\t * This method's context is statically bound to the `Locale` instance and **should always be called as a function**:\n\t *\n\t * ```ts\n\t * const t = locale.t;\n\t * t( 'Label' );\n\t * ```\n\t *\n\t * The message can be either a string or an object implementing the {@link module:utils/translation-service~Message} interface.\n\t *\n\t * The message may contain placeholders (`%<index>`) for value(s) that are passed as a `values` parameter.\n\t * For an array of values, the `%<index>` will be changed to an element of that array at the given index.\n\t * For a single value passed as the second argument, only the `%0` placeholders will be changed to the provided value.\n\t *\n\t * ```ts\n\t * t( 'Created file \"%0\" in %1ms.', [ fileName, timeTaken ] );\n\t * t( 'Created file \"%0\", fileName );\n\t * ```\n\t *\n\t * The message supports plural forms. To specify the plural form, use the `plural` property. Singular or plural form\n\t * will be chosen depending on the first value from the passed `values`. The value of the `plural` property is used\n\t * as a default plural translation when the translation for the target language is missing.\n\t *\n\t * ```ts\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space' for the English language.\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Add 5 spaces' for the English language.\n\t * t( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Add 2 spaces' for the English language.\n\t *\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Dodaj spację' for the Polish language.\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Dodaj 5 spacji' for the Polish language.\n\t * t( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Dodaj 2 spacje' for the Polish language.\n\t * ```\n\t *\n\t *  * The message should provide an ID using the `id` property when the message strings are not unique and their\n\t * translations should be different.\n\t *\n\t * ```ts\n\t * translate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n\t * translate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n\t * ```\n\t */ t;\n    /**\n\t * Object that contains translations.\n\t */ translations;\n    /**\n\t * Creates a new instance of the locale class. Learn more about\n\t * {@glink getting-started/setup/ui-language configuring the language of the editor}.\n\t *\n\t * @param options Locale configuration.\n\t * @param options.uiLanguage The editor UI language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. See {@link #uiLanguage}.\n\t * @param options.contentLanguage The editor content language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. If not specified, the same as `options.language`.\n\t * See {@link #contentLanguage}.\n\t * @param options.translations Translations passed as a editor config parameter.\n\t */ constructor({ uiLanguage = 'en', contentLanguage, translations } = {}){\n        this.uiLanguage = uiLanguage;\n        this.contentLanguage = contentLanguage || this.uiLanguage;\n        this.uiLanguageDirection = getLanguageDirection(this.uiLanguage);\n        this.contentLanguageDirection = getLanguageDirection(this.contentLanguage);\n        this.translations = _unifyTranslations(translations);\n        this.t = (message, values)=>this._t(message, values);\n    }\n    /**\n\t * An unbound version of the {@link #t} method.\n\t */ _t(message, values = []) {\n        values = toArray(values);\n        if (typeof message === 'string') {\n            message = {\n                string: message\n            };\n        }\n        const hasPluralForm = !!message.plural;\n        const quantity = hasPluralForm ? values[0] : 1;\n        const translatedString = _translate(this.uiLanguage, message, quantity, this.translations);\n        return interpolateString(translatedString, values);\n    }\n}\n/**\n * Fills the `%0, %1, ...` string placeholders with values.\n */ function interpolateString(string, values) {\n    return string.replace(/%(\\d+)/g, (match, index)=>{\n        return index < values.length ? values[index] : match;\n    });\n}\n\n/**\n * Collections are ordered sets of objects. Items in the collection can be retrieved by their indexes\n * in the collection (like in an array) or by their ids.\n *\n * If an object without an `id` property is being added to the collection, the `id` property will be generated\n * automatically. Note that the automatically generated id is unique only within this single collection instance.\n *\n * By default an item in the collection is identified by its `id` property. The name of the identifier can be\n * configured through the constructor of the collection.\n *\n * @typeParam T The type of the collection element.\n */ class Collection extends /* #__PURE__ */ EmitterMixin() {\n    /**\n\t * The internal list of items in the collection.\n\t */ _items;\n    /**\n\t * The internal map of items in the collection.\n\t */ _itemMap;\n    /**\n\t * The name of the property which is considered to identify an item.\n\t */ _idProperty;\n    /**\n\t * A collection instance this collection is bound to as a result\n\t * of calling {@link #bindTo} method.\n\t */ _bindToCollection;\n    /**\n\t * A helper mapping external items of a bound collection ({@link #bindTo})\n\t * and actual items of this collection. It provides information\n\t * necessary to properly remove items bound to another collection.\n\t *\n\t * See {@link #_bindToInternalToExternalMap}.\n\t */ _bindToExternalToInternalMap;\n    /**\n\t * A helper mapping items of this collection to external items of a bound collection\n\t * ({@link #bindTo}). It provides information necessary to manage the bindings, e.g.\n\t * to avoid loops in two–way bindings.\n\t *\n\t * See {@link #_bindToExternalToInternalMap}.\n\t */ _bindToInternalToExternalMap;\n    /**\n\t * Stores indexes of skipped items from bound external collection.\n\t */ _skippedIndexesFromExternal;\n    constructor(initialItemsOrOptions = {}, options = {}){\n        super();\n        const hasInitialItems = isIterable(initialItemsOrOptions);\n        if (!hasInitialItems) {\n            options = initialItemsOrOptions;\n        }\n        this._items = [];\n        this._itemMap = new Map();\n        this._idProperty = options.idProperty || 'id';\n        this._bindToExternalToInternalMap = new WeakMap();\n        this._bindToInternalToExternalMap = new WeakMap();\n        this._skippedIndexesFromExternal = [];\n        // Set the initial content of the collection (if provided in the constructor).\n        if (hasInitialItems) {\n            for (const item of initialItemsOrOptions){\n                this._items.push(item);\n                this._itemMap.set(this._getItemIdBeforeAdding(item), item);\n            }\n        }\n    }\n    /**\n\t * The number of items available in the collection.\n\t */ get length() {\n        return this._items.length;\n    }\n    /**\n\t * Returns the first item from the collection or null when collection is empty.\n\t */ get first() {\n        return this._items[0] || null;\n    }\n    /**\n\t * Returns the last item from the collection or null when collection is empty.\n\t */ get last() {\n        return this._items[this.length - 1] || null;\n    }\n    /**\n\t * Adds an item into the collection.\n\t *\n\t * If the item does not have an id, then it will be automatically generated and set on the item.\n\t *\n\t * @param item\n\t * @param index The position of the item in the collection. The item\n\t * is pushed to the collection when `index` not specified.\n\t * @fires add\n\t * @fires change\n\t */ add(item, index) {\n        return this.addMany([\n            item\n        ], index);\n    }\n    /**\n\t * Adds multiple items into the collection.\n\t *\n\t * Any item not containing an id will get an automatically generated one.\n\t *\n\t * @param items\n\t * @param index The position of the insertion. Items will be appended if no `index` is specified.\n\t * @fires add\n\t * @fires change\n\t */ addMany(items, index) {\n        if (index === undefined) {\n            index = this._items.length;\n        } else if (index > this._items.length || index < 0) {\n            /**\n\t\t\t * The `index` passed to {@link module:utils/collection~Collection#addMany `Collection#addMany()`}\n\t\t\t * is invalid. It must be a number between 0 and the collection's length.\n\t\t\t *\n\t\t\t * @error collection-add-item-invalid-index\n\t\t\t */ throw new CKEditorError('collection-add-item-invalid-index', this);\n        }\n        let offset = 0;\n        for (const item of items){\n            const itemId = this._getItemIdBeforeAdding(item);\n            const currentItemIndex = index + offset;\n            this._items.splice(currentItemIndex, 0, item);\n            this._itemMap.set(itemId, item);\n            this.fire('add', item, currentItemIndex);\n            offset++;\n        }\n        this.fire('change', {\n            added: items,\n            removed: [],\n            index\n        });\n        return this;\n    }\n    /**\n\t * Gets an item by its ID or index.\n\t *\n\t * @param idOrIndex The item ID or index in the collection.\n\t * @returns The requested item or `null` if such item does not exist.\n\t */ get(idOrIndex) {\n        let item;\n        if (typeof idOrIndex == 'string') {\n            item = this._itemMap.get(idOrIndex);\n        } else if (typeof idOrIndex == 'number') {\n            item = this._items[idOrIndex];\n        } else {\n            /**\n\t\t\t * An index or ID must be given.\n\t\t\t *\n\t\t\t * @error collection-get-invalid-arg\n\t\t\t */ throw new CKEditorError('collection-get-invalid-arg', this);\n        }\n        return item || null;\n    }\n    /**\n\t * Returns a Boolean indicating whether the collection contains an item.\n\t *\n\t * @param itemOrId The item or its ID in the collection.\n\t * @returns `true` if the collection contains the item, `false` otherwise.\n\t */ has(itemOrId) {\n        if (typeof itemOrId == 'string') {\n            return this._itemMap.has(itemOrId);\n        } else {\n            const idProperty = this._idProperty;\n            const id = itemOrId[idProperty];\n            return id && this._itemMap.has(id);\n        }\n    }\n    /**\n\t * Gets an index of an item in the collection.\n\t * When an item is not defined in the collection, the index will equal -1.\n\t *\n\t * @param itemOrId The item or its ID in the collection.\n\t * @returns The index of a given item.\n\t */ getIndex(itemOrId) {\n        let item;\n        if (typeof itemOrId == 'string') {\n            item = this._itemMap.get(itemOrId);\n        } else {\n            item = itemOrId;\n        }\n        return item ? this._items.indexOf(item) : -1;\n    }\n    /**\n\t * Removes an item from the collection.\n\t *\n\t * @param subject The item to remove, its ID or index in the collection.\n\t * @returns The removed item.\n\t * @fires remove\n\t * @fires change\n\t */ remove(subject) {\n        const [item, index] = this._remove(subject);\n        this.fire('change', {\n            added: [],\n            removed: [\n                item\n            ],\n            index\n        });\n        return item;\n    }\n    /**\n\t * Executes the callback for each item in the collection and composes an array or values returned by this callback.\n\t *\n\t * @typeParam U The result type of the callback.\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The result of mapping.\n\t */ map(callback, ctx) {\n        return this._items.map(callback, ctx);\n    }\n    /**\n\t * Performs the specified action for each item in the collection.\n\t *\n\t * @param ctx Context in which the `callback` will be called.\n\t */ forEach(callback, ctx) {\n        this._items.forEach(callback, ctx);\n    }\n    /**\n\t * Finds the first item in the collection for which the `callback` returns a true value.\n\t *\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The item for which `callback` returned a true value.\n\t */ find(callback, ctx) {\n        return this._items.find(callback, ctx);\n    }\n    /**\n\t * Returns an array with items for which the `callback` returned a true value.\n\t *\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The array with matching items.\n\t */ filter(callback, ctx) {\n        return this._items.filter(callback, ctx);\n    }\n    /**\n\t * Removes all items from the collection and destroys the binding created using\n\t * {@link #bindTo}.\n\t *\n\t * @fires remove\n\t * @fires change\n\t */ clear() {\n        if (this._bindToCollection) {\n            this.stopListening(this._bindToCollection);\n            this._bindToCollection = null;\n        }\n        const removedItems = Array.from(this._items);\n        while(this.length){\n            this._remove(0);\n        }\n        this.fire('change', {\n            added: [],\n            removed: removedItems,\n            index: 0\n        });\n    }\n    /**\n\t * Binds and synchronizes the collection with another one.\n\t *\n\t * The binding can be a simple factory:\n\t *\n\t * ```ts\n\t * class FactoryClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * const source = new Collection<{ label: string }>( { idProperty: 'label' } );\n\t * const target = new Collection<FactoryClass>();\n\t *\n\t * target.bindTo( source ).as( FactoryClass );\n\t *\n\t * source.add( { label: 'foo' } );\n\t * source.add( { label: 'bar' } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 1 ).label ); // 'bar'\n\t *\n\t * source.remove( 0 );\n\t * console.log( target.length ); // 1\n\t * console.log( target.get( 0 ).label ); // 'bar'\n\t * ```\n\t *\n\t * or the factory driven by a custom callback:\n\t *\n\t * ```ts\n\t * class FooClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * class BarClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * const source = new Collection<{ label: string }>( { idProperty: 'label' } );\n\t * const target = new Collection<FooClass | BarClass>();\n\t *\n\t * target.bindTo( source ).using( ( item ) => {\n\t * \tif ( item.label == 'foo' ) {\n\t * \t\treturn new FooClass( item );\n\t * \t} else {\n\t * \t\treturn new BarClass( item );\n\t * \t}\n\t * } );\n\t *\n\t * source.add( { label: 'foo' } );\n\t * source.add( { label: 'bar' } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 0 ) instanceof FooClass ); // true\n\t * console.log( target.get( 1 ) instanceof BarClass ); // true\n\t * ```\n\t *\n\t * or the factory out of property name:\n\t *\n\t * ```ts\n\t * const source = new Collection<{ nested: { value: string } }>();\n\t * const target = new Collection<{ value: string }>();\n\t *\n\t * target.bindTo( source ).using( 'nested' );\n\t *\n\t * source.add( { nested: { value: 'foo' } } );\n\t * source.add( { nested: { value: 'bar' } } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 0 ).value ); // 'foo'\n\t * console.log( target.get( 1 ).value ); // 'bar'\n\t * ```\n\t *\n\t * It's possible to skip specified items by returning null value:\n\t *\n\t * ```ts\n\t * const source = new Collection<{ hidden: boolean }>();\n\t * const target = new Collection<{ hidden: boolean }>();\n\t *\n\t * target.bindTo( source ).using( item => {\n\t * \tif ( item.hidden ) {\n\t * \t\treturn null;\n\t * \t}\n\t *\n\t * \treturn item;\n\t * } );\n\t *\n\t * source.add( { hidden: true } );\n\t * source.add( { hidden: false } );\n\t *\n\t * console.log( source.length ); // 2\n\t * console.log( target.length ); // 1\n\t * ```\n\t *\n\t * **Note**: {@link #clear} can be used to break the binding.\n\t *\n\t * @typeParam S The type of `externalCollection` element.\n\t * @param externalCollection A collection to be bound.\n\t * @returns The binding chain object.\n\t */ bindTo(externalCollection) {\n        if (this._bindToCollection) {\n            /**\n\t\t\t * The collection cannot be bound more than once.\n\t\t\t *\n\t\t\t * @error collection-bind-to-rebind\n\t\t\t */ throw new CKEditorError('collection-bind-to-rebind', this);\n        }\n        this._bindToCollection = externalCollection;\n        return {\n            as: (Class)=>{\n                this._setUpBindToBinding((item)=>new Class(item));\n            },\n            using: (callbackOrProperty)=>{\n                if (typeof callbackOrProperty == 'function') {\n                    this._setUpBindToBinding(callbackOrProperty);\n                } else {\n                    this._setUpBindToBinding((item)=>item[callbackOrProperty]);\n                }\n            }\n        };\n    }\n    /**\n\t * Finalizes and activates a binding initiated by {@link #bindTo}.\n\t *\n\t * @param factory A function which produces collection items.\n\t */ _setUpBindToBinding(factory) {\n        const externalCollection = this._bindToCollection;\n        // Adds the item to the collection once a change has been done to the external collection.\n        const addItem = (evt, externalItem, index)=>{\n            const isExternalBoundToThis = externalCollection._bindToCollection == this;\n            const externalItemBound = externalCollection._bindToInternalToExternalMap.get(externalItem);\n            // If an external collection is bound to this collection, which makes it a 2–way binding,\n            // and the particular external collection item is already bound, don't add it here.\n            // The external item has been created **out of this collection's item** and (re)adding it will\n            // cause a loop.\n            if (isExternalBoundToThis && externalItemBound) {\n                this._bindToExternalToInternalMap.set(externalItem, externalItemBound);\n                this._bindToInternalToExternalMap.set(externalItemBound, externalItem);\n            } else {\n                const item = factory(externalItem);\n                // When there is no item we need to remember skipped index first and then we can skip this item.\n                if (!item) {\n                    this._skippedIndexesFromExternal.push(index);\n                    return;\n                }\n                // Lets try to put item at the same index as index in external collection\n                // but when there are a skipped items in one or both collections we need to recalculate this index.\n                let finalIndex = index;\n                // When we try to insert item after some skipped items from external collection we need\n                // to include this skipped items and decrease index.\n                //\n                // For the following example:\n                // external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal' ]\n                // internal -> [ A ]\n                //\n                // Another item is been added at the end of external collection:\n                // external.add( 'D' )\n                // external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal', 'D' ]\n                //\n                // We can't just add 'D' to internal at the same index as index in external because\n                // this will produce empty indexes what is invalid:\n                // internal -> [ 'A', empty, empty, 'D' ]\n                //\n                // So we need to include skipped items and decrease index\n                // internal -> [ 'A', 'D' ]\n                for (const skipped of this._skippedIndexesFromExternal){\n                    if (index > skipped) {\n                        finalIndex--;\n                    }\n                }\n                // We need to take into consideration that external collection could skip some items from\n                // internal collection.\n                //\n                // For the following example:\n                // internal -> [ 'A', 'B - skipped for external', 'C - skipped for external' ]\n                // external -> [ A ]\n                //\n                // Another item is been added at the end of external collection:\n                // external.add( 'D' )\n                // external -> [ 'A', 'D' ]\n                //\n                // We need to include skipped items and place new item after them:\n                // internal -> [ 'A', 'B - skipped for external', 'C - skipped for external', 'D' ]\n                for (const skipped of externalCollection._skippedIndexesFromExternal){\n                    if (finalIndex >= skipped) {\n                        finalIndex++;\n                    }\n                }\n                this._bindToExternalToInternalMap.set(externalItem, item);\n                this._bindToInternalToExternalMap.set(item, externalItem);\n                this.add(item, finalIndex);\n                // After adding new element to internal collection we need update indexes\n                // of skipped items in external collection.\n                for(let i = 0; i < externalCollection._skippedIndexesFromExternal.length; i++){\n                    if (finalIndex <= externalCollection._skippedIndexesFromExternal[i]) {\n                        externalCollection._skippedIndexesFromExternal[i]++;\n                    }\n                }\n            }\n        };\n        // Load the initial content of the collection.\n        for (const externalItem of externalCollection){\n            addItem(null, externalItem, externalCollection.getIndex(externalItem));\n        }\n        // Synchronize the with collection as new items are added.\n        this.listenTo(externalCollection, 'add', addItem);\n        // Synchronize the with collection as new items are removed.\n        this.listenTo(externalCollection, 'remove', (evt, externalItem, index)=>{\n            const item = this._bindToExternalToInternalMap.get(externalItem);\n            if (item) {\n                this.remove(item);\n            }\n            // After removing element from external collection we need update/remove indexes\n            // of skipped items in internal collection.\n            this._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce((result, skipped)=>{\n                if (index < skipped) {\n                    result.push(skipped - 1);\n                }\n                if (index > skipped) {\n                    result.push(skipped);\n                }\n                return result;\n            }, []);\n        });\n    }\n    /**\n\t * Returns an unique id property for a given `item`.\n\t *\n\t * The method will generate new id and assign it to the `item` if it doesn't have any.\n\t *\n\t * @param item Item to be added.\n\t */ _getItemIdBeforeAdding(item) {\n        const idProperty = this._idProperty;\n        let itemId;\n        if (idProperty in item) {\n            itemId = item[idProperty];\n            if (typeof itemId != 'string') {\n                /**\n\t\t\t\t * This item's ID should be a string.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-invalid-id\n\t\t\t\t */ throw new CKEditorError('collection-add-invalid-id', this);\n            }\n            if (this.get(itemId)) {\n                /**\n\t\t\t\t * This item already exists in the collection.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-item-already-exists\n\t\t\t\t */ throw new CKEditorError('collection-add-item-already-exists', this);\n            }\n        } else {\n            item[idProperty] = itemId = uid();\n        }\n        return itemId;\n    }\n    /**\n\t * Core {@link #remove} method implementation shared in other functions.\n\t *\n\t * In contrast this method **does not** fire the {@link #event:change} event.\n\t *\n\t * @param subject The item to remove, its id or index in the collection.\n\t * @returns Returns an array with the removed item and its index.\n\t * @fires remove\n\t */ _remove(subject) {\n        let index, id, item;\n        let itemDoesNotExist = false;\n        const idProperty = this._idProperty;\n        if (typeof subject == 'string') {\n            id = subject;\n            item = this._itemMap.get(id);\n            itemDoesNotExist = !item;\n            if (item) {\n                index = this._items.indexOf(item);\n            }\n        } else if (typeof subject == 'number') {\n            index = subject;\n            item = this._items[index];\n            itemDoesNotExist = !item;\n            if (item) {\n                id = item[idProperty];\n            }\n        } else {\n            item = subject;\n            id = item[idProperty];\n            index = this._items.indexOf(item);\n            itemDoesNotExist = index == -1 || !this._itemMap.get(id);\n        }\n        if (itemDoesNotExist) {\n            /**\n\t\t\t * Item not found.\n\t\t\t *\n\t\t\t * @error collection-remove-404\n\t\t\t */ throw new CKEditorError('collection-remove-404', this);\n        }\n        this._items.splice(index, 1);\n        this._itemMap.delete(id);\n        const externalItem = this._bindToInternalToExternalMap.get(item);\n        this._bindToInternalToExternalMap.delete(item);\n        this._bindToExternalToInternalMap.delete(externalItem);\n        this.fire('remove', item, index);\n        return [\n            item,\n            index\n        ];\n    }\n    /**\n\t * Iterable interface.\n\t */ [Symbol.iterator]() {\n        return this._items[Symbol.iterator]();\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/first\n */ /**\n * Returns first item of the given `iterator`.\n */ function first(iterator) {\n    const iteratorItem = iterator.next();\n    if (iteratorItem.done) {\n        return null;\n    }\n    return iteratorItem.value;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/nth\n */ /**\n * Returns `nth` (starts from `0` of course) item of the given `iterable`.\n *\n * If the iterable is a generator, then it consumes **all its items**.\n * If it's a normal iterator, then it consumes **all items up to the given index**.\n * Refer to the [Iterators and Generators](https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Iterators_and_Generators)\n * guide to learn differences between these interfaces.\n */ function nth(index, iterable) {\n    for (const item of iterable){\n        if (index === 0) {\n            return item;\n        }\n        index -= 1;\n    }\n    return null;\n}\n\n/**\n * Allows observing a group of DOM `Element`s or {@link module:ui/view~View view instances} whether at least one of them (or their child)\n * is focused.\n *\n * Used by the {@link module:core/editor/editor~Editor} in order to track whether the focus is still within the application,\n * or were used outside of its UI.\n *\n * **Note** `focus` and `blur` listeners use event capturing, so it is only needed to register wrapper `Element`\n * which contain other `focusable` elements. But note that this wrapper element has to be focusable too\n * (have e.g. `tabindex=\"-1\"`).\n *\n * Check out the {@glink framework/deep-dive/ui/focus-tracking \"Deep dive into focus tracking\"} guide to learn more.\n */ class FocusTracker extends /* #__PURE__ */ DomEmitterMixin(/* #__PURE__ */ ObservableMixin()) {\n    /**\n\t * List of registered DOM elements.\n\t *\n\t * @internal\n\t */ _elements = new Set();\n    /**\n\t * List of views with external focus trackers that contribute to the state of this focus tracker.\n\t *\n\t * @internal\n\t */ _externalViews = new Set();\n    /**\n\t * Asynchronous blur event timeout.\n\t */ _blurTimeout = null;\n    // @if CK_DEBUG_FOCUSTRACKER // public _label?: string;\n    constructor(){\n        super();\n        this.set('isFocused', false);\n        this.set('focusedElement', null);\n    // @if CK_DEBUG_FOCUSTRACKER // FocusTracker._instances.push( this );\n    }\n    /**\n\t * List of registered DOM elements.\n\t *\n\t * **Note**: The list does do not include elements from {@link #externalViews}.\n\t */ get elements() {\n        return Array.from(this._elements.values());\n    }\n    /**\n\t * List of external focusable views that contribute to the state of this focus tracker. See {@link #add} to learn more.\n\t */ get externalViews() {\n        return Array.from(this._externalViews.values());\n    }\n    /**\n\t * Starts tracking a specified DOM element or a {@link module:ui/view~View} instance.\n\t *\n\t * * If a DOM element is passed, the focus tracker listens to the `focus` and `blur` events on this element.\n\t * Tracked elements are listed in {@link #elements}.\n\t * * If a {@link module:ui/view~View} instance is passed that has a `FocusTracker` instance ({@link ~ViewWithFocusTracker}),\n\t * the external focus tracker's state ({@link #isFocused}, {@link #focusedElement}) starts contributing to the current tracker instance.\n\t * This allows for increasing the \"reach\" of a focus tracker instance, by connecting two or more focus trackers together when DOM\n\t * elements they track are located in different subtrees in DOM. External focus trackers are listed in {@link #externalViews}.\n\t * * If a {@link module:ui/view~View} instance is passed that has no `FocusTracker` (**not** a {@link ~ViewWithFocusTracker}),\n\t * its {@link module:ui/view~View#element} is used to track focus like any other DOM element.\n\t */ add(elementOrView) {\n        if (isElement(elementOrView)) {\n            this._addElement(elementOrView);\n        } else {\n            if (isViewWithFocusTracker(elementOrView)) {\n                this._addView(elementOrView);\n            } else {\n                if (!elementOrView.element) {\n                    /**\n\t\t\t\t\t * The {@link module:ui/view~View} added to the {@link module:utils/focustracker~FocusTracker} does not have an\n\t\t\t\t\t * {@link module:ui/view~View#element}. Make sure the view is {@link module:ui/view~View#render} before adding\n\t\t\t\t\t * it to the focus tracker.\n\t\t\t\t\t *\n\t\t\t\t\t * @error focustracker-add-view-missing-element\n\t\t\t\t\t */ throw new CKEditorError('focustracker-add-view-missing-element', {\n                        focusTracker: this,\n                        view: elementOrView\n                    });\n                }\n                this._addElement(elementOrView.element);\n            }\n        }\n    }\n    /**\n\t * Stops tracking focus in the specified DOM element or a {@link module:ui/view~View view instance}. See {@link #add} to learn more.\n\t */ remove(elementOrView) {\n        if (isElement(elementOrView)) {\n            this._removeElement(elementOrView);\n        } else {\n            if (isViewWithFocusTracker(elementOrView)) {\n                this._removeView(elementOrView);\n            } else {\n                // Assuming that if the view was successfully added, it must have come with an existing #element.\n                this._removeElement(elementOrView.element);\n            }\n        }\n    }\n    /**\n\t * Adds a DOM element to the focus tracker and starts listening to the `focus` and `blur` events on it.\n\t */ _addElement(element) {\n        if (this._elements.has(element)) {\n            /**\n\t\t\t * This element is already tracked by {@link module:utils/focustracker~FocusTracker}.\n\t\t\t *\n\t\t\t * @error focustracker-add-element-already-exist\n\t\t\t */ throw new CKEditorError('focustracker-add-element-already-exist', this);\n        }\n        this.listenTo(element, 'focus', ()=>{\n            // @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Focus with useCapture on DOM element` );\n            const externalFocusedViewInSubtree = this.externalViews.find((view)=>isExternalViewSubtreeFocused(element, view));\n            if (externalFocusedViewInSubtree) {\n                this._focus(externalFocusedViewInSubtree.element);\n            } else {\n                this._focus(element);\n            }\n        }, {\n            useCapture: true\n        });\n        this.listenTo(element, 'blur', ()=>{\n            // @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Blur with useCapture on DOM element` );\n            this._blur();\n        }, {\n            useCapture: true\n        });\n        this._elements.add(element);\n    }\n    /**\n\t * Removes a DOM element from the focus tracker.\n\t */ _removeElement(element) {\n        if (this._elements.has(element)) {\n            this.stopListening(element);\n            this._elements.delete(element);\n        }\n        if (element === this.focusedElement) {\n            this._blur();\n        }\n    }\n    /**\n\t * Adds an external {@link module:ui/view~View view instance} to this focus tracker and makes it contribute to this focus tracker's\n\t * state either by its `View#element` or by its `View#focusTracker` instance.\n\t */ _addView(view) {\n        if (view.element) {\n            this._addElement(view.element);\n        }\n        this.listenTo(view.focusTracker, 'change:focusedElement', ()=>{\n            // @if CK_DEBUG_FOCUSTRACKER // console.log(\n            // @if CK_DEBUG_FOCUSTRACKER // \t`\"${ getName( this ) }\": Related \"${ getName( view.focusTracker ) }\"#focusedElement = `,\n            // @if CK_DEBUG_FOCUSTRACKER // \tview.focusTracker.focusedElement\n            // @if CK_DEBUG_FOCUSTRACKER // );\n            if (view.focusTracker.focusedElement) {\n                if (view.element) {\n                    this._focus(view.element);\n                }\n            } else {\n                this._blur();\n            }\n        });\n        this._externalViews.add(view);\n    }\n    /**\n\t * Removes an external {@link module:ui/view~View view instance} from this focus tracker.\n\t */ _removeView(view) {\n        if (view.element) {\n            this._removeElement(view.element);\n        }\n        this.stopListening(view.focusTracker);\n        this._externalViews.delete(view);\n    }\n    /**\n\t * Destroys the focus tracker by:\n\t * - Disabling all event listeners attached to tracked elements or external views.\n\t * - Removing all tracked elements and views that were previously added.\n\t */ destroy() {\n        this.stopListening();\n        this._elements.clear();\n        this._externalViews.clear();\n        this.isFocused = false;\n        this.focusedElement = null;\n    }\n    /**\n\t * Stores currently focused element as {@link #focusedElement} and sets {@link #isFocused} `true`.\n\t */ _focus(element) {\n        // @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": _focus() on element`, element );\n        this._clearBlurTimeout();\n        this.focusedElement = element;\n        this.isFocused = true;\n    }\n    /**\n\t * Clears currently {@link #focusedElement} and sets {@link #isFocused} `false`.\n\t *\n\t * This method uses `setTimeout()` to change order of `blur` and `focus` events calls, ensuring that moving focus between\n\t * two elements within a single focus tracker's scope, will not cause `[ blurA, focusB ]` sequence but just `[ focusB ]`.\n\t * The former would cause a momentary change of `#isFocused` to `false` which is not desired because any logic listening to\n\t * a focus tracker state would experience UI flashes and glitches as the user focus travels across the UI.\n\t */ _blur() {\n        const isAnyElementFocused = this.elements.find((element)=>element.contains(document.activeElement));\n        // Avoid blurs originating from external FTs when the focus still remains in one of the #elements.\n        if (isAnyElementFocused) {\n            return;\n        }\n        const isAnyExternalViewFocused = this.externalViews.find((view)=>{\n            // Do not consider external views's focus trackers as focused if there's a blur timeout pending.\n            return view.focusTracker.isFocused && !view.focusTracker._blurTimeout;\n        });\n        // Avoid unnecessary DOM blurs coming from #elements when the focus still remains in one of #externalViews.\n        if (isAnyExternalViewFocused) {\n            return;\n        }\n        this._clearBlurTimeout();\n        this._blurTimeout = setTimeout(()=>{\n            // @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Blur.` );\n            this.focusedElement = null;\n            this.isFocused = false;\n        }, 0);\n    }\n    /**\n\t * Clears the asynchronous blur event timeout on demand. See {@link #_blur} to learn more.\n\t */ _clearBlurTimeout() {\n        clearTimeout(this._blurTimeout);\n        this._blurTimeout = null;\n    }\n}\n/**\n * Checks whether a view is an instance of {@link ~ViewWithFocusTracker}.\n */ function isViewWithFocusTracker(view) {\n    return 'focusTracker' in view && view.focusTracker instanceof FocusTracker;\n}\nfunction isElement(value) {\n    return isElement$1(value);\n}\nfunction isExternalViewSubtreeFocused(subTreeRoot, view) {\n    if (isFocusedView(subTreeRoot, view)) {\n        return true;\n    }\n    return !!view.focusTracker.externalViews.find((view)=>isFocusedView(subTreeRoot, view));\n}\nfunction isFocusedView(subTreeRoot, view) {\n    // Note: You cannot depend on externalView.focusTracker.focusedElement because blurs are asynchronous and the value may\n    // be outdated when moving focus between two elements. Using document.activeElement instead.\n    return !!view.element && view.element.contains(document.activeElement) && subTreeRoot.contains(view.element);\n} // @if CK_DEBUG_FOCUSTRACKER // declare global {\n // @if CK_DEBUG_FOCUSTRACKER // \tinterface Window {\n // @if CK_DEBUG_FOCUSTRACKER // \t\tlogFocusTrackers: Function;\n // @if CK_DEBUG_FOCUSTRACKER // \t}\n // @if CK_DEBUG_FOCUSTRACKER // }\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // function getName( focusTracker: FocusTracker ): string {\n // @if CK_DEBUG_FOCUSTRACKER // \treturn focusTracker._label || 'Unknown';\n // @if CK_DEBUG_FOCUSTRACKER // }\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // function logState(\n // @if CK_DEBUG_FOCUSTRACKER // \tfocusTracker: FocusTracker,\n // @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string> = [ 'isFocused', 'focusedElement' ]\n // @if CK_DEBUG_FOCUSTRACKER // ): string {\n // @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog.forEach( key => { console.log( `${ key }=`, focusTracker[ key ] ) } );\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.log( 'elements', focusTracker.elements );\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.log( 'externalViews', focusTracker.externalViews );\n // @if CK_DEBUG_FOCUSTRACKER // }\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // window.logFocusTrackers = (\n // @if CK_DEBUG_FOCUSTRACKER // \tfilter = () => true,\n // @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string>\n // @if CK_DEBUG_FOCUSTRACKER // ): void => {\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.group( 'FocusTrackers' );\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \tfor ( const focusTracker of FocusTracker._instances ) {\n // @if CK_DEBUG_FOCUSTRACKER // \t\tif ( filter( focusTracker ) ) {\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\tconsole.group( `\"${ getName( focusTracker ) }\"` );\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\tlogState( focusTracker, keysToLog );\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\tconsole.groupEnd();\n // @if CK_DEBUG_FOCUSTRACKER // \t\t}\n // @if CK_DEBUG_FOCUSTRACKER // \t}\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.groupEnd();\n // @if CK_DEBUG_FOCUSTRACKER // };\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // window.logFocusTrackerTree = (\n // @if CK_DEBUG_FOCUSTRACKER // \trootFocusTracker: FocusTracker,\n // @if CK_DEBUG_FOCUSTRACKER // \tfilter = () => true,\n // @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string>\n // @if CK_DEBUG_FOCUSTRACKER // ): void => {\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.group( 'FocusTrackers tree' );\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \tlogBranch( rootFocusTracker, filter );\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \tfunction logBranch( focusTracker, filter ) {\n // @if CK_DEBUG_FOCUSTRACKER // \t\tconsole.group( `\"${ getName( focusTracker ) }\"` );\n // @if CK_DEBUG_FOCUSTRACKER // \t\tlogState( focusTracker, keysToLog );\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \t\tfor ( const externalView of focusTracker.externalViews ) {\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\tif ( filter( externalView.focusTracker ) ) {\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\t\tlogBranch( externalView.focusTracker, filter );\n // @if CK_DEBUG_FOCUSTRACKER // \t\t\t}\n // @if CK_DEBUG_FOCUSTRACKER // \t\t}\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \t\tconsole.groupEnd();\n // @if CK_DEBUG_FOCUSTRACKER // \t}\n // @if CK_DEBUG_FOCUSTRACKER //\n // @if CK_DEBUG_FOCUSTRACKER // \tconsole.groupEnd();\n // @if CK_DEBUG_FOCUSTRACKER // };\n\n/**\n * Keystroke handler allows registering callbacks for given keystrokes.\n *\n * The most frequent use of this class is through the {@link module:core/editor/editor~Editor#keystrokes `editor.keystrokes`}\n * property. It allows listening to keystrokes executed in the editing view:\n *\n * ```ts\n * editor.keystrokes.set( 'Ctrl+A', ( keyEvtData, cancel ) => {\n * \tconsole.log( 'Ctrl+A has been pressed' );\n * \tcancel();\n * } );\n * ```\n *\n * However, this utility class can be used in various part of the UI. For instance, a certain {@link module:ui/view~View}\n * can use it like this:\n *\n * ```ts\n * class MyView extends View {\n * \tconstructor() {\n * \t\tthis.keystrokes = new KeystrokeHandler();\n *\n * \t\tthis.keystrokes.set( 'tab', handleTabKey );\n * \t}\n *\n * \trender() {\n * \t\tsuper.render();\n *\n * \t\tthis.keystrokes.listenTo( this.element );\n * \t}\n * }\n * ```\n *\n * That keystroke handler will listen to `keydown` events fired in this view's main element.\n *\n */ class KeystrokeHandler {\n    /**\n\t * Listener used to listen to events for easier keystroke handler destruction.\n\t */ _listener;\n    /**\n\t * Creates an instance of the keystroke handler.\n\t */ constructor(){\n        this._listener = new (DomEmitterMixin())();\n    }\n    /**\n\t * Starts listening for `keydown` events from a given emitter.\n\t */ listenTo(emitter) {\n        // The #_listener works here as a kind of dispatcher. It groups the events coming from the same\n        // keystroke so the listeners can be attached to them with different priorities.\n        //\n        // E.g. all the keystrokes with the `keyCode` of 42 coming from the `emitter` are propagated\n        // as a `_keydown:42` event by the `_listener`. If there's a callback created by the `set`\n        // method for this 42 keystroke, it listens to the `_listener#_keydown:42` event only and interacts\n        // only with other listeners of this particular event, thus making it possible to prioritize\n        // the listeners and safely cancel execution, when needed. Instead of duplicating the Emitter logic,\n        // the KeystrokeHandler re–uses it to do its job.\n        this._listener.listenTo(emitter, 'keydown', (evt, keyEvtData)=>{\n            this._listener.fire('_keydown:' + getCode(keyEvtData), keyEvtData);\n        });\n    }\n    /**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * @param keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param callback A function called with the\n\t * {@link module:engine/view/observer/keyobserver~ViewDocumentKeyEventData key event data} object and\n\t * a helper function to call both `preventDefault()` and `stopPropagation()` on the underlying event.\n\t * @param options Additional options.\n\t */ set(keystroke, callback, options = {}) {\n        const keyCode = parseKeystroke(keystroke);\n        const priority = options.priority;\n        // Execute the passed callback on KeystrokeHandler#_keydown.\n        // TODO: https://github.com/ckeditor/ckeditor5-utils/issues/144\n        this._listener.listenTo(this._listener, '_keydown:' + keyCode, (evt, keyEvtData)=>{\n            if (options.filter && !options.filter(keyEvtData)) {\n                return;\n            }\n            callback(keyEvtData, ()=>{\n                // Stop the event in the DOM: no listener in the web page\n                // will be triggered by this event.\n                keyEvtData.preventDefault();\n                keyEvtData.stopPropagation();\n                // Stop the event in the KeystrokeHandler: no more callbacks\n                // will be executed for this keystroke.\n                evt.stop();\n            });\n            // Mark this keystroke as handled by the callback. See: #press.\n            evt.return = true;\n        }, {\n            priority\n        });\n    }\n    /**\n\t * Triggers a keystroke handler for a specified key combination, if such a keystroke was {@link #set defined}.\n\t *\n\t * @param keyEvtData Key event data.\n\t * @returns Whether the keystroke was handled.\n\t */ press(keyEvtData) {\n        return !!this._listener.fire('_keydown:' + getCode(keyEvtData), keyEvtData);\n    }\n    /**\n\t * Stops listening to `keydown` events from the given emitter.\n\t */ stopListening(emitter) {\n        this._listener.stopListening(emitter);\n    }\n    /**\n\t * Destroys the keystroke handler.\n\t */ destroy() {\n        this.stopListening();\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/objecttomap\n */ /**\n * Transforms object to map.\n *\n * ```ts\n * const map = objectToMap( { 'foo': 1, 'bar': 2 } );\n * map.get( 'foo' ); // 1\n * ```\n *\n * **Note**: For mixed data (`Object` or `Iterable`) there's a dedicated {@link module:utils/tomap~toMap} function.\n *\n * @param obj Object to transform.\n * @returns Map created from object.\n */ function objectToMap(obj) {\n    const map = new Map();\n    for(const key in obj){\n        map.set(key, obj[key]);\n    }\n    return map;\n}\n\n/**\n * Transforms object or iterable to map. Iterable needs to be in the format acceptable by the `Map` constructor.\n *\n * ```ts\n * map = toMap( { 'foo': 1, 'bar': 2 } );\n * map = toMap( [ [ 'foo', 1 ], [ 'bar', 2 ] ] );\n * map = toMap( anotherMap );\n * ```\n *\n * @param data Object or iterable to transform.\n * @returns Map created from data.\n */ function toMap(data) {\n    if (isIterable(data)) {\n        return new Map(data);\n    } else {\n        return objectToMap(data);\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/mapsequal\n */ /**\n * Checks whether given `Map`s are equal, that is has same size and same key-value pairs.\n *\n * @param mapA The first map to compare.\n * @param mapB The second map to compare.\n * @returns `true` if given maps are equal, `false` otherwise.\n */ function mapsEqual(mapA, mapB) {\n    if (mapA.size != mapB.size) {\n        return false;\n    }\n    for (const attr of mapA.entries()){\n        const valA = JSON.stringify(attr[1]);\n        const valB = JSON.stringify(mapB.get(attr[0]));\n        if (valA !== valB) {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/wait\n */ /**\n * Returns a promise that is resolved after the specified time.\n *\n * @param timeout The time in milliseconds to wait.\n * @param options.signal A signal to abort the waiting.\n */ function wait(timeout, options = {}) {\n    return new Promise((resolve, reject)=>{\n        const signal = options.signal || new AbortController().signal;\n        signal.throwIfAborted();\n        const timer = setTimeout(timeoutHandler, timeout);\n        signal.addEventListener('abort', abortHandler, {\n            once: true\n        });\n        function timeoutHandler() {\n            signal.removeEventListener('abort', abortHandler);\n            resolve();\n        }\n        function abortHandler() {\n            clearTimeout(timer);\n            reject(signal.reason);\n        }\n    });\n}\n\n/**\n * Tries calling the given callback until it sucessfully resolves.\n *\n * If the callback fails `maxAttempts` times, the returned promise is rejected with the last error.\n *\n * @typeParam TResult The result of a successful callback invocation.\n * @param callback The function to call until it succeeds.\n * @param options Configuration options.\n * @param options.maxAttempts Maximum number of attempts.\n * @param options.retryDelay The time in milliseconds between attempts. By default it implements exponential back-off policy.\n * @param options.signal The signal to abort further retries. The callback itself is not aborted automatically.\n */ async function retry(callback, options = {}) {\n    const { maxAttempts = 4, retryDelay = exponentialDelay(), signal = new AbortController().signal } = options;\n    signal.throwIfAborted();\n    for(let attempt = 0;; attempt++){\n        try {\n            return await callback();\n        } catch (err) {\n            const isLast = attempt + 1 >= maxAttempts;\n            if (isLast) {\n                throw err;\n            }\n        }\n        await wait(retryDelay(attempt), {\n            signal\n        });\n    }\n}\n/**\n * Creates a function that calculates exponential back-off delay. Pass it as `options.retryDelay` to {@link ~retry}.\n *\n * @param options.delay Base delay between invocations. Defaults to 1s.\n * @param options.factor How much to increase the delay. Defaults to 2x.\n * @param options.maxDelay Maximum timeout. Even if higher timeout is calculated, it cannot get higher than this value. Default to 10s.\n * @returns The function calculating the delay.\n */ function exponentialDelay(options = {}) {\n    const { delay = 1000, factor = 2, maxDelay = 10000 } = options;\n    return (attempt)=>Math.min(factor ** attempt * delay, maxDelay);\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/splicearray\n */ /**\n * Splices one array into another. To be used instead of `Array.prototype.splice` for better\n * performance and because the latter may throw \"Maximum call stack size exceeded\" error when\n * passing huge number of items to insert.\n *\n * ```ts\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 0 );\t// [ 3, 4, 1, 2 ]\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 1 );\t// [ 1, 3, 4, 2 ]\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 2 );\t// [ 1, 2, 3, 4 ]\n * spliceArray( [ 1, 2 ], [],       0 );\t// [ 1, 2 ]\n * ```\n *\n * @param targetArray Array to be spliced.\n * @param insertArray Array of elements to be inserted to target.\n * @param index Index at which nodes should be inserted.\n *\n * @returns New spliced array.\n */ function spliceArray(targetArray, insertArray, index) {\n    const originalLength = targetArray.length;\n    const insertLength = insertArray.length;\n    // Shift elements in the target array to make space for insertArray\n    for(let i = originalLength - 1; i >= index; i--){\n        targetArray[i + insertLength] = targetArray[i];\n    }\n    // Copy elements from insertArray into the target array\n    for(let i = 0; i < insertLength; i++){\n        targetArray[index + i] = insertArray[i];\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/delay\n */ /**\n * Returns a function wrapper that will trigger a function after a specified wait time.\n * The timeout can be canceled by calling the cancel function on the returned wrapped function.\n *\n * @param func The function to wrap.\n * @param wait The timeout in ms.\n */ function delay(func, wait) {\n    let timer;\n    function delayed(...args) {\n        delayed.cancel();\n        timer = setTimeout(()=>func(...args), wait);\n    }\n    delayed.cancel = ()=>{\n        clearTimeout(timer);\n    };\n    return delayed;\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/parsebase64encodedobject\n */ /**\n * Parses a base64-encoded object and returns the decoded object, or null if the decoding was unsuccessful.\n */ function parseBase64EncodedObject(encoded) {\n    try {\n        if (!encoded.startsWith('ey')) {\n            return null;\n        }\n        const decoded = atob(encoded.replace(/-/g, '+').replace(/_/g, '/'));\n        return JSON.parse(decoded);\n    } catch  {\n        return null;\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/crc32\n */ /**\n * Generates a CRC lookup table.\n * This function creates and returns a 256-element array of pre-computed CRC values for quick CRC calculation.\n * It uses the polynomial 0xEDB88320 to compute each value in the loop, optimizing future CRC calculations.\n */ function makeCrcTable() {\n    const crcTable = [];\n    for(let n = 0; n < 256; n++){\n        let c = n;\n        for(let k = 0; k < 8; k++){\n            if (c & 1) {\n                c = 0xEDB88320 ^ c >>> 1;\n            } else {\n                c = c >>> 1;\n            }\n        }\n        crcTable[n] = c;\n    }\n    return crcTable;\n}\n/**\n * Calculates CRC-32 checksum for a given inputData to verify the integrity of data.\n *\n * @param inputData Accepts a single value (string, number, boolean), an array of strings, or an array of all of the above types.\n * Non-string values are converted to strings before calculating the checksum.\n * The checksum calculation is based on the concatenated string representation of the input values:\n * * `crc32('foo')` is equivalent to `crc32(['foo'])`\n * * `crc32(123)` is equivalent to `crc32(['123'])`\n * * `crc32(true)` is equivalent to `crc32(['true'])`\n * * `crc32(['foo', 123, true])` produces the same result as `crc32('foo123true')`\n * * Nested arrays of strings are flattened, so `crc32([['foo', 'bar'], 'baz'])` is equivalent to `crc32(['foobar', 'baz'])`\n *\n * @returns The CRC-32 checksum, returned as a hexadecimal string.\n */ function crc32(inputData) {\n    const dataArray = Array.isArray(inputData) ? inputData : [\n        inputData\n    ];\n    const crcTable = makeCrcTable();\n    let crc = 0 ^ -1;\n    // Convert data to a single string.\n    const dataString = dataArray.map((item)=>{\n        if (Array.isArray(item)) {\n            return item.join('');\n        }\n        return String(item);\n    }).join('');\n    // Calculate the CRC for the resulting string.\n    for(let i = 0; i < dataString.length; i++){\n        const byte = dataString.charCodeAt(i);\n        crc = crc >>> 8 ^ crcTable[(crc ^ byte) & 0xFF];\n    }\n    crc = (crc ^ -1) >>> 0; // Force unsigned integer.\n    return crc.toString(16).padStart(8, '0');\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/collectstylesheets\n */ /**\n * A helper function for getting concatenated CSS rules from external stylesheets.\n *\n * @param stylesheets An array of stylesheet paths delivered by the user through the plugin configuration.\n */ async function collectStylesheets(stylesheets) {\n    if (!stylesheets) {\n        return '';\n    }\n    const results = await Promise.all(stylesheets.map(async (stylesheet)=>{\n        if (stylesheet === 'EDITOR_STYLES') {\n            return getEditorStyles();\n        }\n        const response = await window.fetch(stylesheet);\n        return response.text();\n    }));\n    return results.join(' ').trim();\n}\n/**\n * A helper function for getting the basic editor content styles for the `.ck-content` class\n * and all CSS variables defined in the document.\n */ function getEditorStyles() {\n    const editorStyles = [];\n    const editorCSSVariables = [];\n    for (const styleSheet of Array.from(document.styleSheets)){\n        const ownerNode = styleSheet.ownerNode;\n        if (ownerNode.hasAttribute('data-cke')) {\n            for (const rule of Array.from(styleSheet.cssRules)){\n                if (rule.cssText.indexOf('.ck-content') !== -1) {\n                    editorStyles.push(rule.cssText);\n                } else if (rule.cssText.indexOf(':root') !== -1) {\n                    editorCSSVariables.push(rule.cssText);\n                }\n            }\n        }\n    }\n    if (!editorStyles.length) {\n        console.warn('The editor stylesheet could not be found in the document. ' + 'Check your webpack config - style-loader should use data-cke=true attribute for the editor stylesheet.');\n    }\n    // We want to trim the returned value in case of `[ \"\", \"\", ... ]`.\n    return [\n        ...editorCSSVariables,\n        ...editorStyles\n    ].join(' ').trim();\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * @module utils/formathtml\n */ /**\n * A simple (and naive) HTML code formatter that returns a formatted HTML markup that can be easily\n * parsed by human eyes. It beautifies the HTML code by adding new lines between elements that behave like block elements\n * (https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\n * and a few more like `tr`, `td`, and similar ones) and inserting indents for nested content.\n *\n * WARNING: This function works only on a text that does not contain any indentations or new lines.\n * Calling this function on the already formatted text will damage the formatting.\n *\n * @param input An HTML string to format.\n */ function formatHtml(input) {\n    // A list of block-like elements around which the new lines should be inserted, and within which\n    // the indentation of their children should be increased.\n    // The list is partially based on https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements that contains\n    // a full list of HTML block-level elements.\n    // A void element is an element that cannot have any child - https://html.spec.whatwg.org/multipage/syntax.html#void-elements.\n    // Note that <pre> element is not listed on this list to avoid breaking whitespace formatting.\n    // Note that <br> element is not listed and handled separately so no additional white spaces are injected.\n    const elementsToFormat = [\n        {\n            name: 'address',\n            isVoid: false\n        },\n        {\n            name: 'article',\n            isVoid: false\n        },\n        {\n            name: 'aside',\n            isVoid: false\n        },\n        {\n            name: 'blockquote',\n            isVoid: false\n        },\n        {\n            name: 'details',\n            isVoid: false\n        },\n        {\n            name: 'dialog',\n            isVoid: false\n        },\n        {\n            name: 'dd',\n            isVoid: false\n        },\n        {\n            name: 'div',\n            isVoid: false\n        },\n        {\n            name: 'dl',\n            isVoid: false\n        },\n        {\n            name: 'dt',\n            isVoid: false\n        },\n        {\n            name: 'fieldset',\n            isVoid: false\n        },\n        {\n            name: 'figcaption',\n            isVoid: false\n        },\n        {\n            name: 'figure',\n            isVoid: false\n        },\n        {\n            name: 'footer',\n            isVoid: false\n        },\n        {\n            name: 'form',\n            isVoid: false\n        },\n        {\n            name: 'h1',\n            isVoid: false\n        },\n        {\n            name: 'h2',\n            isVoid: false\n        },\n        {\n            name: 'h3',\n            isVoid: false\n        },\n        {\n            name: 'h4',\n            isVoid: false\n        },\n        {\n            name: 'h5',\n            isVoid: false\n        },\n        {\n            name: 'h6',\n            isVoid: false\n        },\n        {\n            name: 'header',\n            isVoid: false\n        },\n        {\n            name: 'hgroup',\n            isVoid: false\n        },\n        {\n            name: 'hr',\n            isVoid: true\n        },\n        {\n            name: 'li',\n            isVoid: false\n        },\n        {\n            name: 'main',\n            isVoid: false\n        },\n        {\n            name: 'nav',\n            isVoid: false\n        },\n        {\n            name: 'ol',\n            isVoid: false\n        },\n        {\n            name: 'p',\n            isVoid: false\n        },\n        {\n            name: 'section',\n            isVoid: false\n        },\n        {\n            name: 'table',\n            isVoid: false\n        },\n        {\n            name: 'tbody',\n            isVoid: false\n        },\n        {\n            name: 'td',\n            isVoid: false\n        },\n        {\n            name: 'th',\n            isVoid: false\n        },\n        {\n            name: 'thead',\n            isVoid: false\n        },\n        {\n            name: 'tr',\n            isVoid: false\n        },\n        {\n            name: 'ul',\n            isVoid: false\n        }\n    ];\n    const elementNamesToFormat = elementsToFormat.map((element)=>element.name).join('|');\n    // It is not the fastest way to format the HTML markup but the performance should be good enough.\n    const lines = input// Add new line before and after `<tag>` and `</tag>`.\n    // It may separate individual elements with two new lines, but this will be fixed below.\n    .replace(new RegExp(`</?(${elementNamesToFormat})( .*?)?>`, 'g'), '\\n$&\\n')// Keep `<br>`s at the end of line to avoid adding additional whitespaces before `<br>`.\n    .replace(/<br[^>]*>/g, '$&\\n')// Divide input string into lines, which start with either an opening tag, a closing tag, or just a text.\n    .split('\\n');\n    let indentCount = 0;\n    let isPreformattedLine = false;\n    return lines.map((line)=>{\n        isPreformattedLine = isPreformattedBlockLine(line, isPreformattedLine);\n        // Ignore empty lines outside a <pre> block.\n        if (!line.length && !isPreformattedLine) {\n            return '';\n        }\n        if (isNonVoidOpeningTag(line, elementsToFormat)) {\n            return indentLine(line, indentCount++);\n        }\n        if (isClosingTag(line, elementsToFormat)) {\n            return indentLine(line, --indentCount);\n        }\n        if (isPreformattedLine === 'middle' || isPreformattedLine === 'last') {\n            return indentLine(line, 0);\n        }\n        return indentLine(line, indentCount);\n    }).join('').trimEnd();\n}\n/**\n * Checks, if an argument is an opening tag of a non-void element to be formatted.\n *\n * @param line String to check.\n * @param elementsToFormat Elements to be formatted.\n */ function isNonVoidOpeningTag(line, elementsToFormat) {\n    return elementsToFormat.some((element)=>{\n        if (element.isVoid) {\n            return false;\n        }\n        if (!new RegExp(`<${element.name}( .*?)?>`).test(line)) {\n            return false;\n        }\n        return true;\n    });\n}\n/**\n * Checks, if an argument is a closing tag.\n *\n * @param line String to check.\n * @param elementsToFormat Elements to be formatted.\n */ function isClosingTag(line, elementsToFormat) {\n    return elementsToFormat.some((element)=>{\n        return new RegExp(`</${element.name}>`).test(line);\n    });\n}\n/**\n * Indents a line by a specified number of characters.\n *\n * @param line Line to indent.\n * @param indentCount Number of characters to use for indentation.\n * @param indentChar Indentation character(s). 4 spaces by default.\n */ function indentLine(line, indentCount, indentChar = '    ') {\n    // More about Math.max() here in https://github.com/ckeditor/ckeditor5/issues/10698.\n    return `${indentChar.repeat(Math.max(0, indentCount))}${line}\\n`;\n}\n/**\n * Checks whether a line belongs to a preformatted (`<pre>`) block.\n *\n * @param line Line to check.\n * @param isPreviousLinePreFormatted Information on whether the previous line was preformatted (and how).\n */ function isPreformattedBlockLine(line, isPreviousLinePreFormatted) {\n    const isPreOpen = /<pre( .*?)?>/.test(line);\n    const isPreClose = /<\\/pre>/.test(line);\n    if (isPreOpen && isPreClose) {\n        // If both an opening and closing a <pre> tag, no special treatment needed.\n        return false;\n    } else if (isPreOpen) {\n        return 'first';\n    } else if (isPreClose) {\n        return 'last';\n    } else if (isPreviousLinePreFormatted === 'first' || isPreviousLinePreFormatted === 'middle') {\n        // This line is just after a 'first' or 'middle' line of a multi-line pre-block.\n        return 'middle';\n    } else {\n        return false;\n    }\n}\n\n/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */ /**\n * Set of utils to handle unicode characters.\n *\n * @module utils/unicode\n */ /**\n * Checks whether given `character` is a combining mark.\n *\n * @param character Character to check.\n */ function isCombiningMark(character) {\n    // eslint-disable-next-line no-misleading-character-class\n    return !!character && character.length == 1 && /[\\u0300-\\u036f\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\u20d0-\\u20ff\\ufe20-\\ufe2f]/.test(character);\n}\n/**\n * Checks whether given `character` is a high half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param character Character to check.\n */ function isHighSurrogateHalf(character) {\n    return !!character && character.length == 1 && /[\\ud800-\\udbff]/.test(character);\n}\n/**\n * Checks whether given `character` is a low half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param character Character to check.\n */ function isLowSurrogateHalf(character) {\n    return !!character && character.length == 1 && /[\\udc00-\\udfff]/.test(character);\n}\n/**\n * Checks whether given offset in a string is inside a surrogate pair (between two surrogate halves).\n *\n * @param string String to check.\n * @param offset Offset to check.\n */ function isInsideSurrogatePair(string, offset) {\n    return isHighSurrogateHalf(string.charAt(offset - 1)) && isLowSurrogateHalf(string.charAt(offset));\n}\n/**\n * Checks whether given offset in a string is between base character and combining mark or between two combining marks.\n *\n * @param string String to check.\n * @param offset Offset to check.\n */ function isInsideCombinedSymbol(string, offset) {\n    return isCombiningMark(string.charAt(offset));\n}\nconst EMOJI_PATTERN = /* #__PURE__ */ buildEmojiRegexp();\n/**\n * Checks whether given offset in a string is inside multi-character emoji sequence.\n *\n * @param string String to check.\n * @param offset Offset to check.\n */ function isInsideEmojiSequence(string, offset) {\n    const matches = String(string).matchAll(EMOJI_PATTERN);\n    return Array.from(matches).some((match)=>match.index < offset && offset < match.index + match[0].length);\n}\nfunction buildEmojiRegexp() {\n    const parts = [\n        // Emoji Tag Sequence (ETS)\n        /\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}/u,\n        // Emoji Keycap Sequence\n        /\\p{Emoji}\\u{FE0F}?\\u{20E3}/u,\n        // Emoji Presentation Sequence\n        /\\p{Emoji}\\u{FE0F}/u,\n        // Single-Character Emoji / Emoji Modifier Sequence\n        /(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*/u\n    ];\n    const flagSequence = /\\p{Regional_Indicator}{2}/u.source;\n    const emoji = '(?:' + parts.map((part)=>part.source).join('|') + ')';\n    const sequence = `${flagSequence}|${emoji}(?:\\u{200D}${emoji})*`;\n    return new RegExp(sequence, 'ug');\n}\n\nexport { CKEditorError, Collection, Config, DOCUMENTATION_URL, DomEmitterMixin, ElementReplacer, EmitterMixin, EventInfo, FocusTracker, KeystrokeHandler, Locale, ObservableMixin, Rect, ResizeObserver, _clear as _clearTranslations, _getEmitterId, _getEmitterListenedTo, getUserAgent as _getUserAgent, isAndroid as _isAndroid, isBlink as _isBlink, isGecko as _isGecko, isMac as _isMac, isMediaForcedColors as _isMediaForcedColors, isMotionReduced as _isMotionReduced, isRegExpUnicodePropertySupported as _isRegExpUnicodePropertySupported, isSafari as _isSafari, isWindows as _isWindows, isiOS as _isiOS, _setEmitterId, _translate, _unifyTranslations, abortableDebounce, add, areConnectedThroughProperties, collectStylesheets, compareArrays, count, crc32, createElement, delay, diff, diffToChanges, env, exponentialDelay, fastDiff, findClosestScrollableAncestor, first, formatHtml, getAncestors, getBorderWidths, getCode, getCommonAncestor, getDataFromElement, getEnvKeystrokeText, getLanguageDirection, getLocalizedArrowKeyCodeDirection, getOptimalPosition, getPositionedAncestor, getRangeFromMouseEvent, getVisualViewportOffset, globalVar as global, indexOf, insertAt, insertToPriorityArray, isArrowKeyCode, isCombiningMark, isComment, isForwardArrowKeyCode, isHighSurrogateHalf, isInsideCombinedSymbol, isInsideEmojiSequence, isInsideSurrogatePair, isIterable, isLowSurrogateHalf, isNode, isRange, isText, isValidAttributeName, isViewWithFocusTracker, isVisible, isWindow, keyCodes, logError, logWarning, mapsEqual, nth, objectToMap, parseBase64EncodedObject, parseKeystroke, priorities, releaseDate, remove, retry, scrollAncestorsToShowTarget, scrollViewportToShowTarget, setDataInElement, spliceArray, spy, toArray, toMap, toUnit, uid, version, wait };\n//# sourceMappingURL=index.js.map\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/global\n */\n\n// This interface exists to make our API pages more readable.\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and `document`.\n */\nexport interface GlobalType {\n\treadonly window: Window & typeof globalThis;\n\treadonly document: Document;\n}\n\n/**\n * A helper (module) giving an access to the global DOM objects such as `window` and\n * `document`. Accessing these objects using this helper allows easy and bulletproof\n * testing, i.e. stubbing native properties:\n *\n * ```ts\n * import { global } from 'ckeditor5/utils';\n *\n * // This stub will work for any code using global module.\n * testUtils.sinon.stub( global, 'window', {\n * \tinnerWidth: 10000\n * } );\n *\n * console.log( global.window.innerWidth );\n * ```\n */\nlet globalVar: GlobalType; // named globalVar instead of global: https://github.com/ckeditor/ckeditor5/issues/12971\n\n// In some environments window and document API might not be available.\ntry {\n\tglobalVar = { window, document };\n} catch {\n\t// It's not possible to mock a window object to simulate lack of a window object without writing extremely convoluted code.\n\t/* istanbul ignore next -- @preserve */\n\n\t// Let's cast it to not change module's API.\n\t// We only handle this so loading editor in environments without window and document doesn't fail.\n\t// For better DX we shouldn't introduce mixed types and require developers to check the type manually.\n\t// This module should not be used on purpose in any environment outside browser.\n\tglobalVar = { window: {} as any, document: {} as any };\n}\n\nexport { globalVar as global };\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/env\n */\n\nimport { global } from './dom/global.js';\n\n/**\n * Safely returns `userAgent` from browser's navigator API in a lower case.\n * If navigator API is not available it will return an empty string.\n *\n * @internal\n */\nexport function getUserAgent(): string {\n\t// In some environments navigator API might not be available.\n\ttry {\n\t\treturn navigator.userAgent.toLowerCase();\n\t} catch {\n\t\treturn '';\n\t}\n}\n\nconst userAgent = /* #__PURE__ */ getUserAgent();\n\n// This interface exists to make our API pages more readable.\n/**\n * A namespace containing environment and browser information.\n */\nexport interface EnvType {\n\n\t/**\n\t * Indicates that the application is running on Macintosh.\n\t */\n\treadonly isMac: boolean;\n\n\t/**\n\t * Indicates that the application is running on Windows.\n\t */\n\treadonly isWindows: boolean;\n\n\t/**\n\t * Indicates that the application is running in Firefox (Gecko).\n\t */\n\treadonly isGecko: boolean;\n\n\t/**\n\t * Indicates that the application is running in Safari.\n\t */\n\treadonly isSafari: boolean;\n\n\t/**\n\t * Indicates that the application is running in iOS.\n\t */\n\treadonly isiOS: boolean;\n\n\t/**\n\t * Indicates that the application is running on Android mobile device.\n\t */\n\treadonly isAndroid: boolean;\n\n\t/**\n\t * Indicates that the application is running in a browser using the Blink engine.\n\t */\n\treadonly isBlink: boolean;\n\n\t/**\n\t * Indicates that the user agent has enabled a forced colors mode (e.g. Windows High Contrast mode).\n\t *\n\t * Note that the value of this property is evaluated each time it is accessed, and it may change over time, if the environment\n\t * settings have changed.\n\t */\n\treadonly isMediaForcedColors: boolean;\n\n\t/**\n\t * Indicates that \"prefer reduced motion\" browser setting is active.\n\t *\n\t * Note that the value of this property is evaluated each time it is accessed, and it may change over time, if the environment\n\t * settings have changed.\n\t */\n\treadonly isMotionReduced: boolean;\n\n\t/**\n\t * Environment features information.\n\t */\n\treadonly features: EnvFeaturesType;\n}\n\nexport interface EnvFeaturesType {\n\n\t/**\n\t * Indicates that the environment supports ES2018 Unicode property escapes — like `\\p{P}` or `\\p{L}`.\n\t * More information about unicode properties might be found\n\t * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n\t */\n\treadonly isRegExpUnicodePropertySupported: boolean;\n}\n\n/**\n * A namespace containing environment and browser information.\n */\nexport const env: EnvType = {\n\tisMac: /* #__PURE__ */ isMac( userAgent ),\n\n\tisWindows: /* #__PURE__ */ isWindows( userAgent ),\n\n\tisGecko: /* #__PURE__ */ isGecko( userAgent ),\n\n\tisSafari: /* #__PURE__ */ isSafari( userAgent ),\n\n\tisiOS: /* #__PURE__ */ isiOS( userAgent ),\n\n\tisAndroid: /* #__PURE__ */ isAndroid( userAgent ),\n\n\tisBlink: /* #__PURE__ */ isBlink( userAgent ),\n\n\tget isMediaForcedColors() {\n\t\treturn isMediaForcedColors();\n\t},\n\n\tget isMotionReduced() {\n\t\treturn isMotionReduced();\n\t},\n\n\tfeatures: {\n\t\tisRegExpUnicodePropertySupported: /* #__PURE__ */ isRegExpUnicodePropertySupported()\n\t}\n};\n\n/**\n * Checks if User Agent represented by the string is running on Macintosh.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running on Macintosh or not.\n */\nexport function isMac( userAgent: string ): boolean {\n\treturn userAgent.indexOf( 'macintosh' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is running on Windows.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running on Windows or not.\n */\nexport function isWindows( userAgent: string ): boolean {\n\treturn userAgent.indexOf( 'windows' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Firefox (Gecko).\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Firefox or not.\n */\nexport function isGecko( userAgent: string ): boolean {\n\treturn !!userAgent.match( /gecko\\/\\d+/ );\n}\n\n/**\n * Checks if User Agent represented by the string is Safari.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Safari or not.\n */\nexport function isSafari( userAgent: string ): boolean {\n\treturn userAgent.indexOf( ' applewebkit/' ) > -1 && userAgent.indexOf( 'chrome' ) === -1;\n}\n\n/**\n * Checks if User Agent represented by the string is running in iOS.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is running in iOS or not.\n */\nexport function isiOS( userAgent: string ): boolean {\n\t// \"Request mobile site\" || \"Request desktop site\".\n\treturn !!userAgent.match( /iphone|ipad/i ) || ( isMac( userAgent ) && navigator.maxTouchPoints > 0 );\n}\n\n/**\n * Checks if User Agent represented by the string is Android mobile device.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Safari or not.\n */\nexport function isAndroid( userAgent: string ): boolean {\n\treturn userAgent.indexOf( 'android' ) > -1;\n}\n\n/**\n * Checks if User Agent represented by the string is Blink engine.\n *\n * @internal\n * @param userAgent **Lowercase** `navigator.userAgent` string.\n * @returns Whether User Agent is Blink engine or not.\n */\nexport function isBlink( userAgent: string ): boolean {\n\t// The Edge browser before switching to the Blink engine used to report itself as Chrome (and \"Edge/\")\n\t// but after switching to the Blink it replaced \"Edge/\" with \"Edg/\".\n\treturn userAgent.indexOf( 'chrome/' ) > -1 && userAgent.indexOf( 'edge/' ) < 0;\n}\n\n/**\n * Checks if the current environment supports ES2018 Unicode properties like `\\p{P}` or `\\p{L}`.\n * More information about unicode properties might be found\n * [in Unicode Standard Annex #44](https://www.unicode.org/reports/tr44/#GC_Values_Table).\n *\n * @internal\n */\nexport function isRegExpUnicodePropertySupported(): boolean {\n\tlet isSupported = false;\n\n\t// Feature detection for Unicode properties. Added in ES2018. Currently Firefox does not support it.\n\t// See https://github.com/ckeditor/ckeditor5-mention/issues/44#issuecomment-487002174.\n\n\ttry {\n\t\t// Usage of regular expression literal cause error during build (ckeditor/ckeditor5-dev#534).\n\t\tisSupported = 'ć'.search( new RegExp( '[\\\\p{L}]', 'u' ) ) === 0;\n\t} catch {\n\t\t// Firefox throws a SyntaxError when the group is unsupported.\n\t}\n\n\treturn isSupported;\n}\n\n/**\n * Checks if the user agent has enabled a forced colors mode (e.g. Windows High Contrast mode).\n *\n * Returns `false` in environments where `window` global object is not available.\n *\n * @internal\n */\nexport function isMediaForcedColors(): boolean {\n\treturn global.window.matchMedia ? global.window.matchMedia( '(forced-colors: active)' ).matches : false;\n}\n\n/**\n * Checks if the user enabled \"prefers reduced motion\" setting in browser.\n *\n * Returns `false` in environments where `window` global object is not available.\n *\n * @internal\n */\nexport function isMotionReduced(): boolean {\n\treturn global.window.matchMedia ? global.window.matchMedia( '(prefers-reduced-motion)' ).matches : false;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\nimport type { DiffResult } from './diff.js';\nimport type { Change } from './difftochanges.js';\n\n/**\n * @module utils/fastdiff\n */\n\n/**\n * Finds positions of the first and last change in the given string/array and generates a set of changes:\n *\n * ```ts\n * fastDiff( '12a', '12xyza' );\n * // [ { index: 2, type: 'insert', values: [ 'x', 'y', 'z' ] } ]\n *\n * fastDiff( '12a', '12aa' );\n * // [ { index: 3, type: 'insert', values: [ 'a' ] } ]\n *\n * fastDiff( '12xyza', '12a' );\n * // [ { index: 2, type: 'delete', howMany: 3 } ]\n *\n * fastDiff( [ '1', '2', 'a', 'a' ], [ '1', '2', 'a' ] );\n * // [ { index: 3, type: 'delete', howMany: 1 } ]\n *\n * fastDiff( [ '1', '2', 'a', 'b', 'c', '3' ], [ '2', 'a', 'b' ] );\n * // [ { index: 0, type: 'insert', values: [ '2', 'a', 'b' ] }, { index: 3, type: 'delete', howMany: 6 } ]\n * ```\n *\n * Passed arrays can contain any type of data, however to compare them correctly custom comparator function\n * should be passed as a third parameter:\n *\n * ```ts\n * fastDiff( [ { value: 1 }, { value: 2 } ], [ { value: 1 }, { value: 3 } ], ( a, b ) => {\n * \treturn a.value === b.value;\n * } );\n * // [ { index: 1, type: 'insert', values: [ { value: 3 } ] }, { index: 2, type: 'delete', howMany: 1 } ]\n * ```\n *\n * The resulted set of changes can be applied to the input in order to transform it into the output, for example:\n *\n * ```ts\n * let input = '12abc3';\n * const output = '2ab';\n * const changes = fastDiff( input, output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput = input.substring( 0, change.index ) + change.values.join( '' ) + input.substring( change.index );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput = input.substring( 0, change.index ) + input.substring( change.index + change.howMany );\n * \t}\n * } );\n *\n * // input equals output now\n * ```\n *\n * or in case of arrays:\n *\n * ```ts\n * let input = [ '1', '2', 'a', 'b', 'c', '3' ];\n * const output = [ '2', 'a', 'b' ];\n * const changes = fastDiff( input, output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput = input.slice( 0, change.index ).concat( change.values, input.slice( change.index ) );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput = input.slice( 0, change.index ).concat( input.slice( change.index + change.howMany ) );\n * \t}\n * } );\n *\n * // input equals output now\n * ```\n *\n * By passing `true` as the fourth parameter (`atomicChanges`) the output of this function will become compatible with\n * the {@link module:utils/diff~diff `diff()`} function:\n *\n * ```ts\n * fastDiff( '12a', '12xyza', undefined, true );\n * // [ 'equal', 'equal', 'insert', 'insert', 'insert', 'equal' ]\n * ```\n *\n * The default output format of this function is compatible with the output format of\n * {@link module:utils/difftochanges~diffToChanges `diffToChanges()`}. The `diffToChanges()` input format is, in turn,\n * compatible with the output of {@link module:utils/diff~diff `diff()`}:\n *\n * ```ts\n * const a = '1234';\n * const b = '12xyz34';\n *\n * // Both calls will return the same results (grouped changes format).\n * fastDiff( a, b );\n * diffToChanges( diff( a, b ) );\n *\n * // Again, both calls will return the same results (atomic changes format).\n * fastDiff( a, b, undefined, true );\n * diff( a, b );\n * ```\n *\n * @typeParam T The type of array elements.\n * @typeParam AtomicChanges The type of `atomicChanges` parameter (selects the result type).\n * @param a Input array or string.\n * @param b Input array or string.\n * @param cmp Optional function used to compare array values, by default `===` (strict equal operator) is used.\n * @param atomicChanges Whether an array of `inset|delete|equal` operations should\n * be returned instead of changes set. This makes this function compatible with {@link module:utils/diff~diff `diff()`}.\n * Defaults to `false`.\n * @returns Array of changes. The elements are either {@link module:utils/diff~DiffResult} or {@link module:utils/difftochanges~Change},\n * depending on `atomicChanges` parameter.\n */\nexport function fastDiff<T, AtomicChanges extends boolean = false>(\n\ta: ArrayLike<T>,\n\tb: ArrayLike<T>,\n\tcmp?: ( a: T, b: T ) => boolean,\n\tatomicChanges?: AtomicChanges\n): Array<AtomicChanges extends true ? DiffResult : Change<T>> {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\t// Convert the string (or any array-like object - eg. NodeList) to an array by using the slice() method because,\n\t// unlike Array.from(), it returns array of UTF-16 code units instead of the code points of a string.\n\t// One code point might be a surrogate pair of two code units. All text offsets are expected to be in code units.\n\t// See ckeditor/ckeditor5#3147.\n\t//\n\t// We need to make sure here that fastDiff() works identical to diff().\n\tconst arrayA: Array<T> = Array.isArray( a ) ? a : Array.prototype.slice.call( a );\n\tconst arrayB: Array<T> = Array.isArray( b ) ? b : Array.prototype.slice.call( b );\n\n\t// Find first and last change.\n\tconst changeIndexes = findChangeBoundaryIndexes( arrayA, arrayB, cmp );\n\n\t// Transform into changes array.\n\tconst result = atomicChanges ?\n\t\tchangeIndexesToAtomicChanges( changeIndexes, arrayB.length ) :\n\t\tchangeIndexesToChanges( arrayB, changeIndexes );\n\n\treturn result as any;\n}\n\n/**\n * Finds position of the first and last change in the given arrays. For example:\n *\n * ```ts\n * const indexes = findChangeBoundaryIndexes( [ '1', '2', '3', '4' ], [ '1', '3', '4', '2', '4' ] );\n * console.log( indexes ); // { firstIndex: 1, lastIndexOld: 3, lastIndexNew: 4 }\n * ```\n *\n * The above indexes means that in the first array the modified part is `1[23]4` and in the second array it is `1[342]4`.\n * Based on such indexes, array with `insert`/`delete` operations which allows transforming first value into the second one\n * can be generated.\n */\nfunction findChangeBoundaryIndexes<T>( arr1: ReadonlyArray<T>, arr2: ReadonlyArray<T>, cmp: ( a: T, b: T ) => boolean ): ChangeIndexes {\n\t// Find the first difference between passed values.\n\tconst firstIndex = findFirstDifferenceIndex( arr1, arr2, cmp );\n\n\t// If arrays are equal return -1 indexes object.\n\tif ( firstIndex === -1 ) {\n\t\treturn { firstIndex: -1, lastIndexOld: -1, lastIndexNew: -1 };\n\t}\n\n\t// Remove the common part of each value and reverse them to make it simpler to find the last difference between them.\n\tconst oldArrayReversed = cutAndReverse( arr1, firstIndex );\n\tconst newArrayReversed = cutAndReverse( arr2, firstIndex );\n\n\t// Find the first difference between reversed values.\n\t// It should be treated as \"how many elements from the end the last difference occurred\".\n\t//\n\t// For example:\n\t//\n\t// \t\t\t\tinitial\t->\tafter cut\t-> reversed:\n\t// oldValue:\t'321ba'\t->\t'21ba'\t\t-> 'ab12'\n\t// newValue:\t'31xba'\t->\t'1xba'\t\t-> 'abx1'\n\t// lastIndex:\t\t\t\t\t\t\t-> 2\n\t//\n\t// So the last change occurred two characters from the end of the arrays.\n\tconst lastIndex = findFirstDifferenceIndex( oldArrayReversed, newArrayReversed, cmp );\n\n\t// Use `lastIndex` to calculate proper offset, starting from the beginning (`lastIndex` kind of starts from the end).\n\tconst lastIndexOld = arr1.length - lastIndex;\n\tconst lastIndexNew = arr2.length - lastIndex;\n\n\treturn { firstIndex, lastIndexOld, lastIndexNew };\n}\n\n/**\n * Returns a first index on which given arrays differ. If both arrays are the same, -1 is returned.\n */\nfunction findFirstDifferenceIndex<T>( arr1: ReadonlyArray<T>, arr2: ReadonlyArray<T>, cmp: ( a: T, b: T ) => boolean ): number {\n\tfor ( let i = 0; i < Math.max( arr1.length, arr2.length ); i++ ) {\n\t\tif ( arr1[ i ] === undefined || arr2[ i ] === undefined || !cmp( arr1[ i ], arr2[ i ] ) ) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1; // Return -1 if arrays are equal.\n}\n\n/**\n * Returns a copy of the given array with `howMany` elements removed starting from the beginning and in reversed order.\n *\n * @param arr Array to be processed.\n * @param howMany How many elements from array beginning to remove.\n * @returns Shortened and reversed array.\n */\nfunction cutAndReverse<T>( arr: ReadonlyArray<T>, howMany: number ): Array<T> {\n\treturn arr.slice( howMany ).reverse();\n}\n\n/**\n * Generates changes array based on change indexes from `findChangeBoundaryIndexes` function. This function will\n * generate array with 0 (no changes), 1 (deletion or insertion) or 2 records (insertion and deletion).\n *\n * @param newArray New array for which change indexes were calculated.\n * @param changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n * @returns Array of changes compatible with {@link module:utils/difftochanges~diffToChanges} format.\n */\nfunction changeIndexesToChanges<T>( newArray: ReadonlyArray<T>, changeIndexes: ChangeIndexes ): Array<Change<T>> {\n\tconst result: Array<Change<T>> = [];\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// Order operations as 'insert', 'delete' array to keep compatibility with {@link module:utils/difftochanges~diffToChanges}\n\t// in most cases. However, 'diffToChanges' does not stick to any order so in some cases\n\t// (for example replacing '12345' with 'abcd') it will generate 'delete', 'insert' order.\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex,\n\t\t\ttype: 'insert',\n\t\t\tvalues: newArray.slice( firstIndex, lastIndexNew )\n\t\t} );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult.push( {\n\t\t\tindex: firstIndex + ( lastIndexNew - firstIndex ), // Increase index of what was inserted.\n\t\t\ttype: 'delete',\n\t\t\thowMany: lastIndexOld - firstIndex\n\t\t} );\n\t}\n\n\treturn result;\n}\n\n/**\n * Generates array with set `equal|insert|delete` operations based on change indexes from `findChangeBoundaryIndexes` function.\n *\n * @param changeIndexes Change indexes object from `findChangeBoundaryIndexes` function.\n * @param newLength Length of the new array on which `findChangeBoundaryIndexes` calculated change indexes.\n * @returns Array of changes compatible with {@link module:utils/diff~diff} format.\n */\nfunction changeIndexesToAtomicChanges( changeIndexes: ChangeIndexes, newLength: number ): Array<DiffResult> {\n\tconst { firstIndex, lastIndexOld, lastIndexNew } = changeIndexes;\n\n\t// No changes.\n\tif ( firstIndex === -1 ) {\n\t\treturn Array( newLength ).fill( 'equal' );\n\t}\n\n\tlet result: Array<DiffResult> = [];\n\n\tif ( firstIndex > 0 ) {\n\t\tresult = result.concat( Array( firstIndex ).fill( 'equal' ) );\n\t}\n\n\tif ( lastIndexNew - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexNew - firstIndex ).fill( 'insert' ) );\n\t}\n\n\tif ( lastIndexOld - firstIndex > 0 ) {\n\t\tresult = result.concat( Array( lastIndexOld - firstIndex ).fill( 'delete' ) );\n\t}\n\n\tif ( lastIndexNew < newLength ) {\n\t\tresult = result.concat( Array( newLength - lastIndexNew ).fill( 'equal' ) );\n\t}\n\n\treturn result;\n}\n\n/**\n * Indexes of the first and the last change in the given arrays.\n */\ninterface ChangeIndexes {\n\n\t/**\n\t * Index of the first change in both values (always the same for both).\n\t */\n\tfirstIndex: number;\n\n\t/**\n\t * Index of the last common value in `arr1`.\n\t */\n\tlastIndexOld: number;\n\n\t/**\n\t * Index of the last common value in `arr2`.\n\t */\n\tlastIndexNew: number;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/diff\n */\n\nimport { fastDiff } from './fastdiff.js';\n\n// The following code is based on the \"O(NP) Sequence Comparison Algorithm\"\n// by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n\n/**\n * Calculates the difference between two arrays or strings producing an array containing a list of changes\n * necessary to transform input into output.\n *\n * ```ts\n * diff( 'aba', 'acca' ); // [ 'equal', 'insert', 'insert', 'delete', 'equal' ]\n * ```\n *\n * This function is based on the \"O(NP) Sequence Comparison Algorithm\" by Sun Wu, Udi Manber, Gene Myers, Webb Miller.\n * Unfortunately, while it gives the most precise results, its to complex for longer strings/arrow (above 200 items).\n * Therefore, `diff()` automatically switches to {@link module:utils/fastdiff~fastDiff `fastDiff()`} when detecting\n * such a scenario. The return formats of both functions are identical.\n *\n * @param a Input array or string.\n * @param b Output array or string.\n * @param cmp Optional function used to compare array values, by default === is used.\n * @returns Array of changes.\n */\nexport function diff<T>(\n\ta: ArrayLike<T>,\n\tb: ArrayLike<T>,\n\tcmp?: ( a: T, b: T ) => boolean\n): Array<DiffResult> {\n\t// Set the comparator function.\n\tcmp = cmp || function( a, b ) {\n\t\treturn a === b;\n\t};\n\n\tconst aLength = a.length;\n\tconst bLength = b.length;\n\n\t// Perform `fastDiff` for longer strings/arrays (see #269).\n\tif ( aLength > 200 || bLength > 200 || aLength + bLength > 300 ) {\n\t\treturn diff.fastDiff( a, b, cmp, true );\n\t}\n\n\t// Temporary action type statics.\n\tlet _insert: DiffResult, _delete: DiffResult;\n\n\t// Swapped the arrays to use the shorter one as the first one.\n\tif ( bLength < aLength ) {\n\t\tconst tmp = a;\n\n\t\ta = b;\n\t\tb = tmp;\n\n\t\t// We swap the action types as well.\n\t\t_insert = 'delete';\n\t\t_delete = 'insert';\n\t} else {\n\t\t_insert = 'insert';\n\t\t_delete = 'delete';\n\t}\n\n\tconst m = a.length;\n\tconst n = b.length;\n\tconst delta = n - m;\n\n\t// Edit scripts, for each diagonal.\n\tconst es: { [ k: number ]: Array<DiffResult> } = {};\n\t// Furthest points, the furthest y we can get on each diagonal.\n\tconst fp: { [ k: number]: number } = {};\n\n\tfunction snake( k: number ): number {\n\t\t// We use -1 as an alternative below to handle initial values ( instead of filling the fp with -1 first ).\n\t\t// Furthest points (y) on the diagonal below k.\n\t\tconst y1 = ( fp[ k - 1 ] !== undefined ? fp[ k - 1 ] : -1 ) + 1;\n\t\t// Furthest points (y) on the diagonal above k.\n\t\tconst y2 = fp[ k + 1 ] !== undefined ? fp[ k + 1 ] : -1;\n\t\t// The way we should go to get further.\n\t\tconst dir = y1 > y2 ? -1 : 1;\n\n\t\t// Clone previous changes array (if any).\n\t\tif ( es[ k + dir ] ) {\n\t\t\tes[ k ] = es[ k + dir ].slice( 0 );\n\t\t}\n\n\t\t// Create changes array.\n\t\tif ( !es[ k ] ) {\n\t\t\tes[ k ] = [];\n\t\t}\n\n\t\t// Push the action.\n\t\tes[ k ].push( y1 > y2 ? _insert : _delete );\n\n\t\t// Set the beginning coordinates.\n\t\tlet y = Math.max( y1, y2 );\n\t\tlet x = y - k;\n\n\t\t// Traverse the diagonal as long as the values match.\n\t\twhile ( x < m && y < n && cmp!( a[ x ], b[ y ] ) ) {\n\t\t\tx++;\n\t\t\ty++;\n\t\t\t// Push no change action.\n\t\t\tes[ k ].push( 'equal' );\n\t\t}\n\n\t\treturn y;\n\t}\n\n\tlet p = 0;\n\tlet k;\n\n\t// Traverse the graph until we reach the end of the longer string.\n\tdo {\n\t\t// Updates furthest points and edit scripts for diagonals below delta.\n\t\tfor ( k = -p; k < delta; k++ ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest points and edit scripts for diagonals above delta.\n\t\tfor ( k = delta + p; k > delta; k-- ) {\n\t\t\tfp[ k ] = snake( k );\n\t\t}\n\n\t\t// Updates furthest point and edit script for the delta diagonal.\n\t\t// note that the delta diagonal is the one which goes through the sink (m, n).\n\t\tfp[ delta ] = snake( delta );\n\n\t\tp++;\n\t} while ( fp[ delta ] !== n );\n\n\t// Return the final list of edit changes.\n\t// We remove the first item that represents the action for the injected nulls.\n\treturn es[ delta ].slice( 1 );\n}\n\n// Store the API in static property to easily overwrite it in tests.\n// Too bad dependency injection does not work in Webpack + ES 6 (const) + Babel.\ndiff.fastDiff = fastDiff;\n\n/**\n * The element of the result of {@link module:utils/diff~diff} function.\n */\nexport type DiffResult = 'equal' | 'insert' | 'delete';\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\nimport type { DiffResult } from './diff.js';\n\n/**\n * @module utils/difftochanges\n */\n\n/**\n * Creates a set of changes which need to be applied to the input in order to transform\n * it into the output. This function can be used with strings or arrays.\n *\n * ```ts\n * const input = Array.from( 'abc' );\n * const output = Array.from( 'xaby' );\n * const changes = diffToChanges( diff( input, output ), output );\n *\n * changes.forEach( change => {\n * \tif ( change.type == 'insert' ) {\n * \t\tinput.splice( change.index, 0, ...change.values );\n * \t} else if ( change.type == 'delete' ) {\n * \t\tinput.splice( change.index, change.howMany );\n * \t}\n * } );\n *\n * input.join( '' ) == output.join( '' ); // -> true\n * ```\n *\n * @typeParam T The type of output array element.\n * @param diff Result of {@link module:utils/diff~diff}.\n * @param output The string or array which was passed as diff's output.\n * @returns Set of changes (insert or delete) which need to be applied to the input\n * in order to transform it into the output.\n */\nexport function diffToChanges<T>( diff: ReadonlyArray<DiffResult>, output: ArrayLike<T> ): Array<Change<T>> {\n\tconst changes: Array<Change<T>> = [];\n\tlet index = 0;\n\tlet lastOperation: Change<T> | null = null;\n\n\tdiff.forEach( change => {\n\t\tif ( change == 'equal' ) {\n\t\t\tpushLast();\n\n\t\t\tindex++;\n\t\t} else if ( change == 'insert' ) {\n\t\t\tif ( lastOperation && lastOperation.type == 'insert' ) {\n\t\t\t\tlastOperation.values.push( output[ index ] );\n\t\t\t} else {\n\t\t\t\tpushLast();\n\n\t\t\t\tlastOperation = {\n\t\t\t\t\ttype: 'insert',\n\t\t\t\t\tindex,\n\t\t\t\t\tvalues: [ output[ index ] ]\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tindex++;\n\t\t} else /* if ( change == 'delete' ) */ {\n\t\t\tif ( lastOperation && lastOperation.type == 'delete' ) {\n\t\t\t\tlastOperation.howMany++;\n\t\t\t} else {\n\t\t\t\tpushLast();\n\n\t\t\t\tlastOperation = {\n\t\t\t\t\ttype: 'delete',\n\t\t\t\t\tindex,\n\t\t\t\t\thowMany: 1\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t} );\n\n\tpushLast();\n\n\treturn changes;\n\n\tfunction pushLast() {\n\t\tif ( lastOperation ) {\n\t\t\tchanges.push( lastOperation );\n\t\t\tlastOperation = null;\n\t\t}\n\t}\n}\n\n/**\n * An object describing insertion change.\n *\n * @typeParam T The type of output array element.\n */\nexport interface InsertChange<T> {\n\ttype: 'insert';\n\tindex: number;\n\tvalues: Array<T>;\n}\n\n/**\n * An object describing deletion change.\n */\nexport interface DeleteChange {\n\ttype: 'delete';\n\tindex: number;\n\thowMany: number;\n}\n\n/**\n * The element of the result of {@link module:utils/difftochanges~diffToChanges} function.\n *\n * @typeParam T The type of output array element.\n */\nexport type Change<T> = InsertChange<T> | DeleteChange;\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/areconnectedthroughproperties\n */\n\n/**\n * Traverses both structures to find out whether there is a reference that is shared between both structures.\n */\nexport function areConnectedThroughProperties( obj1: object, obj2: object ): boolean {\n\tif ( obj1 === obj2 && isObject( obj1 ) ) {\n\t\treturn true;\n\t}\n\n\tconst subNodes1 = getSubNodes( obj1 );\n\tconst subNodes2 = getSubNodes( obj2 );\n\n\tfor ( const node of subNodes1 ) {\n\t\tif ( subNodes2.has( node ) ) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Traverses JS structure and stores all sub-nodes, including the head node.\n * It walks into each iterable structures with the `try catch` block to omit errors that might be thrown during\n * tree walking. All primitives, functions and built-ins are skipped.\n */\nfunction getSubNodes( head: unknown ): Set<unknown> {\n\tconst nodes = [ head ];\n\n\t// Nodes are stored to prevent infinite looping.\n\tconst subNodes = new Set();\n\n\twhile ( nodes.length > 0 ) {\n\t\tconst node = nodes.shift();\n\n\t\tif ( subNodes.has( node ) || shouldNodeBeSkipped( node ) ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tsubNodes.add( node );\n\n\t\t// Handle arrays, maps, sets, custom collections that implements `[ Symbol.iterator ]()`, etc.\n\t\tif ( ( node as Iterable<unknown> )[ Symbol.iterator ] ) {\n\t\t\t// The custom editor iterators might cause some problems if the editor is crashed.\n\t\t\ttry {\n\t\t\t\tnodes.push( ...( node as Iterable<unknown> ) );\n\t\t\t}\n\t\t\t// eslint-disable-next-line no-empty\n\t\t\tcatch {}\n\t\t} else {\n\t\t\tnodes.push( ...Object.values( node as any ) );\n\t\t}\n\t}\n\n\treturn subNodes;\n}\n\nfunction shouldNodeBeSkipped( node: unknown ): boolean {\n\tconst type = Object.prototype.toString.call( node );\n\n\treturn (\n\t\ttype === '[object Number]' ||\n\t\ttype === '[object Boolean]' ||\n\t\ttype === '[object String]' ||\n\t\ttype === '[object Symbol]' ||\n\t\ttype === '[object Function]' ||\n\t\ttype === '[object Date]' ||\n\t\ttype === '[object RegExp]' ||\n\n\t\tnode === undefined ||\n\t\tnode === null ||\n\n\t\t// Skip native DOM objects, e.g. Window, nodes, events, etc.\n\t\tnode instanceof EventTarget ||\n\t\tnode instanceof Event\n\t);\n}\n\nfunction isObject( structure: unknown ): boolean {\n\treturn typeof structure === 'object' && structure !== null;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/spy\n */\n\n/**\n * Creates a spy function (ala Sinon.js) that can be used to inspect call to it.\n *\n * The following are the present features:\n *\n * * spy.called: property set to `true` if the function has been called at least once.\n *\n * @returns The spy function.\n */\nexport function spy(): { (): void; called?: boolean } {\n\treturn function spy() {\n\t\t( spy as any ).called = true;\n\t};\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/eventinfo\n */\n\nimport { spy } from './spy.js';\n\n/**\n * The event object passed to event callbacks. It is used to provide information about the event as well as a tool to\n * manipulate it.\n */\nexport class EventInfo<TName extends string = string, TReturn = unknown> {\n\t/**\n\t * The object that fired the event.\n\t */\n\tpublic readonly source: object;\n\n\t/**\n\t * The event name.\n\t */\n\tpublic readonly name: TName;\n\n\t/**\n\t * Path this event has followed. See {@link module:utils/emittermixin~Emitter#delegate}.\n\t */\n\tpublic path: Array<object>;\n\n\t/**\n\t * Stops the event emitter to call further callbacks for this event interaction.\n\t */\n\tpublic readonly stop: { (): void; called?: boolean };\n\n\t/**\n\t * Removes the current callback from future interactions of this event.\n\t */\n\tpublic readonly off: { (): void; called?: boolean };\n\n\t/**\n\t * The value which will be returned by {@link module:utils/emittermixin~Emitter#fire}.\n\t *\n\t * It's `undefined` by default and can be changed by an event listener:\n\t *\n\t * ```ts\n\t * dataController.fire( 'getSelectedContent', ( evt ) => {\n\t * \t// This listener will make `dataController.fire( 'getSelectedContent' )`\n\t * \t// always return an empty DocumentFragment.\n\t * \tevt.return = new DocumentFragment();\n\t *\n\t * \t// Make sure no other listeners are executed.\n\t * \tevt.stop();\n\t * } );\n\t * ```\n\t */\n\tpublic return: TReturn | undefined;\n\n\t/**\n\t * @param source The emitter.\n\t * @param name The event name.\n\t */\n\tconstructor( source: object, name: TName ) {\n\t\tthis.source = source;\n\t\tthis.name = name;\n\t\tthis.path = [];\n\n\t\t// The following methods are defined in the constructor because they must be re-created per instance.\n\t\tthis.stop = spy();\n\t\tthis.off = spy();\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/uid\n */\n\n/**\n * A hash table of hex numbers to avoid using toString() in uid() which is costly.\n * [ '00', '01', '02', ..., 'fe', 'ff' ]\n */\nconst HEX_NUMBERS = new Array( 256 ).fill( '' )\n\t.map( ( _, index ) => ( '0' + ( index ).toString( 16 ) ).slice( -2 ) );\n\n/**\n * Returns a unique id. The id starts with an \"e\" character and a randomly generated string of\n * 32 alphanumeric characters.\n *\n * **Note**: The characters the unique id is built from correspond to the hex number notation\n * (from \"0\" to \"9\", from \"a\" to \"f\"). In other words, each id corresponds to an \"e\" followed\n * by 16 8-bit numbers next to each other.\n *\n * @returns An unique id string.\n */\nexport function uid(): string {\n\t// Let's create some positive random 32bit integers first.\n\tconst [ r1, r2, r3, r4 ] = crypto.getRandomValues( new Uint32Array( 4 ) );\n\n\t// Make sure that id does not start with number.\n\treturn 'e' +\n\t\tHEX_NUMBERS[ r1 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r1 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r2 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r3 >> 24 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 0 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 8 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 16 & 0xFF ] +\n\t\tHEX_NUMBERS[ r4 >> 24 & 0xFF ];\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/priorities\n */\n\n/**\n * String representing a priority value.\n */\nexport type PriorityString = 'highest' | 'high' | 'normal' | 'low' | 'lowest' | number;\n\n// This interface exists to make our API pages more readable.\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n */\nexport interface PrioritiesType {\n\n\t/**\n\t * Converts a string with priority name to it's numeric value. If `Number` is given, it just returns it.\n\t *\n\t * @param priority Priority to convert.\n\t * @returns Converted priority.\n\t */\n\tget( priority?: PriorityString ): number;\n\n\treadonly highest: number;\n\treadonly high: number;\n\treadonly normal: number;\n\treadonly low: number;\n\treadonly lowest: number;\n}\n\n/**\n * Provides group of constants to use instead of hardcoding numeric priority values.\n */\nexport const priorities: PrioritiesType = {\n\tget( priority: PriorityString = 'normal' ): number {\n\t\tif ( typeof priority != 'number' ) {\n\t\t\treturn this[ priority ] || this.normal;\n\t\t} else {\n\t\t\treturn priority;\n\t\t}\n\t},\n\n\thighest: 100000,\n\thigh: 1000,\n\tnormal: 0,\n\tlow: -1000,\n\tlowest: -100000\n};\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\nimport { priorities, type PriorityString } from './priorities.js';\n\n/**\n * @module utils/inserttopriorityarray\n */\n\n/**\n * The priority object descriptor.\n *\n * ```ts\n * const objectWithPriority = {\n * \tpriority: 'high'\n * }\n * ```\n */\nexport interface ObjectWithPriority {\n\n\t/**\n\t * Priority of the object.\n\t */\n\tpriority: PriorityString;\n}\n\n/**\n * Inserts any object with priority at correct index by priority so registered objects are always sorted from highest to lowest priority.\n *\n * @param objects Array of objects with priority to insert object to.\n * @param objectToInsert Object with `priority` property.\n */\nexport function insertToPriorityArray<T extends ObjectWithPriority>( objects: Array<T>, objectToInsert: T ): void {\n\tconst priority = priorities.get( objectToInsert.priority );\n\n\t// Binary search for better performance in large tables.\n\tlet left = 0;\n\tlet right = objects.length;\n\n\twhile ( left < right ) {\n\t\tconst mid = ( left + right ) >> 1; // Use bitwise operator for faster floor division by 2.\n\t\tconst midPriority = priorities.get( objects[ mid ].priority );\n\n\t\tif ( midPriority < priority ) {\n\t\t\tright = mid;\n\t\t} else {\n\t\t\tleft = mid + 1;\n\t\t}\n\t}\n\n\tobjects.splice( left, 0, objectToInsert );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/ckeditorerror\n */\n\n/**\n * URL to the documentation with error codes.\n */\nexport const DOCUMENTATION_URL = 'https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html';\n\n/**\n * The CKEditor error class.\n *\n * You should throw `CKEditorError` when:\n *\n * * An unexpected situation occurred and the editor (most probably) will not work properly. Such exception will be handled\n * by the {@link module:watchdog/watchdog~Watchdog watchdog} (if it is integrated),\n * * If the editor is incorrectly integrated or the editor API is used in the wrong way. This way you will give\n * feedback to the developer as soon as possible. Keep in mind that for common integration issues which should not\n * stop editor initialization (like missing upload adapter, wrong name of a toolbar component) we use\n * {@link module:utils/ckeditorerror~logWarning `logWarning()`} and\n * {@link module:utils/ckeditorerror~logError `logError()`}\n * to improve developers experience and let them see the a working editor as soon as possible.\n *\n * ```ts\n * /**\n *  * Error thrown when a plugin cannot be loaded due to JavaScript errors, lack of plugins with a given name, etc.\n *  *\n *  * @error plugin-load\n *  * @param pluginName The name of the plugin that could not be loaded.\n *  * @param moduleName The name of the module which tried to load this plugin.\n *  *\\/\n * throw new CKEditorError( 'plugin-load', {\n * \tpluginName: 'foo',\n * \tmoduleName: 'bar'\n * } );\n * ```\n */\nexport class CKEditorError extends Error {\n\t/**\n\t * A context of the error by which the Watchdog is able to determine which editor crashed.\n\t */\n\tpublic readonly context: object | null | undefined;\n\n\t/**\n\t * The additional error data passed to the constructor. Undefined if none was passed.\n\t */\n\tpublic readonly data?: object;\n\n\t/**\n\t * Creates an instance of the CKEditorError class.\n\t *\n\t * @param errorName The error id in an `error-name` format. A link to this error documentation page will be added\n\t * to the thrown error's `message`.\n\t * @param context A context of the error by which the {@link module:watchdog/watchdog~Watchdog watchdog}\n\t * is able to determine which editor crashed. It should be an editor instance or a property connected to it. It can be also\n\t * a `null` value if the editor should not be restarted in case of the error (e.g. during the editor initialization).\n\t * The error context should be checked using the `areConnectedThroughProperties( editor, context )` utility\n\t * to check if the object works as the context.\n\t * @param data Additional data describing the error. A stringified version of this object\n\t * will be appended to the error message, so the data are quickly visible in the console. The original\n\t * data object will also be later available under the {@link #data} property.\n\t * @param originalError An optional original error that is being wrapped in the `CKEditorError` instance.\n\t */\n\tconstructor( errorName: string, context?: object | null, data?: object, originalError?: Error ) {\n\t\tsuper( getErrorMessage( errorName, data, originalError ) );\n\n\t\tthis.name = 'CKEditorError';\n\t\tthis.context = context;\n\t\tthis.data = data;\n\n\t\t// Wrapping an original error in a CKEditorError instance.\n\t\tif ( originalError ) {\n\t\t\t// Restore the original stack trace to make the error look like the original one.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/5595 for more details.\n\t\t\tthis.stack = originalError.stack;\n\t\t}\n\t}\n\n\t/**\n\t * Checks if the error is of the `CKEditorError` type.\n\t */\n\tpublic is( type: string ): boolean {\n\t\treturn type === 'CKEditorError';\n\t}\n\n\t/**\n\t * A utility that ensures that the thrown error is a {@link module:utils/ckeditorerror~CKEditorError} one.\n\t * It is useful when combined with the {@link module:watchdog/watchdog~Watchdog} feature, which can restart the editor in case\n\t * of a {@link module:utils/ckeditorerror~CKEditorError} error.\n\t *\n\t * @param error The error to rethrow.\n\t * @param context An object connected through properties with the editor instance. This context will be used\n\t * by the watchdog to verify which editor should be restarted.\n\t */\n\tpublic static rethrowUnexpectedError( error: Error, context: object ): never {\n\t\tif ( ( error as any ).is && ( error as any ).is( 'CKEditorError' ) ) {\n\t\t\tthrow error;\n\t\t}\n\n\t\t/**\n\t\t * An unexpected error occurred inside the CKEditor 5 codebase. This error will look like the original one\n\t\t * to make the debugging easier.\n\t\t *\n\t\t * This error is only useful when the editor is initialized using the {@link module:watchdog/watchdog~Watchdog} feature.\n\t\t * In case of such error (or any {@link module:utils/ckeditorerror~CKEditorError} error) the watchdog should restart the editor.\n\t\t *\n\t\t * @error unexpected-error\n\t\t */\n\t\tthrow new CKEditorError( 'unexpected-error', context, undefined, error );\n\t}\n}\n\n/**\n * Logs a warning to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log a warning to the console.\n *\n * ```ts\n * /**\n *  * There was a problem processing the configuration of the toolbar. The item with the given\n *  * name does not exist, so it was omitted when rendering the toolbar.\n *  *\n *  * @error toolbarview-item-unavailable\n *  * @param {String} name The name of the component.\n *  *\\/\n * logWarning( 'toolbarview-item-unavailable', { name } );\n * ```\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to throw an error and when to log\n * a warning or an error to the console.\n *\n * @param errorName The error name to be logged.\n * @param data Additional data to be logged.\n */\nexport function logWarning( errorName: string, data?: object ): void {\n\tconsole.warn( ...formatConsoleArguments( errorName, data ) );\n}\n\n/**\n * Logs an error to the console with a properly formatted message and adds a link to the documentation.\n * Use whenever you want to log an error to the console.\n *\n * ```ts\n * /**\n *  * There was a problem processing the configuration of the toolbar. The item with the given\n *  * name does not exist, so it was omitted when rendering the toolbar.\n *  *\n *  * @error toolbarview-item-unavailable\n *  * @param {String} name The name of the component.\n *  *\\/\n *  logError( 'toolbarview-item-unavailable', { name } );\n * ```\n *\n * **Note**: In most cases logging a warning using {@link module:utils/ckeditorerror~logWarning} is enough.\n *\n * See also {@link module:utils/ckeditorerror~CKEditorError} for an explanation when to use each method.\n *\n * @param errorName The error name to be logged.\n * @param data Additional data to be logged.\n */\nexport function logError( errorName: string, data?: object ): void {\n\tconsole.error( ...formatConsoleArguments( errorName, data ) );\n}\n\n/**\n * Returns formatted link to documentation message.\n */\nfunction getLinkToDocumentationMessage( errorName: string ): string {\n\treturn `\\nRead more: ${ DOCUMENTATION_URL }#error-${ errorName }`;\n}\n\n/**\n * Returns formatted error message.\n */\nfunction getErrorMessage( errorName: string, data?: object, originalError?: Error ): string {\n\tconst processedObjects = new WeakSet();\n\tconst circularReferencesReplacer = ( key: string, value: unknown ) => {\n\t\tif ( typeof value === 'object' && value !== null ) {\n\t\t\tif ( processedObjects.has( value ) ) {\n\t\t\t\treturn `[object ${ value.constructor.name }]`;\n\t\t\t}\n\n\t\t\tprocessedObjects.add( value );\n\t\t}\n\n\t\treturn value;\n\t};\n\n\tconst stringifiedData = data ? ` ${ JSON.stringify( data, circularReferencesReplacer ) }` : '';\n\tconst documentationLink = getLinkToDocumentationMessage( errorName );\n\tconst originalErrorMessage = originalError ? `\\nOriginal error: ${ originalError.name }: ${ originalError.message }` : '';\n\n\treturn errorName + stringifiedData + documentationLink + originalErrorMessage;\n}\n\n/**\n * Returns formatted console error arguments.\n */\nfunction formatConsoleArguments( errorName: string, data?: object ): Array<unknown> {\n\tconst documentationMessage = getLinkToDocumentationMessage( errorName );\n\n\treturn data ? [ errorName, data, documentationMessage ] : [ errorName, documentationMessage ];\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/version\n */\n\nimport { CKEditorError } from './ckeditorerror.js';\n\nexport const version = '46.0.2';\n\n// The second argument is not a month. It is `monthIndex` and starts from `0`.\nexport const releaseDate = new Date( 2025, 7, 19 );\n\ndeclare global {\n\tvar CKEDITOR_VERSION: string;\n}\n\n/* istanbul ignore next -- @preserve */\nif ( globalThis.CKEDITOR_VERSION ) {\n\t/**\n\t * This error is thrown when, due to a mistake in the way CKEditor&nbsp;5 was installed,\n\t * imported, or initialized, some of its modules were evaluated and executed twice.\n\t * Duplicate modules inevitably lead to runtime errors and increased bundle size.\n\t *\n\t * # Check dependency versions\n\t *\n\t * First, make sure that you use the latest version of all CKEditor&nbsp;5 dependencies.\n\t * Depending on the installation method, you should check the versions of the `ckeditor5`,\n\t * `ckeditor5-premium-features`, or `@ckeditor/ckeditor5-<NAME>` packages. If you cannot update\n\t * to the latest version, ensure that all the CKEditor&nbsp;5 packages are\n\t * in the same version.\n\t *\n\t * If you use third-party plugins, make sure to update them, too. If they are incompatible\n\t * with the version of CKEditor&nbsp;5 you use, you may need to downgrade the CKEditor&nbsp;5 packages\n\t * (which we do not recommend). Ask the plugin's author to upgrade the dependencies,\n\t * or fork their project and update it yourself.\n\t *\n\t * # Check imports\n\t *\n\t * The next step is to look at how you import CKEditor&nbsp;5 into your project.\n\t *\n\t * **The {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods}\n\t * are designed to prevent module duplication, so if you are not using them yet, you should consider\n\t * updating your project**. However, several legacy installation methods are still supported for backward\n\t * compatibility, and mixing them may result in module duplication.\n\t *\n\t * These are the most common import methods of the CKEditor&nbsp;5 packages.\n\t *\n\t * - **New installation methods (NIM)** &ndash; Imports from the `ckeditor5` and `ckeditor5-premium-features` packages.\n\t * - **Optimized build** for the new installation methods &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>/dist/index.js`.\n\t * - **Predefined builds** (no longer supported) &ndash; Imports from the `@ckeditor/ckeditor5-build-<NAME>` packages.\n\t * - **Default imports** (legacy) &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>` packages (default export).\n\t * - **`src`** (legacy) &ndash; Imports from the `@ckeditor/ckeditor5-<NAME>/src/*`.\n\t * - **DLL builds** (legacy) &ndash; Imports from the `ckeditor5/build/<NAME>` and `@ckeditor/ckeditor5-<NAME>/build/*`.\n\t *\n\t * The best way to avoid duplicate modules is to avoid mixing these installation methods. For example, if you use imports\n\t * specific to the optimized build, you should use them for all CKEditor&nbsp;5 packages. In addition, since\n\t * the DLL builds already include the core of the editor, they cannot be used with other types of imports.\n\t *\n\t * Here is a matrix showing which installation methods are compatible with each other:\n\t *\n\t * |                  | NIM | Optimized build | Predefined builds | Default imports | `src` | DLL builds |\n\t * |------------------|-----|-----------------|-------------------|-----------------|-------|------------|\n\t * | NIM              | ✅  | ✅              | ❌                | ❌              | ❌    | ❌         |\n\t * | Optimized builds | ✅  | ✅              | ❌                | ❌              | ❌    | ❌         |\n\t * | Predefined build | ❌  | ❌              | ✅                | ❌              | ❌    | ❌         |\n\t * | Default imports  | ❌  | ❌              | ❌                | ✅              | ✅    | ❌         |\n\t * | `src`            | ❌  | ❌              | ❌                | ✅              | ✅    | ❌         |\n\t * | DLL builds       | ❌  | ❌              | ❌                | ❌              | ❌    | ✅         |\n\t *\n\t * If you use any third-party plugins, make sure the way you import them is compatible with\n\t * the way you import CKEditor&nbsp;5.\n\t *\n\t * <details>\n\t * <summary>New installation methods and optimized builds</summary>\n\t *\n\t * If you use the {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods},\n\t * you should only import { code } from the `ckeditor5` and `ckeditor5-premium-features` packages.\n\t * Do not import { code } from the `@ckeditor/ckeditor5-<NAME>` packages unless you follow\n\t * the {@glink getting-started/setup/optimizing-build-size Optimizing build size} guide and the imports from\n\t * the `@ckeditor/ckeditor5-<NAME>` packages end with `/dist/index.js`.\n\t *\n\t * If you use a CDN, ensure that some files are not included twice in your project.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor, Highlight } from 'ckeditor5'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight.js'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Deprecated) Predefined builds</summary>\n\t *\n\t * **As of April, 2025 predefined build are no longer supported. Please refer to the\n\t * {@glink getting-started/index Quick Start} guide\n\t * to choose one of the modern installation and integration methods available**.\n\t *\n\t * If you use the predefined builds, you cannot import any additional plugins.\n\t * These builds already include the editor's core and selected plugins and importing additional\n\t * ones will cause some modules to be bundled and loaded twice.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor } from '@ckeditor/ckeditor5-build-classic'; // ✅\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight'; // ❌\n\t * ```\n\t *\n\t * If you are missing some features from the list of plugins, you should switch to the\n\t * {@glink updating/nim-migration/migration-to-new-installation-methods new installation methods}\n\t * which do not have this limitation.\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Legacy) Default imports and `src` imports</summary>\n\t *\n\t * If you use the {@glink getting-started/legacy/installation-methods/quick-start-other legacy customized installation}\n\t * method, you should only import { code from the `@ckeditor/ckeditor5-<NAME>` packages. While you can import code } from\n\t * the `@ckeditor/ckeditor5-<NAME>/src/*` files, it is not recommended as it can make migration to the new installation\n\t * methods more difficult.\n\t *\n\t * If you use this installation method, you should not import { code } from the `ckeditor5` or `ckeditor5-premium-features` packages.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import { ClassicEditor } from '@ckeditor/ckeditor5-editor-classic'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ✅\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ✅ (not recommended)\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * <details>\n\t * <summary>(Legacy) DLL builds</summary>\n\t *\n\t * If you are using the {@glink getting-started/legacy/advanced/alternative-setups/dll-builds legacy DLL builds},\n\t * you should not import any non-DLL modules.\n\t *\n\t * Examples of valid and invalid import paths:\n\t *\n\t * ```js\n\t * import 'ckeditor5/build/ckeditor5-dll.js';// ✅\n\t * import '@ckeditor/ckeditor5-editor-classic/build/editor-classic.js';// ✅\n\t * import '@ckeditor/ckeditor5-highlight/build/highlight.js';// ✅\n\t * import { Highlight } from 'ckeditor5'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/dist/index.js'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight'; // ❌\n\t * import { Highlight } from '@ckeditor/ckeditor5-highlight/src/highlight.js'; // ❌\n\t * ```\n\t * </details>\n\t *\n\t * # Reinstall `node_modules`\n\t *\n\t * Usually, npm and other package managers deduplicate all packages - for example, `ckeditor5` is only installed once\n\t * in `node_modules/`. However, it is known to fail to do so occasionally.\n\t *\n\t * To rule out this possibility, you can try the following:\n\t *\n\t * 1. Remove the `node_modules` directory.\n\t * 2. Remove the `package-lock.json`, `yarn.lock`, or `pnpm-lock.yaml` files (depending on the package manager used).\n\t * 3. Run `npm install` to reinstall all packages.\n\t * 4. Run `npm ls` to check how many times packages like `@ckeditor/ckeditor5-core` are installed.\n\t * If they are installed more than once, verify which package causes that.\n\t *\n\t * @error ckeditor-duplicated-modules\n\t */\n\tthrow new CKEditorError(\n\t\t'ckeditor-duplicated-modules',\n\t\tnull\n\t);\n} else {\n\tglobalThis.CKEDITOR_VERSION = version;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/emittermixin\n */\n\nimport { EventInfo } from './eventinfo.js';\nimport { uid } from './uid.js';\nimport { priorities, type PriorityString } from './priorities.js';\nimport { insertToPriorityArray } from './inserttopriorityarray.js';\nimport type { Constructor, Mixed } from './mix.js';\n\n// To check if component is loaded more than once.\nimport './version.js';\nimport { CKEditorError } from './ckeditorerror.js';\n\nconst _listeningTo = Symbol( 'listeningTo' );\nconst _emitterId = Symbol( 'emitterId' );\nconst _delegations = Symbol( 'delegations' );\n\nconst defaultEmitterClass = /* #__PURE__ */ EmitterMixin( Object );\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * This function creates a class that inherits from the provided `base` and implements `Emitter` interface.\n *\n * ```ts\n * class BaseClass { ... }\n *\n * class MyClass extends EmitterMixin( BaseClass ) {\n * \t// This class derives from `BaseClass` and implements the `Emitter` interface.\n * }\n * ```\n *\n * Read more about the concept of emitters in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide.\n * * {@glink framework/deep-dive/event-system Event system} deep-dive guide.\n *\n * @label EXTENDS\n */\nexport function EmitterMixin<Base extends Constructor>( base: Base ): Mixed<Base, Emitter>;\n\n/**\n * Mixin that injects the {@link ~Emitter events API} into its host.\n *\n * This function creates a class that implements `Emitter` interface.\n *\n * ```ts\n * class MyClass extends EmitterMixin() {\n * \t// This class implements the `Emitter` interface.\n * }\n * ```\n *\n * Read more about the concept of emitters in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide.\n * * {@glink framework/deep-dive/event-system Event system} deep dive guide.\n *\n * @label NO_ARGUMENTS\n */\nexport function EmitterMixin(): {\n\tnew (): Emitter;\n\tprototype: Emitter;\n};\n\nexport function EmitterMixin( base?: Constructor ): unknown {\n\tif ( !base ) {\n\t\treturn defaultEmitterClass;\n\t}\n\n\tabstract class Mixin extends base implements EmitterInternal {\n\t\tpublic on<TEvent extends BaseEvent>(\n\t\t\tevent: TEvent[ 'name' ],\n\t\t\tcallback: GetCallback<TEvent>,\n\t\t\toptions?: CallbackOptions\n\t\t): void {\n\t\t\tthis.listenTo( this, event, callback, options );\n\t\t}\n\n\t\tpublic once<TEvent extends BaseEvent>(\n\t\t\tevent: TEvent[ 'name' ],\n\t\t\tcallback: GetCallback<TEvent>,\n\t\t\toptions?: CallbackOptions\n\t\t): void {\n\t\t\tlet wasFired = false;\n\n\t\t\tconst onceCallback: typeof callback = ( event, ...args ) => {\n\t\t\t\t// Ensure the callback is called only once even if the callback itself leads to re-firing the event\n\t\t\t\t// (which would call the callback again).\n\t\t\t\tif ( !wasFired ) {\n\t\t\t\t\twasFired = true;\n\n\t\t\t\t\t// Go off() at the first call.\n\t\t\t\t\tevent.off();\n\n\t\t\t\t\t// Go with the original callback.\n\t\t\t\t\tcallback.call( this, event, ...args );\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t// Make a similar on() call, simply replacing the callback.\n\t\t\tthis.listenTo( this, event, onceCallback, options );\n\t\t}\n\n\t\tpublic off( event: string, callback: Function ): void {\n\t\t\tthis.stopListening( this, event, callback );\n\t\t}\n\n\t\tpublic listenTo<TEvent extends BaseEvent>(\n\t\t\temitter: Emitter,\n\t\t\tevent: TEvent[ 'name' ],\n\t\t\tcallback: GetCallback<TEvent>,\n\t\t\toptions: CallbackOptions = {}\n\t\t): void {\n\t\t\tlet emitterInfo, eventCallbacks;\n\n\t\t\t// _listeningTo contains a list of emitters that this object is listening to.\n\t\t\t// This list has the following format:\n\t\t\t//\n\t\t\t// _listeningTo: {\n\t\t\t//     emitterId: {\n\t\t\t//         emitter: emitter,\n\t\t\t//         callbacks: {\n\t\t\t//             event1: [ callback1, callback2, ... ]\n\t\t\t//             ....\n\t\t\t//         }\n\t\t\t//     },\n\t\t\t//     ...\n\t\t\t// }\n\n\t\t\tif ( !this[ _listeningTo ] ) {\n\t\t\t\tthis[ _listeningTo ] = {};\n\t\t\t}\n\n\t\t\tconst emitters = this[ _listeningTo ]!;\n\n\t\t\tif ( !_getEmitterId( emitter ) ) {\n\t\t\t\t_setEmitterId( emitter );\n\t\t\t}\n\n\t\t\tconst emitterId = _getEmitterId( emitter )!;\n\n\t\t\tif ( !( emitterInfo = emitters[ emitterId ] ) ) {\n\t\t\t\temitterInfo = emitters[ emitterId ] = {\n\t\t\t\t\temitter,\n\t\t\t\t\tcallbacks: {}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif ( !( eventCallbacks = emitterInfo.callbacks[ event ] ) ) {\n\t\t\t\teventCallbacks = emitterInfo.callbacks[ event ] = [];\n\t\t\t}\n\n\t\t\teventCallbacks.push( callback );\n\n\t\t\t// Finally register the callback to the event.\n\t\t\taddEventListener( this, emitter, event, callback, options );\n\t\t}\n\n\t\tpublic stopListening( emitter?: Emitter, event?: string, callback?: Function ): void {\n\t\t\tconst emitters = this[ _listeningTo ];\n\t\t\tlet emitterId = emitter && _getEmitterId( emitter );\n\t\t\tconst emitterInfo = ( emitters && emitterId ) ? emitters[ emitterId ] : undefined;\n\t\t\tconst eventCallbacks = ( emitterInfo && event ) ? emitterInfo.callbacks[ event ] : undefined;\n\n\t\t\t// Stop if nothing has been listened.\n\t\t\tif ( !emitters || ( emitter && !emitterInfo ) || ( event && !eventCallbacks ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// All params provided. off() that single callback.\n\t\t\tif ( callback ) {\n\t\t\t\tremoveEventListener( this, emitter!, event!, callback );\n\n\t\t\t\t// We must remove callbacks as well in order to prevent memory leaks.\n\t\t\t\t// See https://github.com/ckeditor/ckeditor5/pull/8480\n\t\t\t\tconst index = eventCallbacks!.indexOf( callback );\n\n\t\t\t\tif ( index !== -1 ) {\n\t\t\t\t\tif ( eventCallbacks!.length === 1 ) {\n\t\t\t\t\t\tdelete emitterInfo!.callbacks[ event! ];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremoveEventListener( this, emitter!, event!, callback );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Only `emitter` and `event` provided. off() all callbacks for that event.\n\t\t\telse if ( eventCallbacks ) {\n\t\t\t\twhile ( ( callback = eventCallbacks.pop() ) ) {\n\t\t\t\t\tremoveEventListener( this, emitter!, event!, callback );\n\t\t\t\t}\n\n\t\t\t\tdelete emitterInfo!.callbacks[ event! ];\n\t\t\t}\n\t\t\t// Only `emitter` provided. off() all events for that emitter.\n\t\t\telse if ( emitterInfo ) {\n\t\t\t\tfor ( event in emitterInfo.callbacks ) {\n\t\t\t\t\tthis.stopListening( emitter!, event );\n\t\t\t\t}\n\t\t\t\tdelete emitters[ emitterId! ];\n\t\t\t}\n\t\t\t// No params provided. off() all emitters.\n\t\t\telse {\n\t\t\t\tfor ( emitterId in emitters ) {\n\t\t\t\t\tthis.stopListening( emitters[ emitterId ].emitter );\n\t\t\t\t}\n\t\t\t\tdelete this[ _listeningTo ];\n\t\t\t}\n\t\t}\n\n\t\tpublic fire<TEvent extends BaseEvent>(\n\t\t\teventOrInfo: GetNameOrEventInfo<TEvent>,\n\t\t\t...args: TEvent[ 'args' ]\n\t\t): GetEventInfo<TEvent>[ 'return' ] {\n\t\t\ttry {\n\t\t\t\tconst eventInfo = eventOrInfo instanceof EventInfo ? eventOrInfo : new EventInfo( this, eventOrInfo );\n\t\t\t\tconst event = eventInfo.name;\n\t\t\t\tlet callbacks = getCallbacksForEvent( this, event );\n\n\t\t\t\t// Record that the event passed this emitter on its path.\n\t\t\t\teventInfo.path.push( this );\n\n\t\t\t\t// Handle event listener callbacks first.\n\t\t\t\tif ( callbacks ) {\n\t\t\t\t\t// Copying callbacks array is the easiest and most secure way of preventing infinite loops, when event callbacks\n\t\t\t\t\t// are added while processing other callbacks. Previous solution involved adding counters (unique ids) but\n\t\t\t\t\t// failed if callbacks were added to the queue before currently processed callback.\n\t\t\t\t\t// If this proves to be too inefficient, another method is to change `.on()` so callbacks are stored if same\n\t\t\t\t\t// event is currently processed. Then, `.fire()` at the end, would have to add all stored events.\n\t\t\t\t\tcallbacks = callbacks.slice();\n\n\t\t\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\t\t\tconst fn = callbacks[ i ].callback;\n\n\t\t\t\t\t\tfn.call( this, eventInfo, ...args );\n\n\t\t\t\t\t\t// Remove the callback from future requests if off() has been called.\n\t\t\t\t\t\tif ( eventInfo.off.called ) {\n\t\t\t\t\t\t\t// Remove the called mark for the next calls.\n\t\t\t\t\t\t\tdelete eventInfo.off.called;\n\n\t\t\t\t\t\t\tthis._removeEventListener( event, fn );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Do not execute next callbacks if stop() was called.\n\t\t\t\t\t\tif ( eventInfo.stop.called ) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Delegate event to other emitters if needed.\n\t\t\t\tconst delegations = this[ _delegations ];\n\n\t\t\t\tif ( delegations ) {\n\t\t\t\t\tconst destinations = delegations.get( event );\n\t\t\t\t\tconst passAllDestinations = delegations.get( '*' );\n\n\t\t\t\t\tif ( destinations ) {\n\t\t\t\t\t\tfireDelegatedEvents( destinations, eventInfo, args );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( passAllDestinations ) {\n\t\t\t\t\t\tfireDelegatedEvents( passAllDestinations, eventInfo, args );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn eventInfo.return;\n\t\t\t} catch ( err ) {\n\t\t\t\t// @if CK_DEBUG // throw err;\n\t\t\t\t/* istanbul ignore next -- @preserve */\n\t\t\t\tCKEditorError.rethrowUnexpectedError( err as Error, this );\n\t\t\t}\n\t\t}\n\n\t\tpublic delegate( ...events: Array<string> ): EmitterMixinDelegateChain {\n\t\t\treturn {\n\t\t\t\tto: ( emitter, nameOrFunction ) => {\n\t\t\t\t\tif ( !this[ _delegations ] ) {\n\t\t\t\t\t\tthis[ _delegations ] = new Map();\n\t\t\t\t\t}\n\n\t\t\t\t\t// Originally there was a for..of loop which unfortunately caused an error in Babel that didn't allow\n\t\t\t\t\t// build an application. See: https://github.com/ckeditor/ckeditor5-react/issues/40.\n\t\t\t\t\tevents.forEach( eventName => {\n\t\t\t\t\t\tconst destinations = this[ _delegations ]!.get( eventName );\n\n\t\t\t\t\t\tif ( !destinations ) {\n\t\t\t\t\t\t\tthis[ _delegations ]!.set( eventName, new Map( [ [ emitter, nameOrFunction ] ] ) );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdestinations.set( emitter, nameOrFunction );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tpublic stopDelegating( event?: string, emitter?: Emitter ): void {\n\t\t\tif ( !this[ _delegations ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !event ) {\n\t\t\t\tthis[ _delegations ]!.clear();\n\t\t\t} else if ( !emitter ) {\n\t\t\t\tthis[ _delegations ]!.delete( event );\n\t\t\t} else {\n\t\t\t\tconst destinations = this[ _delegations ]!.get( event );\n\n\t\t\t\tif ( destinations ) {\n\t\t\t\t\tdestinations.delete( emitter );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic _addEventListener<TEvent extends BaseEvent>(\n\t\t\tevent: TEvent[ 'name' ],\n\t\t\tcallback: GetCallback<TEvent>,\n\t\t\toptions: CallbackOptions\n\t\t): void {\n\t\t\tcreateEventNamespace( this, event );\n\n\t\t\tconst lists = getCallbacksListsForNamespace( this, event );\n\t\t\tconst priority = priorities.get( options.priority );\n\n\t\t\tconst callbackDefinition = {\n\t\t\t\tcallback,\n\t\t\t\tpriority\n\t\t\t};\n\n\t\t\t// Add the callback to all callbacks list.\n\t\t\tfor ( const callbacks of lists ) {\n\t\t\t\t// Add the callback to the list in the right priority position.\n\t\t\t\tinsertToPriorityArray( callbacks, callbackDefinition );\n\t\t\t}\n\t\t}\n\n\t\tpublic _removeEventListener( event: string, callback: Function ): void {\n\t\t\tconst lists = getCallbacksListsForNamespace( this, event );\n\n\t\t\tfor ( const callbacks of lists ) {\n\t\t\t\tfor ( let i = 0; i < callbacks.length; i++ ) {\n\t\t\t\t\tif ( callbacks[ i ].callback == callback ) {\n\t\t\t\t\t\t// Remove the callback from the list (fixing the next index).\n\t\t\t\t\t\tcallbacks.splice( i, 1 );\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpublic declare _events?: { [ eventName: string ]: EventNode };\n\n\t\tpublic declare [ _emitterId ]?: string;\n\n\t\tpublic declare [ _listeningTo ]?: {\n\t\t\t[ emitterId: string ]: {\n\t\t\t\temitter: Emitter;\n\t\t\t\tcallbacks: { [ event: string]: Array<Function> };\n\t\t\t};\n\t\t};\n\n\t\tpublic declare [ _delegations ]?: Map<string, Map<Emitter, string | ( ( name: string ) => string ) | undefined>>;\n\t}\n\n\treturn Mixin;\n}\n\n/**\n * Emitter/listener interface.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/emittermixin~Emitter} mixin.\n *\n * ```ts\n * class MyClass extends EmitterMixin() {\n * \t// This class now implements the `Emitter` interface.\n * }\n * ```\n *\n * Read more about the usage of this interface in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide.\n * * {@glink framework/deep-dive/event-system Event system} deep-dive guide.\n */\nexport interface Emitter {\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * Shorthand for {@link #listenTo `this.listenTo( this, event, callback, options )`} (it makes the emitter\n\t * listen on itself).\n\t *\n\t * @typeParam TEvent The type descibing the event. See {@link module:utils/emittermixin~BaseEvent}.\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\ton<TEvent extends BaseEvent>(\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions?: GetCallbackOptions<TEvent>\n\t): void;\n\n\t/**\n\t * Registers a callback function to be executed on the next time the event is fired only. This is similar to\n\t * calling {@link #on} followed by {@link #off} in the callback.\n\t *\n\t * @typeParam TEvent The type descibing the event. See {@link module:utils/emittermixin~BaseEvent}.\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\tonce<TEvent extends BaseEvent>(\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions?: GetCallbackOptions<TEvent>\n\t): void;\n\n\t/**\n\t * Stops executing the callback on the given event.\n\t * Shorthand for {@link #stopListening `this.stopListening( this, event, callback )`}.\n\t *\n\t * @param event The name of the event.\n\t * @param callback The function to stop being called.\n\t */\n\toff( event: string, callback: Function ): void;\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n\t *\n\t * Events can be grouped in namespaces using `:`.\n\t * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n\t *\n\t * ```ts\n\t * // myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n\t * myEmitter.on( 'myGroup', genericCallback );\n\t * myEmitter.on( 'myGroup:myEvent', specificCallback );\n\t *\n\t * // genericCallback is fired.\n\t * myEmitter.fire( 'myGroup' );\n\t * // both genericCallback and specificCallback are fired.\n\t * myEmitter.fire( 'myGroup:myEvent' );\n\t * // genericCallback is fired even though there are no callbacks for \"foo\".\n\t * myEmitter.fire( 'myGroup:foo' );\n\t * ```\n\t *\n\t * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n\t * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n\t *\n\t * @label BASE_EMITTER\n\t * @typeParam TEvent The type describing the event. See {@link module:utils/emittermixin~BaseEvent}.\n\t * @param emitter The object that fires the event.\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\tlistenTo<TEvent extends BaseEvent>(\n\t\temitter: Emitter,\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions?: GetCallbackOptions<TEvent>\n\t): void;\n\n\t/**\n\t * Stops listening for events. It can be used at different levels:\n\t *\n\t * * To stop listening to a specific callback.\n\t * * To stop listening to a specific event.\n\t * * To stop listening to all events fired by a specific object.\n\t * * To stop listening to all events fired by all objects.\n\t *\n\t * @label BASE_STOP\n\t * @param emitter The object to stop listening to. If omitted, stops it for all objects.\n\t * @param event (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n\t * for all events from `emitter`.\n\t * @param callback (Requires the `event`) The function to be removed from the call list for the given\n\t * `event`.\n\t */\n\tstopListening( emitter?: Emitter, event?: string, callback?: Function ): void;\n\n\t/**\n\t * Fires an event, executing all callbacks registered for it.\n\t *\n\t * The first parameter passed to callbacks is an {@link module:utils/eventinfo~EventInfo} object,\n\t * followed by the optional `args` provided in the `fire()` method call.\n\t *\n\t * @typeParam TEvent The type describing the event. See {@link module:utils/emittermixin~BaseEvent}.\n\t * @param eventOrInfo The name of the event or `EventInfo` object if event is delegated.\n\t * @param args Additional arguments to be passed to the callbacks.\n\t * @returns By default the method returns `undefined`. However, the return value can be changed by listeners\n\t * through modification of the {@link module:utils/eventinfo~EventInfo#return `evt.return`}'s property (the event info\n\t * is the first param of every callback).\n\t */\n\tfire<TEvent extends BaseEvent>(\n\t\teventOrInfo: GetNameOrEventInfo<TEvent>,\n\t\t...args: TEvent[ 'args' ]\n\t): GetEventInfo<TEvent>[ 'return' ];\n\n\t/**\n\t * Delegates selected events to another {@link module:utils/emittermixin~Emitter}. For instance:\n\t *\n\t * ```ts\n\t * emitterA.delegate( 'eventX' ).to( emitterB );\n\t * emitterA.delegate( 'eventX', 'eventY' ).to( emitterC );\n\t * ```\n\t *\n\t * then `eventX` is delegated (fired by) `emitterB` and `emitterC` along with `data`:\n\t *\n\t * ```ts\n\t * emitterA.fire( 'eventX', data );\n\t * ```\n\t *\n\t * and `eventY` is delegated (fired by) `emitterC` along with `data`:\n\t *\n\t * ```ts\n\t * emitterA.fire( 'eventY', data );\n\t * ```\n\t *\n\t * @param events Event names that will be delegated to another emitter.\n\t */\n\tdelegate( ...events: Array<string> ): EmitterMixinDelegateChain;\n\n\t/**\n\t * Stops delegating events. It can be used at different levels:\n\t *\n\t * * To stop delegating all events.\n\t * * To stop delegating a specific event to all emitters.\n\t * * To stop delegating a specific event to a specific emitter.\n\t *\n\t * @param event The name of the event to stop delegating. If omitted, stops it all delegations.\n\t * @param emitter (requires `event`) The object to stop delegating a particular event to.\n\t * If omitted, stops delegation of `event` to all emitters.\n\t */\n\tstopDelegating( event?: string, emitter?: Emitter ): void;\n}\n\ninterface EmitterInternal extends Emitter {\n\n\t/**\n\t * Adds callback to emitter for given event.\n\t *\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\t_addEventListener?: <TEvent extends BaseEvent>(\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions: CallbackOptions\n\t) => void;\n\n\t/**\n\t * Removes callback from emitter for given event.\n\t *\n\t * @param event The name of the event.\n\t * @param callback The function to stop being called.\n\t */\n\t_removeEventListener?: ( event: string, callback: Function ) => void;\n\n\t_events?: { [ eventName: string ]: EventNode };\n\n\t[ _emitterId ]?: string;\n\n\t[ _listeningTo ]?: {\n\t\t[ emitterId: string ]: {\n\t\t\temitter: Emitter;\n\t\t\tcallbacks: { [ event: string]: Array<Function> };\n\t\t};\n\t};\n\n\t[ _delegations ]?: Map<string, Map<Emitter, string | ( ( name: string ) => string ) | undefined>>;\n}\n\n/**\n * Default type describing any event.\n *\n * Every custom event has to be compatible with `BaseEvent`.\n *\n * ```ts\n * type MyEvent = {\n * \t// In `fire<MyEvent>( name )`, `on<MyEvent>( name )`, `once<MyEvent>( name )` and `listenTo<MyEvent>( name )` calls\n * \t// the `name` argument will be type-checked to ensure it's `'myEvent'` or have `'myEvent:'` prefix.\n * \t// Required.\n * \tname: 'myEvent' | `myEvent:${ string }`;\n *\n * \t// In `fire<MyEvent>( name, a, b )` call, `a` and `b` parameters will be type-checked against `number` and `string`.\n * \t// In `on<MyEvent>`, `once<MyEvent>` and `listenTo<MyEvent>` calls, the parameters of provided callback function\n * \t// will be automatically inferred as `EventInfo`, `number` and `string`.\n * \t// Required.\n * \targs: [ number, string ];\n *\n * \t// `fire<MyEvent>` will have return type `boolean | undefined`.\n * \t// Optional, unknown by default.\n * \treturn: boolean;\n *\n * \t// `fire<MyEvent>( eventInfo )` will type-check that `eventInfo` is `MyEventInfo`, not a base `EventInfo` or string.\n * \t// In `on<MyEvent>`, `once<MyEvent>` and `listenTo<MyEvent>` calls, the first callback parameter will be of this type.\n * \t// Optional.\n * \teventInfo: MyEventInfo;\n *\n * \t// In `on<MyEvent>`, `once<MyEvent>` and `listenTo<MyEvent>` calls, the `options` parameter will be of type\n * \t// `{ myOption?: boolean; priority?: PriorityString }\n * \t// Optional.\n * \tcallbackOptions: { myOption?: boolean };\n * };\n * ```\n */\nexport type BaseEvent = {\n\tname: string;\n\targs: Array<any>;\n};\n\n/**\n * Utility type that gets the `EventInfo` subclass for the given event.\n */\nexport type GetEventInfo<TEvent extends BaseEvent> = TEvent extends { eventInfo: EventInfo } ?\n\tTEvent[ 'eventInfo' ] :\n\tEventInfo<TEvent[ 'name' ], ( TEvent extends { return: infer TReturn } ? TReturn : unknown )>;\n\n/**\n * Utility type that gets the `EventInfo` subclass or event name type for the given event.\n */\nexport type GetNameOrEventInfo<TEvent extends BaseEvent> = TEvent extends { eventInfo: EventInfo } ?\n\tTEvent[ 'eventInfo' ] :\n\tTEvent[ 'name' ] | EventInfo<TEvent[ 'name' ], ( TEvent extends { return: infer TReturn } ? TReturn : unknown )>;\n\n/**\n * Utility type that gets the callback type for the given event.\n */\nexport type GetCallback<TEvent extends BaseEvent> = ( this: Emitter, ev: GetEventInfo<TEvent>, ...args: TEvent[ 'args' ] ) => void;\n\n/**\n * Utility type that gets the callback options for the given event.\n */\nexport type GetCallbackOptions<TEvent extends BaseEvent> = TEvent extends { callbackOptions: infer TOptions } ?\n\tTOptions & CallbackOptions :\n\tCallbackOptions;\n\n/**\n * Additional options for registering a callback.\n */\nexport interface CallbackOptions {\n\n\t/**\n\t * The priority of this event callback. The higher\n\t * the priority value the sooner the callback will be fired. Events having the same priority are called in the\n\t * order they were added.\n\t *\n\t * @defaultValue `'normal'`\n\t */\n\treadonly priority?: PriorityString;\n}\n\n/**\n * Checks if `listeningEmitter` listens to an emitter with given `listenedToEmitterId` and if so, returns that emitter.\n * If not, returns `null`.\n *\n * @internal\n * @param listeningEmitter An emitter that listens.\n * @param listenedToEmitterId Unique emitter id of emitter listened to.\n */\nexport function _getEmitterListenedTo( listeningEmitter: Emitter, listenedToEmitterId: string ): Emitter | null {\n\tconst listeningTo = ( listeningEmitter as EmitterInternal )[ _listeningTo ];\n\tif ( listeningTo && listeningTo[ listenedToEmitterId ] ) {\n\t\treturn listeningTo[ listenedToEmitterId ].emitter;\n\t}\n\n\treturn null;\n}\n\n/**\n * Sets emitter's unique id.\n *\n * **Note:** `_emitterId` can be set only once.\n *\n * @internal\n * @param emitter An emitter for which id will be set.\n * @param id Unique id to set. If not passed, random unique id will be set.\n */\nexport function _setEmitterId( emitter: Emitter, id?: string ): void {\n\tif ( !( emitter as EmitterInternal )[ _emitterId ] ) {\n\t\t( emitter as EmitterInternal )[ _emitterId ] = id || uid();\n\t}\n}\n\n/**\n * Returns emitter's unique id.\n *\n * @internal\n * @param emitter An emitter which id will be returned.\n */\nexport function _getEmitterId( emitter: Emitter ): string | undefined {\n\treturn ( emitter as EmitterInternal )[ _emitterId ];\n}\n\ninterface EventNode {\n\tcallbacks: Array<{ callback: Function; priority: number }>;\n\tchildEvents: Array<string>;\n}\n\n/**\n * Gets the internal `_events` property of the given object.\n * `_events` property store all lists with callbacks for registered event names.\n * If there were no events registered on the object, empty `_events` object is created.\n */\nfunction getEvents( source: EmitterInternal ): { [ eventName: string ]: EventNode } {\n\tif ( !source._events ) {\n\t\tObject.defineProperty( source, '_events', {\n\t\t\tvalue: {}\n\t\t} );\n\t}\n\n\treturn source._events!;\n}\n\n/**\n * Creates event node for generic-specific events relation architecture.\n */\nfunction makeEventNode(): EventNode {\n\treturn {\n\t\tcallbacks: [],\n\t\tchildEvents: []\n\t};\n}\n\n/**\n * Creates an architecture for generic-specific events relation.\n * If needed, creates all events for given eventName, i.e. if the first registered event\n * is foo:bar:abc, it will create foo:bar:abc, foo:bar and foo event and tie them together.\n * It also copies callbacks from more generic events to more specific events when\n * specific events are created.\n */\nfunction createEventNamespace( source: EmitterInternal, eventName: string ): void {\n\tconst events = getEvents( source );\n\n\t// First, check if the event we want to add to the structure already exists.\n\tif ( events[ eventName ] ) {\n\t\t// If it exists, we don't have to do anything.\n\t\treturn;\n\t}\n\n\t// In other case, we have to create the structure for the event.\n\t// Note, that we might need to create intermediate events too.\n\t// I.e. if foo:bar:abc is being registered and we only have foo in the structure,\n\t// we need to also register foo:bar.\n\n\t// Currently processed event name.\n\tlet name = eventName;\n\t// Name of the event that is a child event for currently processed event.\n\tlet childEventName = null;\n\n\t// Array containing all newly created specific events.\n\tconst newEventNodes = [];\n\n\t// While loop can't check for ':' index because we have to handle generic events too.\n\t// In each loop, we truncate event name, going from the most specific name to the generic one.\n\t// I.e. foo:bar:abc -> foo:bar -> foo.\n\twhile ( name !== '' ) {\n\t\tif ( events[ name ] ) {\n\t\t\t// If the currently processed event name is already registered, we can be sure\n\t\t\t// that it already has all the structure created, so we can break the loop here\n\t\t\t// as no more events need to be registered.\n\t\t\tbreak;\n\t\t}\n\n\t\t// If this event is not yet registered, create a new object for it.\n\t\tevents[ name ] = makeEventNode();\n\t\t// Add it to the array with newly created events.\n\t\tnewEventNodes.push( events[ name ] );\n\n\t\t// Add previously processed event name as a child of this event.\n\t\tif ( childEventName ) {\n\t\t\tevents[ name ].childEvents.push( childEventName );\n\t\t}\n\n\t\tchildEventName = name;\n\t\t// If `.lastIndexOf()` returns -1, `.substr()` will return '' which will break the loop.\n\t\tname = name.substr( 0, name.lastIndexOf( ':' ) );\n\t}\n\n\tif ( name !== '' ) {\n\t\t// If name is not empty, we found an already registered event that was a parent of the\n\t\t// event we wanted to register.\n\n\t\t// Copy that event's callbacks to newly registered events.\n\t\tfor ( const node of newEventNodes ) {\n\t\t\tnode.callbacks = events[ name ].callbacks.slice();\n\t\t}\n\n\t\t// Add last newly created event to the already registered event.\n\t\tevents[ name ].childEvents.push( childEventName! );\n\t}\n}\n\n/**\n * Gets an array containing callbacks list for a given event and it's more specific events.\n * I.e. if given event is foo:bar and there is also foo:bar:abc event registered, this will\n * return callback list of foo:bar and foo:bar:abc (but not foo).\n */\nfunction getCallbacksListsForNamespace( source: EmitterInternal, eventName: string ): Array<EventNode[ 'callbacks' ]> {\n\tconst eventNode = getEvents( source )[ eventName ];\n\n\tif ( !eventNode ) {\n\t\treturn [];\n\t}\n\n\tlet callbacksLists = [ eventNode.callbacks ];\n\n\tfor ( let i = 0; i < eventNode.childEvents.length; i++ ) {\n\t\tconst childCallbacksLists = getCallbacksListsForNamespace( source, eventNode.childEvents[ i ] );\n\n\t\tcallbacksLists = callbacksLists.concat( childCallbacksLists );\n\t}\n\n\treturn callbacksLists;\n}\n\n/**\n * Get the list of callbacks for a given event, but only if there any callbacks have been registered.\n * If there are no callbacks registered for given event, it checks if this is a specific event and looks\n * for callbacks for it's more generic version.\n */\nfunction getCallbacksForEvent( source: EmitterInternal, eventName: string ): EventNode[ 'callbacks' ] | null {\n\tif ( !source._events ) {\n\t\treturn null;\n\t}\n\n\tlet currentEventName = eventName;\n\n\tdo {\n\t\tconst event = source._events[ currentEventName ];\n\n\t\tif ( event && event.callbacks && event.callbacks.length ) {\n\t\t\treturn event.callbacks;\n\t\t}\n\n\t\tconst colonIndex = currentEventName.lastIndexOf( ':' );\n\n\t\tcurrentEventName = colonIndex > -1 ? currentEventName.substring( 0, colonIndex ) : '';\n\t} while ( currentEventName );\n\n\treturn null;\n}\n\n/**\n * Fires delegated events for given map of destinations.\n *\n * @param destinations A map containing `[ {@link module:utils/emittermixin~Emitter}, \"event name\" ]` pair destinations.\n * @param eventInfo The original event info object.\n * @param fireArgs Arguments the original event was fired with.\n */\nfunction fireDelegatedEvents(\n\tdestinations: Map<Emitter, string | ( ( name: string ) => string ) | undefined>,\n\teventInfo: EventInfo,\n\tfireArgs: Array<any>\n) {\n\tfor ( let [ emitter, name ] of destinations ) {\n\t\tif ( !name ) {\n\t\t\tname = eventInfo.name;\n\t\t} else if ( typeof name == 'function' ) {\n\t\t\tname = name( eventInfo.name );\n\t\t}\n\n\t\tconst delegatedInfo = new EventInfo( eventInfo.source, name );\n\n\t\tdelegatedInfo.path = [ ...eventInfo.path ];\n\n\t\temitter.fire( delegatedInfo, ...fireArgs );\n\t}\n}\n\n/**\n * Helper for registering event callback on the emitter.\n */\nfunction addEventListener<TEvent extends BaseEvent>(\n\tlistener: EmitterInternal,\n\temitter: EmitterInternal,\n\tevent: TEvent[ 'name' ],\n\tcallback: GetCallback<TEvent>,\n\toptions: CallbackOptions\n) {\n\tif ( emitter._addEventListener ) {\n\t\temitter._addEventListener( event, callback, options );\n\t} else {\n\t\t// Allow listening on objects that do not implement Emitter interface.\n\t\t// This is needed in some tests that are using mocks instead of the real objects with EmitterMixin mixed.\n\t\t( listener._addEventListener!<TEvent> ).call( emitter, event, callback, options );\n\t}\n}\n\n/**\n * Helper for removing event callback from the emitter.\n */\nfunction removeEventListener( listener: EmitterInternal, emitter: EmitterInternal, event: string, callback: Function ): void {\n\tif ( emitter._removeEventListener ) {\n\t\temitter._removeEventListener( event, callback );\n\t} else {\n\t\t// Allow listening on objects that do not implement Emitter interface.\n\t\t// This is needed in some tests that are using mocks instead of the real objects with EmitterMixin mixed.\n\t\tlistener._removeEventListener!.call( emitter, event, callback );\n\t}\n}\n\n/**\n * The return value of {@link ~Emitter#delegate}.\n */\nexport interface EmitterMixinDelegateChain {\n\n\t/**\n\t * Selects destination for {@link module:utils/emittermixin~Emitter#delegate} events.\n\t *\n\t * @param emitter An `EmitterMixin` instance which is the destination for delegated events.\n\t * @param nameOrFunction A custom event name or function which converts the original name string.\n\t */\n\tto( emitter: Emitter, nameOrFunction?: string | ( ( name: string ) => string ) ): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/* eslint-disable @typescript-eslint/unified-signatures */\n\n/**\n * @module utils/observablemixin\n */\n\nimport { EmitterMixin, type Emitter } from './emittermixin.js';\nimport { CKEditorError } from './ckeditorerror.js';\nimport type { Constructor, Mixed } from './mix.js';\n\nimport { isObject } from 'es-toolkit/compat';\n\nconst observablePropertiesSymbol = Symbol( 'observableProperties' );\nconst boundObservablesSymbol = Symbol( 'boundObservables' );\nconst boundPropertiesSymbol = Symbol( 'boundProperties' );\n\nconst decoratedMethods = Symbol( 'decoratedMethods' );\nconst decoratedOriginal = Symbol( 'decoratedOriginal' );\n\nconst defaultObservableClass = /* #__PURE__ */ ObservableMixin( /* #__PURE__ */ EmitterMixin() );\n\n/**\n * A mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * This function creates a class that inherits from the provided `base` and implements `Observable` interface.\n *\n * ```ts\n * class BaseClass { ... }\n *\n * class MyClass extends ObservableMixin( BaseClass ) {\n * \t// This class derives from `BaseClass` and implements the `Observable` interface.\n * }\n * ```\n *\n * Read more about the concept of observables in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide,\n * * {@glink framework/deep-dive/observables Observables deep-dive} guide.\n *\n * @label EXTENDS\n */\nexport function ObservableMixin<Base extends Constructor<Emitter>>( base: Base ): Mixed<Base, Observable>;\n\n/**\n * A mixin that injects the \"observable properties\" and data binding functionality described in the\n * {@link ~Observable} interface.\n *\n * This function creates a class that implements `Observable` interface.\n *\n * ```ts\n * class MyClass extends ObservableMixin() {\n * \t// This class implements the `Observable` interface.\n * }\n * ```\n *\n * Read more about the concept of observables in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide,\n * * {@glink framework/deep-dive/observables Observables deep dive} guide.\n *\n * @label NO_ARGUMENTS\n */\nexport function ObservableMixin(): {\n\tnew (): Observable;\n\tprototype: Observable;\n};\n\nexport function ObservableMixin( base?: Constructor<Emitter> ): unknown {\n\tif ( !base ) {\n\t\treturn defaultObservableClass;\n\t}\n\n\tabstract class Mixin extends base implements ObservableInternal {\n\t\tpublic set( name: string | { [ name: string ]: unknown }, value?: unknown ): void {\n\t\t\t// If the first parameter is an Object, iterate over its properties.\n\t\t\tif ( isObject( name ) ) {\n\t\t\t\tObject.keys( name ).forEach( property => {\n\t\t\t\t\tthis.set( property, name[ property ] );\n\t\t\t\t}, this );\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinitObservable( this );\n\n\t\t\tconst properties = this[ observablePropertiesSymbol ];\n\n\t\t\tif ( ( name in this ) && !properties!.has( name ) ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot override an existing property.\n\t\t\t\t *\n\t\t\t\t * This error is thrown when trying to {@link module:utils/observablemixin~Observable#set set} a property with\n\t\t\t\t * a name of an already existing property. For example:\n\t\t\t\t *\n\t\t\t\t * ```ts\n\t\t\t\t * let observable = new Model();\n\t\t\t\t * observable.property = 1;\n\t\t\t\t * observable.set( 'property', 2 );\t\t\t// throws\n\t\t\t\t *\n\t\t\t\t * observable.set( 'property', 1 );\n\t\t\t\t * observable.set( 'property', 2 );\t\t\t// ok, because this is an existing property.\n\t\t\t\t * ```\n\t\t\t\t *\n\t\t\t\t * @error observable-set-cannot-override\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-set-cannot-override', this );\n\t\t\t}\n\n\t\t\tObject.defineProperty( this, name, {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\n\t\t\t\tget() {\n\t\t\t\t\treturn properties!.get( name );\n\t\t\t\t},\n\n\t\t\t\tset( this: Observable, value ) {\n\t\t\t\t\tconst oldValue = properties!.get( name );\n\n\t\t\t\t\t// Fire `set` event before the new value will be set to make it possible\n\t\t\t\t\t// to override observable property without affecting `change` event.\n\t\t\t\t\t// See https://github.com/ckeditor/ckeditor5-utils/issues/171.\n\t\t\t\t\tlet newValue = this.fire<ObservableSetEvent>( `set:${ name }`, name, value, oldValue );\n\n\t\t\t\t\tif ( newValue === undefined ) {\n\t\t\t\t\t\tnewValue = value;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Allow undefined as an initial value like A.define( 'x', undefined ) (#132).\n\t\t\t\t\t// Note: When properties map has no such own property, then its value is undefined.\n\t\t\t\t\tif ( oldValue !== newValue || !properties!.has( name ) ) {\n\t\t\t\t\t\tproperties!.set( name, newValue );\n\t\t\t\t\t\tthis.fire<ObservableChangeEvent>( `change:${ name }`, name, newValue, oldValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t( this as any )[ name ] = value;\n\t\t}\n\n\t\tpublic bind( ...bindProperties: Array<string> ): any {\n\t\t\tif ( !bindProperties.length || !isStringArray( bindProperties ) ) {\n\t\t\t\t/**\n\t\t\t\t * All properties must be strings.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-wrong-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-wrong-properties', this );\n\t\t\t}\n\n\t\t\tif ( ( new Set( bindProperties ) ).size !== bindProperties.length ) {\n\t\t\t\t/**\n\t\t\t\t * Properties must be unique.\n\t\t\t\t *\n\t\t\t\t * @error observable-bind-duplicate-properties\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'observable-bind-duplicate-properties', this );\n\t\t\t}\n\n\t\t\tinitObservable( this );\n\n\t\t\tconst boundProperties = this[ boundPropertiesSymbol ];\n\n\t\t\tbindProperties.forEach( propertyName => {\n\t\t\t\tif ( boundProperties!.has( propertyName ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Cannot bind the same property more than once.\n\t\t\t\t\t *\n\t\t\t\t\t * @error observable-bind-rebind\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'observable-bind-rebind', this );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\tconst bindings = new Map<string, Binding>();\n\n\t\t\tbindProperties.forEach( a => {\n\t\t\t\tconst binding = { property: a, to: [] };\n\n\t\t\t\tboundProperties!.set( a, binding );\n\t\t\t\tbindings.set( a, binding );\n\t\t\t} );\n\n\t\t\treturn {\n\t\t\t\tto: bindTo,\n\t\t\t\ttoMany: bindToMany,\n\n\t\t\t\t_observable: this,\n\t\t\t\t_bindProperties: bindProperties,\n\t\t\t\t_to: [],\n\t\t\t\t_bindings: bindings\n\t\t\t};\n\t\t}\n\n\t\tpublic unbind( ...unbindProperties: Array<keyof this & string> ): void {\n\t\t\t// Nothing to do here if not inited yet.\n\t\t\tif ( !( this[ observablePropertiesSymbol ] ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst boundProperties = this[ boundPropertiesSymbol ]!;\n\t\t\tconst boundObservables = this[ boundObservablesSymbol ]!;\n\n\t\t\tif ( unbindProperties.length ) {\n\t\t\t\tif ( !isStringArray( unbindProperties ) ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * Properties must be strings.\n\t\t\t\t\t *\n\t\t\t\t\t * @error observable-unbind-wrong-properties\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'observable-unbind-wrong-properties', this );\n\t\t\t\t}\n\n\t\t\t\tunbindProperties.forEach( propertyName => {\n\t\t\t\t\tconst binding = boundProperties.get( propertyName );\n\n\t\t\t\t\t// Nothing to do if the binding is not defined\n\t\t\t\t\tif ( !binding ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbinding.to.forEach( ( [ toObservable, toProperty ] ) => {\n\t\t\t\t\t\tconst toProperties = boundObservables.get( toObservable )!;\n\t\t\t\t\t\tconst toPropertyBindings = toProperties[ toProperty ];\n\n\t\t\t\t\t\ttoPropertyBindings.delete( binding );\n\n\t\t\t\t\t\tif ( !toPropertyBindings.size ) {\n\t\t\t\t\t\t\tdelete toProperties[ toProperty ];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( !Object.keys( toProperties ).length ) {\n\t\t\t\t\t\t\tboundObservables.delete( toObservable );\n\t\t\t\t\t\t\tthis.stopListening( toObservable, 'change' );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t\tboundProperties.delete( propertyName );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tboundObservables.forEach( ( bindings, boundObservable ) => {\n\t\t\t\t\tthis.stopListening( boundObservable, 'change' );\n\t\t\t\t} );\n\n\t\t\t\tboundObservables.clear();\n\t\t\t\tboundProperties.clear();\n\t\t\t}\n\t\t}\n\n\t\tpublic decorate( this: this & { [ x: string ]: any }, methodName: keyof this & string ): void {\n\t\t\tinitObservable( this );\n\n\t\t\tconst originalMethod = this[ methodName ];\n\n\t\t\tif ( !originalMethod ) {\n\t\t\t\t/**\n\t\t\t\t * Cannot decorate an undefined method.\n\t\t\t\t *\n\t\t\t\t * @error observablemixin-cannot-decorate-undefined\n\t\t\t\t * @param {object} object The object which method should be decorated.\n\t\t\t\t * @param {string} methodName Name of the method which does not exist.\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError(\n\t\t\t\t\t'observablemixin-cannot-decorate-undefined',\n\t\t\t\t\tthis,\n\t\t\t\t\t{ object: this, methodName }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.on( methodName, ( evt, args ) => {\n\t\t\t\tevt.return = originalMethod.apply( this, args );\n\t\t\t} );\n\n\t\t\tthis[ methodName ] = function( ...args: Array<unknown> ) {\n\t\t\t\treturn this.fire( methodName, args );\n\t\t\t};\n\n\t\t\tthis[ methodName ][ decoratedOriginal ] = originalMethod;\n\n\t\t\tif ( !this[ decoratedMethods ] ) {\n\t\t\t\tthis[ decoratedMethods ] = [];\n\t\t\t}\n\n\t\t\tthis[ decoratedMethods ]!.push( methodName );\n\t\t}\n\n\t\t// Override the EmitterMixin stopListening method to be able to clean (and restore) decorated methods.\n\t\t// This is needed in case of:\n\t\t//  1. Have x.foo() decorated.\n\t\t//  2. Call x.stopListening()\n\t\t//  3. Call x.foo(). Problem: nothing happens (the original foo() method is not executed)\n\t\tpublic override stopListening(\n\t\t\tthis: ObservableInternal & { [ x: string ]: any },\n\t\t\temitter?: Emitter,\n\t\t\tevent?: string,\n\t\t\tcallback?: Function\n\t\t): void {\n\t\t\t// Removing all listeners so let's clean the decorated methods to the original state.\n\t\t\tif ( !emitter && this[ decoratedMethods ] ) {\n\t\t\t\tfor ( const methodName of this[ decoratedMethods ]! ) {\n\t\t\t\t\tthis[ methodName ] = this[ methodName ][ decoratedOriginal ];\n\t\t\t\t}\n\n\t\t\t\tdelete this[ decoratedMethods ];\n\t\t\t}\n\n\t\t\tsuper.stopListening( emitter, event, callback );\n\t\t}\n\n\t\tpublic [ observablePropertiesSymbol ]?: Map<string, unknown>;\n\n\t\tpublic [ decoratedMethods ]?: Array<string>;\n\n\t\tpublic [ boundPropertiesSymbol ]?: Map<string, Binding>;\n\n\t\tpublic [ boundObservablesSymbol ]?: Map<Observable, Record<string, Set<Binding>>>;\n\t}\n\n\treturn Mixin;\n}\n\ninterface Binding {\n\n\t/**\n\t * Property which is bound.\n\t */\n\tproperty: string;\n\n\t/**\n\t * Array of observable–property components of the binding (`{ observable: ..., property: .. }`).\n\t */\n\tto: Array<[ Observable, string ]>;\n\n\t/**\n\t * A function which processes `to` components.\n\t */\n\tcallback?: Function;\n}\n\ninterface BindChainInternal {\n\tto: Function;\n\t_observable: Observable;\n\t_bindings: Map<string, Binding>;\n\t_bindProperties: Array<string>;\n\t_to: Array<{\n\t\tobservable: Observable;\n\t\tproperties: Array<string>;\n\t}>;\n}\n\n// Init symbol properties needed for the observable mechanism to work.\nfunction initObservable( observable: ObservableInternal ): void {\n\t// Do nothing if already inited.\n\tif ( observable[ observablePropertiesSymbol ] ) {\n\t\treturn;\n\t}\n\n\t// The internal hash containing the observable's state.\n\tObject.defineProperty( observable, observablePropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Map containing bindings to external observables. It shares the binding objects\n\t// (`{ observable: A, property: 'a', to: ... }`) with {@link module:utils/observablemixin~Observable#_boundProperties} and\n\t// it is used to observe external observables to update own properties accordingly.\n\t// See {@link module:utils/observablemixin~Observable#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundObservables );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\tB: {\n\t//\t\t\t\t\tx: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\t\t\t{ observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\ty: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\t\t] ),\n\t//\t\t\t\t\tz: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t},\n\t//\t\t\t\tC: {\n\t//\t\t\t\t\tw: Set( [\n\t//\t\t\t\t\t\t{ observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t\t\t] )\n\t//\t\t\t\t}\n\t//\t\t\t} )\n\t//\n\tObject.defineProperty( observable, boundObservablesSymbol, {\n\t\tvalue: new Map()\n\t} );\n\n\t// Object that stores which properties of this observable are bound and how. It shares\n\t// the binding objects (`{ observable: A, property: 'a', to: ... }`) with\n\t// {@link module:utils/observablemixin~Observable#_boundObservables}. This data structure is\n\t// a reverse of {@link module:utils/observablemixin~Observable#_boundObservables} and it is helpful for\n\t// {@link module:utils/observablemixin~Observable#unbind}.\n\t//\n\t// See {@link module:utils/observablemixin~Observable#bind}.\n\t//\n\t//\t\tA.bind( 'a', 'b', 'c' ).to( B, 'x', 'y', 'x' );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] }\n\t//\t\t\t} )\n\t//\n\t//\t\tA.bind( 'd' ).to( B, 'z' ).to( C, 'w' ).as( callback );\n\t//\t\tconsole.log( A._boundProperties );\n\t//\n\t//\t\t\tMap( {\n\t//\t\t\t\ta: { observable: A, property: 'a', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\tb: { observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n\t//\t\t\t\tc: { observable: A, property: 'c', to: [ [ B, 'x' ] ] },\n\t//\t\t\t\td: { observable: A, property: 'd', to: [ [ B, 'z' ], [ C, 'w' ] ], callback: callback }\n\t//\t\t\t} )\n\tObject.defineProperty( observable, boundPropertiesSymbol, {\n\t\tvalue: new Map()\n\t} );\n}\n\n/**\n * A chaining for {@link module:utils/observablemixin~Observable#bind} providing `.to()` interface.\n *\n * @param args Arguments of the `.to( args )` binding.\n */\nfunction bindTo( this: BindChainInternal, ...args: Array<Observable | string | Function> ): void {\n\tconst parsedArgs = parseBindToArgs( ...args );\n\tconst bindingsKeys = Array.from( this._bindings.keys() );\n\tconst numberOfBindings = bindingsKeys.length;\n\n\t// Eliminate A.bind( 'x' ).to( B, C )\n\tif ( !parsedArgs.callback && parsedArgs.to.length > 1 ) {\n\t\t/**\n\t\t * Binding multiple observables only possible with callback.\n\t\t *\n\t\t * @error observable-bind-to-no-callback\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-no-callback', this );\n\t}\n\n\t// Eliminate A.bind( 'x', 'y' ).to( B, callback )\n\tif ( numberOfBindings > 1 && parsedArgs.callback ) {\n\t\t/**\n\t\t * Cannot bind multiple properties and use a callback in one binding.\n\t\t *\n\t\t * @error observable-bind-to-extra-callback\n\t\t */\n\t\tthrow new CKEditorError(\n\t\t\t'observable-bind-to-extra-callback',\n\t\t\tthis\n\t\t);\n\t}\n\n\tparsedArgs.to.forEach( to => {\n\t\t// Eliminate A.bind( 'x', 'y' ).to( B, 'a' )\n\t\tif ( to.properties.length && to.properties.length !== numberOfBindings ) {\n\t\t\t/**\n\t\t\t * The number of properties must match.\n\t\t\t *\n\t\t\t * @error observable-bind-to-properties-length\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'observable-bind-to-properties-length', this );\n\t\t}\n\n\t\t// When no to.properties specified, observing source properties instead i.e.\n\t\t// A.bind( 'x', 'y' ).to( B ) -> Observe B.x and B.y\n\t\tif ( !to.properties.length ) {\n\t\t\tto.properties = this._bindProperties;\n\t\t}\n\t} );\n\n\tthis._to = parsedArgs.to;\n\n\t// Fill {@link BindChain#_bindings} with callback. When the callback is set there's only one binding.\n\tif ( parsedArgs.callback ) {\n\t\tthis._bindings.get( bindingsKeys[ 0 ] )!.callback = parsedArgs.callback;\n\t}\n\n\tattachBindToListeners( this._observable, this._to );\n\n\t// Update observable._boundProperties and observable._boundObservables.\n\tupdateBindToBound( this );\n\n\t// Set initial values of bound properties.\n\tthis._bindProperties.forEach( propertyName => {\n\t\tupdateBoundObservableProperty( this._observable, propertyName );\n\t} );\n}\n\n/**\n * Binds to an attribute in a set of iterable observables.\n */\nfunction bindToMany( this: BindChainInternal, observables: Array<Observable>, attribute: string, callback: Function ): void {\n\tif ( this._bindings.size > 1 ) {\n\t\t/**\n\t\t * Binding one attribute to many observables only possible with one attribute.\n\t\t *\n\t\t * @error observable-bind-to-many-not-one-binding\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-many-not-one-binding', this );\n\t}\n\n\tthis.to(\n\t\t// Bind to #attribute of each observable...\n\t\t...getBindingTargets( observables, attribute ),\n\t\t// ...using given callback to parse attribute values.\n\t\tcallback\n\t);\n}\n\n/**\n * Returns an array of binding components for\n * {@link Observable#bind} from a set of iterable observables.\n */\nfunction getBindingTargets( observables: Array<Observable>, attribute: string ): Array<Observable | string> {\n\tconst observableAndAttributePairs = observables.map( observable => [ observable, attribute ] );\n\n\t// Merge pairs to one-dimension array of observables and attributes.\n\treturn Array.prototype.concat.apply( [], observableAndAttributePairs );\n}\n\n/**\n * Check if all entries of the array are of `String` type.\n */\nfunction isStringArray( arr: Array<unknown> ): arr is Array<string> {\n\treturn arr.every( a => typeof a == 'string' );\n}\n\n/**\n * Parses and validates {@link Observable#bind}`.to( args )` arguments and returns\n * an object with a parsed structure. For example\n *\n * ```ts\n * A.bind( 'x' ).to( B, 'a', C, 'b', call );\n * ```\n *\n * becomes\n *\n * ```ts\n * {\n * \tto: [\n * \t\t{ observable: B, properties: [ 'a' ] },\n * \t\t{ observable: C, properties: [ 'b' ] },\n * \t],\n * \tcallback: call\n * }\n *\n * @param args Arguments of {@link Observable#bind}`.to( args )`.\n */\nfunction parseBindToArgs( ...args: Array<Observable | string | Function> ) {\n\t// Eliminate A.bind( 'x' ).to()\n\tif ( !args.length ) {\n\t\t/**\n\t\t * Invalid argument syntax in `to()`.\n\t\t *\n\t\t * @error observable-bind-to-parse-error\n\t\t */\n\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t}\n\n\tconst parsed: { to: BindChainInternal[ '_to' ]; callback?: Function } = { to: [] };\n\tlet lastObservable: { observable: Observable; properties: Array<string> };\n\n\tif ( typeof args[ args.length - 1 ] == 'function' ) {\n\t\tparsed.callback = args.pop() as Function;\n\t}\n\n\targs.forEach( a => {\n\t\tif ( typeof a == 'string' ) {\n\t\t\tlastObservable.properties.push( a );\n\t\t} else if ( typeof a == 'object' ) {\n\t\t\tlastObservable = { observable: a, properties: [] };\n\t\t\tparsed.to.push( lastObservable );\n\t\t} else {\n\t\t\tthrow new CKEditorError( 'observable-bind-to-parse-error', null );\n\t\t}\n\t} );\n\n\treturn parsed;\n}\n\n/**\n * Synchronizes {@link module:utils/observable#_boundObservables} with {@link Binding}.\n *\n * @param binding A binding to store in {@link Observable#_boundObservables}.\n * @param toObservable A observable, which is a new component of `binding`.\n * @param toPropertyName A name of `toObservable`'s property, a new component of the `binding`.\n */\nfunction updateBoundObservables(\n\tobservable: ObservableInternal,\n\tbinding: Binding,\n\ttoObservable: Observable,\n\ttoPropertyName: string\n): void {\n\tconst boundObservables = observable[ boundObservablesSymbol ]!;\n\tconst bindingsToObservable = boundObservables.get( toObservable );\n\tconst bindings = bindingsToObservable || {};\n\n\tif ( !bindings[ toPropertyName ] ) {\n\t\tbindings[ toPropertyName ] = new Set();\n\t}\n\n\t// Pass the binding to a corresponding Set in `observable._boundObservables`.\n\tbindings[ toPropertyName ].add( binding );\n\n\tif ( !bindingsToObservable ) {\n\t\tboundObservables.set( toObservable, bindings );\n\t}\n}\n\n/**\n * Synchronizes {@link Observable#_boundProperties} and {@link Observable#_boundObservables}\n * with {@link BindChain}.\n *\n * Assuming the following binding being created\n *\n * ```ts\n * A.bind( 'a', 'b' ).to( B, 'x', 'y' );\n * ```\n *\n * the following bindings were initialized by {@link Observable#bind} in {@link BindChain#_bindings}:\n *\n * ```ts\n * {\n * \ta: { observable: A, property: 'a', to: [] },\n * \tb: { observable: A, property: 'b', to: [] },\n * }\n * ```\n *\n * Iterate over all bindings in this chain and fill their `to` properties with\n * corresponding to( ... ) arguments (components of the binding), so\n *\n * ```ts\n * {\n * \ta: { observable: A, property: 'a', to: [ B, 'x' ] },\n * \tb: { observable: A, property: 'b', to: [ B, 'y' ] },\n * }\n * ```\n *\n * Then update the structure of {@link Observable#_boundObservables} with updated\n * binding, so it becomes:\n *\n * ```ts\n * Map( {\n * \tB: {\n * \t\tx: Set( [\n * \t\t\t{ observable: A, property: 'a', to: [ [ B, 'x' ] ] }\n * \t\t] ),\n * \t\ty: Set( [\n * \t\t\t{ observable: A, property: 'b', to: [ [ B, 'y' ] ] },\n * \t\t] )\n * \t}\n * } )\n * ```\n *\n * @param chain The binding initialized by {@link Observable#bind}.\n */\nfunction updateBindToBound( chain: BindChainInternal ): void {\n\tlet toProperty;\n\n\tchain._bindings.forEach( ( binding, propertyName ) => {\n\t\t// Note: For a binding without a callback, this will run only once\n\t\t// like in A.bind( 'x', 'y' ).to( B, 'a', 'b' )\n\t\t// TODO: ES6 destructuring.\n\t\tchain._to.forEach( to => {\n\t\t\ttoProperty = to.properties[ binding.callback ? 0 : chain._bindProperties.indexOf( propertyName ) ];\n\n\t\t\tbinding.to.push( [ to.observable, toProperty ] );\n\t\t\tupdateBoundObservables( chain._observable, binding, to.observable, toProperty );\n\t\t} );\n\t} );\n}\n\n/**\n * Updates an property of a {@link Observable} with a value\n * determined by an entry in {@link Observable#_boundProperties}.\n *\n * @param observable A observable which property is to be updated.\n * @param propertyName An property to be updated.\n */\nfunction updateBoundObservableProperty( observable: ObservableInternal, propertyName: string ): void {\n\tconst boundProperties = observable[ boundPropertiesSymbol ]!;\n\tconst binding = boundProperties.get( propertyName )!;\n\tlet propertyValue;\n\n\t// When a binding with callback is created like\n\t//\n\t// \t\tA.bind( 'a' ).to( B, 'b', C, 'c', callback );\n\t//\n\t// collect B.b and C.c, then pass them to callback to set A.a.\n\tif ( binding.callback ) {\n\t\tpropertyValue = binding.callback.apply( observable, binding.to.map( to => ( to[ 0 ] as any )[ to[ 1 ] ] ) );\n\t} else {\n\t\tpropertyValue = binding.to[ 0 ];\n\t\tpropertyValue = ( propertyValue[ 0 ] as any )[ propertyValue[ 1 ] ];\n\t}\n\n\tif ( Object.prototype.hasOwnProperty.call( observable, propertyName ) ) {\n\t\t( observable as any )[ propertyName ] = propertyValue;\n\t} else {\n\t\tobservable.set( propertyName as any, propertyValue );\n\t}\n}\n\n/**\n * Starts listening to changes in {@link BindChain._to} observables to update\n * {@link BindChain._observable} {@link BindChain._bindProperties}. Also sets the\n * initial state of {@link BindChain._observable}.\n *\n * @param chain The chain initialized by {@link Observable#bind}.\n */\nfunction attachBindToListeners( observable: ObservableInternal, toBindings: BindChainInternal[ '_to' ] ): void {\n\ttoBindings.forEach( to => {\n\t\tconst boundObservables = observable[ boundObservablesSymbol ]!;\n\t\tlet bindings;\n\n\t\t// If there's already a chain between the observables (`observable` listens to\n\t\t// `to.observable`), there's no need to create another `change` event listener.\n\t\tif ( !boundObservables.get( to.observable ) ) {\n\t\t\tobservable.listenTo<ObservableChangeEvent>( to.observable, 'change', ( evt, propertyName ) => {\n\t\t\t\tbindings = boundObservables.get( to.observable )![ propertyName ];\n\n\t\t\t\t// Note: to.observable will fire for any property change, react\n\t\t\t\t// to changes of properties which are bound only.\n\t\t\t\tif ( bindings ) {\n\t\t\t\t\tbindings.forEach( binding => {\n\t\t\t\t\t\tupdateBoundObservableProperty( observable, binding.property );\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n}\n\n/**\n * An interface which adds \"observable properties\" and data binding functionality.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/observablemixin~Observable} mixin.\n *\n * ```ts\n * class MyClass extends ObservableMixin( OtherBaseClass ) {\n * \t// This class now implements the `Observable` interface.\n * }\n * ```\n *\n * Read more about the usage of this interface in the:\n * * {@glink framework/architecture/core-editor-architecture#event-system-and-observables Event system and observables}\n * section of the {@glink framework/architecture/core-editor-architecture Core editor architecture} guide,\n * * {@glink framework/deep-dive/observables Observables deep-dive} guide.\n */\nexport interface Observable extends Emitter {\n\n\t/**\n\t * Creates and sets the value of an observable property of this object. Such a property becomes a part\n\t * of the state and is observable.\n\t *\n\t * This method throws the `observable-set-cannot-override` error if the observable instance already\n\t * has a property with the given property name. This prevents from mistakenly overriding existing\n\t * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n\t *\n\t * In TypeScript, those properties should be declared in class using `declare` keyword. In example:\n\t *\n\t * ```ts\n\t * public declare myProp: number;\n\t *\n\t * constructor() {\n\t * \tthis.set( 'myProp', 2 );\n\t * }\n\t * ```\n\t *\n\t * @label KEY_VALUE\n\t * @param name The property's name.\n\t * @param value The property's value.\n\t */\n\tset<K extends keyof this & string>( name: K, value: this[ K ] ): void;\n\n\t/**\n\t * Creates and sets the value of an observable properties of this object. Such a property becomes a part\n\t * of the state and is observable.\n\t *\n\t * It accepts a single object literal containing key/value pairs with properties to be set.\n\t *\n\t * This method throws the `observable-set-cannot-override` error if the observable instance already\n\t * has a property with the given property name. This prevents from mistakenly overriding existing\n\t * properties and methods, but means that `foo.set( 'bar', 1 )` may be slightly slower than `foo.bar = 1`.\n\t *\n\t * In TypeScript, those properties should be declared in class using `declare` keyword. In example:\n\t *\n\t * ```ts\n\t * public declare myProp1: number;\n\t * public declare myProp2: string;\n\t *\n\t * constructor() {\n\t * \tthis.set( {\n\t * \t\t'myProp1: 2,\n\t * \t\t'myProp2: 'foo'\n\t * \t} );\n\t * }\n\t * ```\n\t * @label OBJECT\n\t * @param values An object with `name=>value` pairs.\n\t */\n\tset( values: object & { readonly [ K in keyof this ]?: unknown } ): void;\n\n\t/**\n\t * Binds {@link #set observable properties} to other objects implementing the\n\t * {@link module:utils/observablemixin~Observable} interface.\n\t *\n\t * Read more in the {@glink framework/deep-dive/observables#property-bindings dedicated} guide\n\t * covering the topic of property bindings with some additional examples.\n\t *\n\t * Consider two objects: a `button` and an associated `command` (both `Observable`).\n\t *\n\t * A simple property binding could be as follows:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled' );\n\t * ```\n\t *\n\t * or even shorter:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * ```\n\t *\n\t * which works in the following way:\n\t *\n\t * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n\t * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n\t *\n\t * **Note**: To release the binding, use {@link module:utils/observablemixin~Observable#unbind}.\n\t *\n\t * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isWorking' );\n\t * ```\n\t *\n\t * It is possible to bind more than one property at a time to shorten the code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled', 'value' ).to( command );\n\t * ```\n\t *\n\t * which corresponds to:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * button.bind( 'value' ).to( command );\n\t * ```\n\t *\n\t * The binding can include more than one observable, combining multiple data sources in a custom callback:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n\t * \t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n\t * ```\n\t *\n\t * Using a custom callback allows processing the value before passing it to the target property:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'value', value => value === 'heading1' );\n\t * ```\n\t *\n\t * It is also possible to bind to the same property in an array of observables.\n\t * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n\t * must be enabled for the button to become enabled, use the following code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n\t * \t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n\t * ```\n\t *\n\t * @label SINGLE_BIND\n\t * @param bindProperty Observable property that will be bound to other observable(s).\n\t * @returns The bind chain with the `to()` and `toMany()` methods.\n\t */\n\tbind<K extends keyof this & string>(\n\t\tbindProperty: K\n\t): ObservableSingleBindChain<K, this[ K ]>;\n\n\t/**\n\t * Binds {@link #set observable properties} to other objects implementing the\n\t * {@link module:utils/observablemixin~Observable} interface.\n\t *\n\t * Read more in the {@glink framework/deep-dive/observables#property-bindings dedicated} guide\n\t * covering the topic of property bindings with some additional examples.\n\t *\n\t * Consider two objects: a `button` and an associated `command` (both `Observable`).\n\t *\n\t * A simple property binding could be as follows:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled' );\n\t * ```\n\t *\n\t * or even shorter:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * ```\n\t *\n\t * which works in the following way:\n\t *\n\t * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n\t * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n\t *\n\t * **Note**: To release the binding, use {@link module:utils/observablemixin~Observable#unbind}.\n\t *\n\t * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isWorking' );\n\t * ```\n\t *\n\t * It is possible to bind more than one property at a time to shorten the code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled', 'value' ).to( command );\n\t * ```\n\t *\n\t * which corresponds to:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * button.bind( 'value' ).to( command );\n\t * ```\n\t *\n\t * The binding can include more than one observable, combining multiple data sources in a custom callback:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n\t * \t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n\t * ```\n\t *\n\t * Using a custom callback allows processing the value before passing it to the target property:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'value', value => value === 'heading1' );\n\t * ```\n\t *\n\t * It is also possible to bind to the same property in an array of observables.\n\t * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n\t * must be enabled for the button to become enabled, use the following code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n\t * \t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n\t * ```\n\t *\n\t * @label DUAL_BIND\n\t * @param bindProperty1 Observable property that will be bound to other observable(s).\n\t * @param bindProperty2 Observable property that will be bound to other observable(s).\n\t * @returns The bind chain with the `to()` and `toMany()` methods.\n\t */\n\tbind<K1 extends keyof this & string, K2 extends keyof this & string>(\n\t\tbindProperty1: K1,\n\t\tbindProperty2: K2\n\t): ObservableDualBindChain<K1, this[ K1 ], K2, this[ K2 ]>;\n\n\t/**\n\t * Binds {@link #set observable properties} to other objects implementing the\n\t * {@link module:utils/observablemixin~Observable} interface.\n\t *\n\t * Read more in the {@glink framework/deep-dive/observables#property-bindings dedicated} guide\n\t * covering the topic of property bindings with some additional examples.\n\t *\n\t * Consider two objects: a `button` and an associated `command` (both `Observable`).\n\t *\n\t * A simple property binding could be as follows:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled' );\n\t * ```\n\t *\n\t * or even shorter:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * ```\n\t *\n\t * which works in the following way:\n\t *\n\t * * `button.isEnabled` **instantly equals** `command.isEnabled`,\n\t * * whenever `command.isEnabled` changes, `button.isEnabled` will immediately reflect its value.\n\t *\n\t * **Note**: To release the binding, use {@link module:utils/observablemixin~Observable#unbind}.\n\t *\n\t * You can also \"rename\" the property in the binding by specifying the new name in the `to()` chain:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isWorking' );\n\t * ```\n\t *\n\t * It is possible to bind more than one property at a time to shorten the code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled', 'value' ).to( command );\n\t * ```\n\t *\n\t * which corresponds to:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command );\n\t * button.bind( 'value' ).to( command );\n\t * ```\n\t *\n\t * The binding can include more than one observable, combining multiple data sources in a custom callback:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'isEnabled', ui, 'isVisible',\n\t * \t( isCommandEnabled, isUIVisible ) => isCommandEnabled && isUIVisible );\n\t * ```\n\t *\n\t * Using a custom callback allows processing the value before passing it to the target property:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).to( command, 'value', value => value === 'heading1' );\n\t * ```\n\t *\n\t * It is also possible to bind to the same property in an array of observables.\n\t * To bind a `button` to multiple commands (also `Observables`) so that each and every one of them\n\t * must be enabled for the button to become enabled, use the following code:\n\t *\n\t * ```ts\n\t * button.bind( 'isEnabled' ).toMany( [ commandA, commandB, commandC ], 'isEnabled',\n\t * \t( isAEnabled, isBEnabled, isCEnabled ) => isAEnabled && isBEnabled && isCEnabled );\n\t * ```\n\t *\n\t * @label MANY_BIND\n\t * @param bindProperties Observable properties that will be bound to other observable(s).\n\t * @returns The bind chain with the `to()` and `toMany()` methods.\n\t */\n\tbind( ...bindProperties: Array<keyof this & string> ): ObservableMultiBindChain;\n\n\t/**\n\t * Removes the binding created with {@link #bind}.\n\t *\n\t * ```ts\n\t * // Removes the binding for the 'a' property.\n\t * A.unbind( 'a' );\n\t *\n\t * // Removes bindings for all properties.\n\t * A.unbind();\n\t * ```\n\t *\n\t * @param unbindProperties Observable properties to be unbound. All the bindings will\n\t * be released if no properties are provided.\n\t */\n\tunbind( ...unbindProperties: Array<keyof this & string> ): void;\n\n\t/**\n\t * Turns the given methods of this object into event-based ones. This means that the new method will fire an event\n\t * (named after the method) and the original action will be plugged as a listener to that event.\n\t *\n\t * Read more in the {@glink framework/deep-dive/observables#decorating-object-methods dedicated} guide\n\t * covering the topic of decorating methods with some additional examples.\n\t *\n\t * Decorating the method does not change its behavior (it only adds an event),\n\t * but it allows to modify it later on by listening to the method's event.\n\t *\n\t * For example, to cancel the method execution the event can be {@link module:utils/eventinfo~EventInfo#stop stopped}:\n\t *\n\t * ```ts\n\t * class Foo extends ObservableMixin() {\n\t * \tconstructor() {\n\t * \t\tsuper();\n\t * \t\tthis.decorate( 'method' );\n\t * \t}\n\t *\n\t * \tmethod() {\n\t * \t\tconsole.log( 'called!' );\n\t * \t}\n\t * }\n\t *\n\t * const foo = new Foo();\n\t * foo.on( 'method', ( evt ) => {\n\t * \tevt.stop();\n\t * }, { priority: 'high' } );\n\t *\n\t * foo.method(); // Nothing is logged.\n\t * ```\n\t *\n\t *\n\t * **Note**: The high {@link module:utils/priorities~PriorityString priority} listener\n\t * has been used to execute this particular callback before the one which calls the original method\n\t * (which uses the \"normal\" priority).\n\t *\n\t * It is also possible to change the returned value:\n\t *\n\t * ```ts\n\t * foo.on( 'method', ( evt ) => {\n\t * \tevt.return = 'Foo!';\n\t * } );\n\t *\n\t * foo.method(); // -> 'Foo'\n\t * ```\n\t *\n\t * Finally, it is possible to access and modify the arguments the method is called with:\n\t *\n\t * ```ts\n\t * method( a, b ) {\n\t * \tconsole.log( `${ a }, ${ b }`  );\n\t * }\n\t *\n\t * // ...\n\t *\n\t * foo.on( 'method', ( evt, args ) => {\n\t * \targs[ 0 ] = 3;\n\t *\n\t * \tconsole.log( args[ 1 ] ); // -> 2\n\t * }, { priority: 'high' } );\n\t *\n\t * foo.method( 1, 2 ); // -> '3, 2'\n\t * ```\n\t *\n\t * @param methodName Name of the method to decorate.\n\t */\n\tdecorate( methodName: keyof this & string ): void;\n}\n\ninterface ObservableInternal extends Observable {\n\t[ observablePropertiesSymbol ]?: Map<string, unknown>;\n\n\t[ decoratedMethods ]?: Array<string>;\n\n\t[ boundPropertiesSymbol ]?: Map<string, Binding>;\n\n\t[ boundObservablesSymbol]?: Map<Observable, Record<string, Set<Binding>>>;\n}\n\n/**\n * Fired when a property changed value.\n *\n * ```ts\n * observable.set( 'prop', 1 );\n *\n * observable.on<ObservableChangeEvent<number>>( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n * \tconsole.log( `${ propertyName } has changed from ${ oldValue } to ${ newValue }` );\n * } );\n *\n * observable.prop = 2; // -> 'prop has changed from 1 to 2'\n * ```\n *\n * @eventName ~Observable#change:\\{property\\}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\nexport type ObservableChangeEvent<TValue = any> = {\n\tname: 'change' | `change:${ string }`;\n\targs: [ name: string, value: TValue, oldValue: TValue ];\n};\n\n/**\n * Fired when a property value is going to be set but is not set yet (before the `change` event is fired).\n *\n * You can control the final value of the property by using\n * the {@link module:utils/eventinfo~EventInfo#return event's `return` property}.\n *\n * ```ts\n * observable.set( 'prop', 1 );\n *\n * observable.on<ObservableSetEvent<number>>( 'set:prop', ( evt, propertyName, newValue, oldValue ) => {\n * \tconsole.log( `Value is going to be changed from ${ oldValue } to ${ newValue }` );\n * \tconsole.log( `Current property value is ${ observable[ propertyName ] }` );\n *\n * \t// Let's override the value.\n * \tevt.return = 3;\n * } );\n *\n * observable.on<ObservableChangeEvent<number>>( 'change:prop', ( evt, propertyName, newValue, oldValue ) => {\n * \tconsole.log( `Value has changed from ${ oldValue } to ${ newValue }` );\n * } );\n *\n * observable.prop = 2; // -> 'Value is going to be changed from 1 to 2'\n *                      // -> 'Current property value is 1'\n *                      // -> 'Value has changed from 1 to 3'\n * ```\n *\n * **Note:** The event is fired even when the new value is the same as the old value.\n *\n * @eventName ~Observable#set:\\{property\\}\n * @param {String} name The property name.\n * @param {*} value The new property value.\n * @param {*} oldValue The previous property value.\n */\nexport type ObservableSetEvent<TValue = any> = {\n\tname: 'set' | `set:${ string }`;\n\targs: [ name: string, value: TValue, oldValue: TValue ];\n\treturn: TValue;\n};\n\n/**\n * Utility type that creates an event describing type from decorated method.\n *\n * ```ts\n * class Foo extends ObservableMixin() {\n * \tconstructor() {\n * \t\tsuper();\n * \t\tthis.decorate( 'method' );\n * \t}\n *\n * \tmethod( a: number, b: number ): number {\n * \t\treturn a + b;\n * \t}\n * }\n *\n * type FooMethodEvent = DecoratedMethodEvent<Foo, 'method'>;\n *\n * const foo = new Foo();\n *\n * foo.on<FooMethodEvent>( 'method', ( evt, [ a, b ] ) => {\n * \t// `a` and `b` are inferred as numbers.\n * } )\n * ```\n */\nexport type DecoratedMethodEvent<\n\tTObservable extends Observable & { [ N in TName ]: ( ...args: Array<any> ) => any },\n\tTName extends keyof TObservable & string\n> = {\n\tname: TName;\n\targs: [ Parameters<TObservable[ TName ]> ];\n\treturn: ReturnType<TObservable[ TName ]>;\n};\n\nexport interface ObservableSingleBindChain<TKey extends string, TVal> {\n\ttoMany<O extends Observable, K extends keyof O>(\n\t\tobservables: ReadonlyArray<O>,\n\t\tkey: K,\n\t\tcallback: ( ...values: Array<O[ K ]> ) => TVal\n\t): void;\n\n\tto<O extends ObservableWithProperty<TKey, TVal>>(\n\t\tobservable: O\n\t): void;\n\tto<O extends ObservableWithProperty<TKey>>(\n\t\tobservable: O,\n\t\tcallback: ( value: O[ TKey ] ) => TVal\n\t): void;\n\tto<O extends ObservableWithProperty<K, TVal>, K extends keyof O>(\n\t\tobservable: O,\n\t\tkey: K\n\t): void;\n\tto<O extends Observable, K extends keyof O>(\n\t\tobservable: O,\n\t\tkey: K,\n\t\tcallback: ( value: O[ K ] ) => TVal,\n\t): void;\n\tto<\n\t\tO1 extends ObservableWithProperty<TKey>,\n\t\tO2 extends ObservableWithProperty<TKey>\n\t>(\n\t\tobservable1: O1,\n\t\tobservable2: O2,\n\t\tcallback: ( value1: O1[ TKey ], value2: O2[ TKey ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends Observable,\n\t\tK1 extends keyof O1,\n\t\tO2 extends Observable,\n\t\tK2 extends keyof O2\n\t>(\n\t\tobservable1: O1,\n\t\tkey1: K1,\n\t\tobservable2: O2,\n\t\tkey2: K2,\n\t\tcallback: ( value1: O1[ K1 ], value2: O2[ K2 ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends ObservableWithProperty<TKey>,\n\t\tO2 extends ObservableWithProperty<TKey>,\n\t\tO3 extends ObservableWithProperty<TKey>\n\t>(\n\t\tobservable1: O1,\n\t\tobservable2: O2,\n\t\tobservable3: O3,\n\t\tcallback: ( value1: O1[ TKey ], value2: O2[ TKey ], value3: O3[ TKey ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends Observable,\n\t\tK1 extends keyof O1,\n\t\tO2 extends Observable,\n\t\tK2 extends keyof O2,\n\t\tO3 extends Observable,\n\t\tK3 extends keyof O3\n\t>(\n\t\tobservable1: O1,\n\t\tkey1: K1,\n\t\tobservable2: O2,\n\t\tkey2: K2,\n\t\tobservable3: O3,\n\t\tkey3: K3,\n\t\tcallback: ( value1: O1[ K1 ], value2: O2[ K2 ], value3: O3[ K3 ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends ObservableWithProperty<TKey>,\n\t\tO2 extends ObservableWithProperty<TKey>,\n\t\tO3 extends ObservableWithProperty<TKey>,\n\t\tO4 extends ObservableWithProperty<TKey>\n\t>(\n\t\tobservable1: O1,\n\t\tobservable2: O2,\n\t\tobservable3: O3,\n\t\tobservable4: O4,\n\t\tcallback: ( value1: O1[ TKey ], value2: O2[ TKey ], value3: O3[ TKey ], value4: O4[ TKey ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends Observable,\n\t\tK1 extends keyof O1,\n\t\tO2 extends Observable,\n\t\tK2 extends keyof O2,\n\t\tO3 extends Observable,\n\t\tK3 extends keyof O3,\n\t\tO4 extends Observable,\n\t\tK4 extends keyof O4\n\t>(\n\t\tobservable1: O1,\n\t\tkey1: K1,\n\t\tobservable2: O2,\n\t\tkey2: K2,\n\t\tobservable3: O3,\n\t\tkey3: K3,\n\t\tobservable4: O4,\n\t\tkey4: K4,\n\t\tcallback: ( value1: O1[ K1 ], value2: O2[ K2 ], value3: O3[ K3 ], value4: O4[ K4 ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends ObservableWithProperty<TKey>,\n\t\tO2 extends ObservableWithProperty<TKey>,\n\t\tO3 extends ObservableWithProperty<TKey>,\n\t\tO4 extends ObservableWithProperty<TKey>,\n\t\tO5 extends ObservableWithProperty<TKey>\n\t>(\n\t\tobservable1: O1,\n\t\tobservable2: O2,\n\t\tobservable3: O3,\n\t\tobservable4: O4,\n\t\tobservable5: O5,\n\t\tcallback: ( value1: O1[ TKey ], value2: O2[ TKey ], value3: O3[ TKey ], value4: O4[ TKey ], value5: O5[ TKey ] ) => TVal\n\t): void;\n\tto<\n\t\tO1 extends Observable,\n\t\tK1 extends keyof O1,\n\t\tO2 extends Observable,\n\t\tK2 extends keyof O2,\n\t\tO3 extends Observable,\n\t\tK3 extends keyof O3,\n\t\tO4 extends Observable,\n\t\tK4 extends keyof O4,\n\t\tO5 extends Observable,\n\t\tK5 extends keyof O5\n\t>(\n\t\tobservable1: O1,\n\t\tkey1: K1,\n\t\tobservable2: O2,\n\t\tkey2: K2,\n\t\tobservable3: O3,\n\t\tkey3: K3,\n\t\tobservable4: O4,\n\t\tkey4: K4,\n\t\tobservable5: O5,\n\t\tkey5: K5,\n\t\tcallback: ( value1: O1[ K1 ], value2: O2[ K2 ], value3: O3[ K3 ], value4: O4[ K4 ], value5: O5[ K5 ] ) => TVal\n\t): void;\n}\n\n/**\n * A helper type that can be used as a constraint, ensuring the type is both observable and have the given property.\n *\n * ```ts\n * // Ensures that `obj` is `Observable` and have property named 'abc'.\n * function f<O extends ObservableWithProperty<'abc'>>( obj: O ) {}\n *\n * // Ensures that `obj` is `Observable` and have property named 'abc' with value `number`.\n * function f<O extends ObservableWithProperty<'abc', number>>( obj: O ) {}\n * ```\n */\nexport type ObservableWithProperty<TKey extends PropertyKey, TVal = any> = undefined extends TVal ?\n\tObservable & { [ P in TKey ]?: TVal } :\n\tObservable & { [ P in TKey ]: TVal };\n\nexport interface ObservableDualBindChain<TKey1 extends string, TVal1, TKey2 extends string, TVal2> {\n\tto<\n\t\tO extends ObservableWithProperty<K1, TVal1> & ObservableWithProperty<K2, TVal2>,\n\t\tK1 extends keyof O,\n\t\tK2 extends keyof O\n\t>(\n\t\tobservable: O,\n\t\tkey1: K1,\n\t\tkey2: K2\n\t): void;\n\n\tto<\n\t\tO extends ObservableWithProperty<TKey1, TVal1> & ObservableWithProperty<TKey2, TVal2>\n\t>(\n\t\tobservable: O\n\t): void;\n}\n\nexport interface ObservableMultiBindChain {\n\tto<O extends Observable>( observable: O, ...properties: Array<keyof O> ): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/elementreplacer\n */\n\n/**\n * Utility class allowing to hide existing HTML elements or replace them with given ones in a way that doesn't remove\n * the original elements from the DOM.\n */\nexport class ElementReplacer {\n\t/**\n\t * The elements replaced by {@link #replace} and their replacements.\n\t */\n\tprivate _replacedElements: Array<{ element: HTMLElement; newElement?: HTMLElement }>;\n\n\tconstructor() {\n\t\tthis._replacedElements = [];\n\t}\n\n\t/**\n\t * Hides the `element` and, if specified, inserts the the given element next to it.\n\t *\n\t * The effect of this method can be reverted by {@link #restore}.\n\t *\n\t * @param element The element to replace.\n\t * @param newElement The replacement element. If not passed, then the `element` will just be hidden.\n\t */\n\tpublic replace( element: HTMLElement, newElement?: HTMLElement ): void {\n\t\tthis._replacedElements.push( { element, newElement } );\n\n\t\telement.style.display = 'none';\n\n\t\tif ( newElement ) {\n\t\t\telement.parentNode!.insertBefore( newElement, element.nextSibling );\n\t\t}\n\t}\n\n\t/**\n\t * Restores what {@link #replace} did.\n\t */\n\tpublic restore(): void {\n\t\tthis._replacedElements.forEach( ( { element, newElement } ) => {\n\t\t\telement.style.display = '';\n\n\t\t\tif ( newElement ) {\n\t\t\t\tnewElement.remove();\n\t\t\t}\n\t\t} );\n\n\t\tthis._replacedElements = [];\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/abortabledebounce\n */\n\n/**\n * Returns a function wrapper that will execute the provided function and abort any previous call that is still in progress.\n *\n * @param func The function to be called. It will be provided with `AbortSignal` as the first parameter.\n */\nexport function abortableDebounce<Args extends Array<any>, Ret>(\n\tfunc: ( signal: AbortSignal, ...args: Args ) => Ret\n): AbortableFunc<Args, Ret> {\n\tlet controller = new AbortController();\n\n\tfunction abortable( ...args: Args ) {\n\t\tcontroller.abort();\n\t\tcontroller = new AbortController();\n\n\t\treturn func( controller.signal, ...args );\n\t}\n\n\tabortable.abort = () => controller.abort();\n\n\treturn abortable;\n}\n\nexport interface AbortableFunc<Args extends Array<any>, Ret> {\n\t( ...args: Args ): Ret;\n\tabort(): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/count\n */\n\n/**\n * Returns the number of items return by the iterator.\n *\n * ```ts\n * count( [ 1, 2, 3, 4, 5 ] ); // 5;\n * ```\n *\n * @param iterable Any iterable.\n * @returns Number of items returned by that iterable.\n */\nexport function count( iterable: Iterable<unknown> ): number {\n\tlet count = 0;\n\n\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\tfor ( const _ of iterable ) {\n\t\tcount++;\n\t}\n\n\treturn count;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/comparearrays\n */\n\n/**\n * Compares how given arrays relate to each other. One array can be: same as another array, prefix of another array\n * or completely different. If arrays are different, first index at which they differ is returned. Otherwise,\n * a flag specifying the relation is returned. Flags are negative numbers, so whenever a number >= 0 is returned\n * it means that arrays differ.\n *\n * ```ts\n * compareArrays( [ 0, 2 ], [ 0, 2 ] );\t\t// 'same'\n * compareArrays( [ 0, 2 ], [ 0, 2, 1 ] );\t\t// 'prefix'\n * compareArrays( [ 0, 2 ], [ 0 ] );\t\t\t// 'extension'\n * compareArrays( [ 0, 2 ], [ 1, 2 ] );\t\t// 0\n * compareArrays( [ 0, 2 ], [ 0, 1 ] );\t\t// 1\n * ```\n *\n * @param a Array that is compared.\n * @param b Array to compare with.\n * @returns How array `a` is related to `b`.\n */\nexport function compareArrays( a: ReadonlyArray<unknown>, b: ReadonlyArray<unknown> ): ArrayRelation | number {\n\tconst minLen = Math.min( a.length, b.length );\n\n\tfor ( let i = 0; i < minLen; i++ ) {\n\t\tif ( a[ i ] != b[ i ] ) {\n\t\t\t// The arrays are different.\n\t\t\treturn i;\n\t\t}\n\t}\n\n\t// Both arrays were same at all points.\n\tif ( a.length == b.length ) {\n\t\t// If their length is also same, they are the same.\n\t\treturn 'same';\n\t} else if ( a.length < b.length ) {\n\t\t// Compared array is shorter so it is a prefix of the other array.\n\t\treturn 'prefix';\n\t} else {\n\t\t// Compared array is longer so it is an extension of the other array.\n\t\treturn 'extension';\n\t}\n}\n\n/**\n * Array relation.\n */\nexport type ArrayRelation = 'extension' | 'same' | 'prefix';\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/isiterable\n */\n\n/**\n * Checks if value implements iterator interface.\n *\n * @param value The value to check.\n * @returns True if value implements iterator interface.\n */\nexport function isIterable( value: any ): value is Iterable<any> {\n\treturn !!( value && value[ Symbol.iterator ] );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/createelement\n */\n\nimport { isIterable } from '../isiterable.js';\nimport { isString } from 'es-toolkit/compat';\n\n/**\n * Attributes to be applied to the HTML element.\n */\nexport type HTMLElementAttributes = { readonly [ key: string ]: string };\n\n/**\n * Attributes to be applied to the SVG element.\n */\nexport type SVGElementAttributes = HTMLElementAttributes & { xmlns: string };\n\n/**\n * Element or elements that will be added to the created element as children. Strings will be automatically turned into Text nodes.\n */\nexport type ChildrenElements = Node | string | Iterable<Node | string>;\n\n/**\n * Creates an SVG element with attributes and children elements.\n *\n * ```ts\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg' } ); // <mask>\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg', id: 'foo' } ); // <mask id=\"foo\">\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg' }, 'foo' ); // <mask>foo</mask>\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg' }, [ createElement(...) ] ); // <mask><...></mask>\n * ```\n *\n * @label SVG_ELEMENT\n * @param doc Document used to create the element.\n * @param name Name of the SVG element.\n * @param attributes Object where keys represent attribute keys and values represent attribute values.\n * @param children Child or any iterable of children. Strings will be automatically turned into Text nodes.\n * @returns SVG element.\n */\nexport function createElement<T extends keyof SVGElementTagNameMap>(\n\tdoc: Document,\n\tname: T,\n\tattributes: SVGElementAttributes,\n\tchildren?: ChildrenElements\n): SVGElementTagNameMap[T];\n\n/**\n * Creates an HTML element with attributes and children elements.\n *\n * ```ts\n * createElement( document, 'p' ); // <p>\n * createElement( document, 'p', { class: 'foo' } ); // <p class=\"foo\">\n * createElement( document, 'p', null, 'foo' ); // <p>foo</p>\n * createElement( document, 'p', null, [ createElement(...) ] ); // <p><...></p>\n * ```\n *\n * @label HTML_ELEMENT\n * @param doc Document used to create the element.\n * @param name Name of the HTML element.\n * @param attributes Object where keys represent attribute keys and values represent attribute values.\n * @param children Child or any iterable of children. Strings will be automatically turned into Text nodes.\n * @returns HTML element.\n */\nexport function createElement<T extends keyof HTMLElementTagNameMap>(\n\tdoc: Document,\n\tname: T,\n\tattributes?: HTMLElementAttributes,\n\tchildren?: ChildrenElements\n): HTMLElementTagNameMap[T];\n\n/**\n * Creates an HTML or SVG element with attributes and children elements.\n *\n * ```ts\n * createElement( document, 'p' ); // <p>\n * createElement( document, 'mask', { xmlns: 'http://www.w3.org/2000/svg' } ); // <mask>\n * ```\n *\n * @param doc Document used to create the element.\n * @param name Name of the element.\n * @param attributes Object where keys represent attribute keys and values represent attribute values.\n * @param children Child or any iterable of children. Strings will be automatically turned into Text nodes.\n * @returns HTML or SVG element.\n */\nexport function createElement(\n\tdoc: Document,\n\tname: string,\n\tattributes: SVGElementAttributes | HTMLElementAttributes = {},\n\tchildren: ChildrenElements = []\n): Element {\n\tconst namespace = attributes && attributes.xmlns;\n\tconst element = namespace ? doc.createElementNS( namespace, name ) : doc.createElement( name );\n\n\tfor ( const key in attributes ) {\n\t\telement.setAttribute( key, attributes[ key ] );\n\t}\n\n\tif ( isString( children ) || !isIterable( children ) ) {\n\t\tchildren = [ children ];\n\t}\n\n\tfor ( let child of children ) {\n\t\tif ( isString( child ) ) {\n\t\t\tchild = doc.createTextNode( child );\n\t\t}\n\n\t\telement.appendChild( child );\n\t}\n\n\treturn element;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/config\n */\n\nimport { isPlainObject, isElement, cloneDeepWith } from 'es-toolkit/compat';\n\n/**\n * Handles a configuration dictionary.\n *\n * @typeParam Cfg A type of the configuration dictionary.\n */\nexport class Config<Cfg> {\n\t/**\n\t * Store for the whole configuration.\n\t */\n\tprivate readonly _config: Record<string, any>;\n\n\t/**\n\t * Creates an instance of the {@link ~Config} class.\n\t *\n\t * @param configurations The initial configurations to be set. Usually, provided by the user.\n\t * @param defaultConfigurations The default configurations. Usually, provided by the system.\n\t */\n\tconstructor( configurations?: Partial<Cfg>, defaultConfigurations?: Partial<Cfg> ) {\n\t\tthis._config = Object.create( null );\n\n\t\t// Set default configuration.\n\t\tif ( defaultConfigurations ) {\n\t\t\t// Clone the configuration to make sure that the properties will not be shared\n\t\t\t// between editors and make the watchdog feature work correctly.\n\t\t\tthis.define( cloneConfig( defaultConfigurations ) );\n\t\t}\n\n\t\t// Set initial configuration.\n\t\tif ( configurations ) {\n\t\t\tthis._setObjectToTarget( this._config, configurations );\n\t\t}\n\t}\n\n\t/**\n\t * Set configuration values.\n\t *\n\t * It also accepts setting a \"deep configuration\" by using dots in the name. For example, `'resize.width'` sets\n\t * the value for the `width` configuration in the `resize` subset.\n\t *\n\t * ```ts\n\t * config.set( 'resize.width', 500 );\n\t * ```\n\t *\n\t * It accepts both a name/value pair or an object, which properties and values will be used to set\n\t * configurations. See {@link #set:CONFIG_OBJECT}.\n\t *\n\t * @label KEY_VALUE\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @param value The configuration value.\n\t */\n\tpublic set<K extends string>( name: K, value: GetSubConfig<Cfg, K> ): void;\n\n\t/**\n\t * Set configuration values.\n\t *\n\t * It accepts an object, which properties and values will be used to set configurations.\n\t *\n\t * ```ts\n\t * config.set( {\n\t * \twidth: 500\n\t * \ttoolbar: {\n\t * \t\tcollapsed: true\n\t * \t}\n\t * } );\n\t *\n\t * // Equivalent to:\n\t * config.set( 'width', 500 );\n\t * config.set( 'toolbar.collapsed', true );\n\t * ```\n\t *\n\t * Passing an object as the value will amend the configuration, not replace it.\n\t *\n\t * ```ts\n\t * config.set( 'toolbar', {\n\t * \tcollapsed: true,\n\t * } );\n\t *\n\t * config.set( 'toolbar', {\n\t * \tcolor: 'red',\n\t * } );\n\t *\n\t * config.get( 'toolbar.collapsed' ); // true\n\t * config.get( 'toolbar.color' ); // 'red'\n\t * ```\n\t *\n\t * It accepts both a name/value pair or an object, which properties and values will be used to set\n\t * configurations. See {@link #set:KEY_VALUE}.\n\t *\n\t * @label CONFIG_OBJECT\n\t * @param config The configuration object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t */\n\tpublic set( config: Partial<Cfg> ): void;\n\n\tpublic set( name: string | Record<string, any>, value?: any ): void {\n\t\tthis._setToTarget( this._config, name, value );\n\t}\n\n\t/**\n\t * Does exactly the same as {@link #set:KEY_VALUE} with one exception – passed configuration extends\n\t * existing one, but does not overwrite already defined values.\n\t *\n\t * This method is supposed to be called by plugin developers to setup plugin's configurations. It would be\n\t * rarely used for other needs.\n\t *\n\t * @label KEY_VALUE\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @param value The configuration value.\n\t */\n\tpublic define<K extends string>( name: K, value: GetSubConfig<Cfg, K> ): void;\n\n\t/**\n\t * Does exactly the same as {@link #set:CONFIG_OBJECT} with one exception – passed configuration extends\n\t * existing one, but does not overwrite already defined values.\n\t *\n\t * This method is supposed to be called by plugin developers to setup plugin's configurations. It would be\n\t * rarely used for other needs.\n\t *\n\t * @label CONFIG_OBJECT\n\t * @param config The configuration object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t */\n\tpublic define( config: Partial<Cfg> ): void;\n\n\tpublic define( name: string | Record<string, any>, value?: any ): void {\n\t\tconst isDefine = true;\n\n\t\tthis._setToTarget( this._config, name, value, isDefine );\n\t}\n\n\t/**\n\t * Gets the value for a configuration entry.\n\t *\n\t * ```ts\n\t * config.get( 'name' );\n\t * ```\n\t *\n\t * Deep configurations can be retrieved by separating each part with a dot.\n\t *\n\t * ```ts\n\t * config.get( 'toolbar.collapsed' );\n\t * ```\n\t *\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @returns The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\tpublic get<K extends string>( name: K ): GetSubConfig<Cfg, K> | undefined {\n\t\treturn this._getFromSource( this._config, name );\n\t}\n\n\t/**\n\t * Iterates over all top level configuration names.\n\t */\n\tpublic* names(): Iterable<string> {\n\t\tfor ( const name of Object.keys( this._config ) ) {\n\t\t\tyield name;\n\t\t}\n\t}\n\n\t/**\n\t * Saves passed configuration to the specified target (nested object).\n\t *\n\t * @param target Nested config object.\n\t * @param name The configuration name or an object from which take properties as\n\t * configuration entries. Configuration names are case-sensitive.\n\t * @param value The configuration value. Used if a name is passed.\n\t * @param isDefine Define if passed configuration should overwrite existing one.\n\t */\n\tprivate _setToTarget( target: any, name: any, value: any, isDefine: boolean = false ): void {\n\t\t// In case of an object, iterate through it and call `_setToTarget` again for each property.\n\t\tif ( isPlainObject( name ) ) {\n\t\t\tthis._setObjectToTarget( target, name, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop();\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\t// If there is no object for specified part then create one.\n\t\t\tif ( !isPlainObject( target[ part ] ) ) {\n\t\t\t\ttarget[ part ] = Object.create( null );\n\t\t\t}\n\n\t\t\t// Nested object becomes a target.\n\t\t\ttarget = target[ part ];\n\t\t}\n\n\t\t// In case of value is an object.\n\t\tif ( isPlainObject( value ) ) {\n\t\t\t// We take care of proper config structure.\n\t\t\tif ( !isPlainObject( target[ name ] ) ) {\n\t\t\t\ttarget[ name ] = Object.create( null );\n\t\t\t}\n\n\t\t\ttarget = target[ name ];\n\n\t\t\t// And iterate through this object calling `_setToTarget` again for each property.\n\t\t\tthis._setObjectToTarget( target, value, isDefine );\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Do nothing if we are defining configuration for non empty name.\n\t\tif ( isDefine && typeof target[ name ] != 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttarget[ name ] = value;\n\t}\n\n\t/**\n\t * Get specified configuration from specified source (nested object).\n\t *\n\t * @param source level of nested object.\n\t * @param name The configuration name. Configuration names are case-sensitive.\n\t * @returns The configuration value or `undefined` if the configuration entry was not found.\n\t */\n\tprivate _getFromSource( source: any, name: string ): any {\n\t\t// The configuration name should be split into parts if it has dots. E.g. `resize.width` -> [`resize`, `width`].\n\t\tconst parts = name.split( '.' );\n\n\t\t// Take the name of the configuration out of the parts. E.g. `resize.width` -> `width`.\n\t\tname = parts.pop()!;\n\n\t\t// Iterate over parts to check if currently stored configuration has proper structure.\n\t\tfor ( const part of parts ) {\n\t\t\tif ( !isPlainObject( source[ part ] ) ) {\n\t\t\t\tsource = null;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// Nested object becomes a source.\n\t\t\tsource = source[ part ];\n\t\t}\n\n\t\t// Always returns undefined for non existing configuration.\n\t\treturn source ? cloneConfig( source[ name ] ) : undefined;\n\t}\n\n\t/**\n\t * Iterates through passed object and calls {@link #_setToTarget} method with object key and value for each property.\n\t *\n\t * @param target Nested config object.\n\t * @param configuration Configuration data set\n\t * @param isDefine Defines if passed configuration is default configuration or not.\n\t */\n\tprivate _setObjectToTarget( target: any, configuration: any, isDefine?: boolean ): void {\n\t\tObject.keys( configuration ).forEach( key => {\n\t\t\tthis._setToTarget( target, key, configuration[ key ], isDefine );\n\t\t} );\n\t}\n}\n\n/**\n * Clones configuration object or value.\n */\nfunction cloneConfig<T>( source: T ): T {\n\treturn cloneDeepWith( source, leaveItemReferences );\n}\n\n/**\n * A customized function for cloneDeepWith.\n * In case if it's a DOM Element it will leave references to DOM Elements instead of cloning them.\n * If it's a function it will leave reference to actuall function.\n */\nfunction leaveItemReferences( value: unknown ): unknown {\n\treturn isElement( value ) || typeof value === 'function' ? value : undefined;\n}\n\n/**\n * An utility type excluding primitive values and arrays from the union.\n */\nexport type OnlyObject<T> = Exclude<T, undefined | null | string | number | boolean | Array<any>>;\n\n/**\n * An utility type extracting configuration value from the given name.\n *\n * @typeParam T The type of a configuration dictionary.\n * @typeParam K The literal type of configuration name (dot-separated path).\n */\nexport type GetSubConfig<T, K> = K extends keyof T ?\n\tT[ K ] :\n\tK extends `${ infer K1 }.${ infer K2 }` ?\n\t\tK1 extends keyof T ?\n\t\t\tGetSubConfig<OnlyObject<T[ K1 ]>, K2> :\n\t\t\tunknown :\n\t\tunknown;\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/isnode\n */\n\n/**\n * Checks if the object is a native DOM Node.\n */\nexport function isNode( obj: any ): obj is Node {\n\tif ( obj ) {\n\t\tif ( obj.defaultView ) {\n\t\t\treturn obj instanceof obj.defaultView.Document;\n\t\t} else if ( obj.ownerDocument && obj.ownerDocument.defaultView ) {\n\t\t\treturn obj instanceof obj.ownerDocument.defaultView.Node;\n\t\t}\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/iswindow\n */\n\n/**\n * Checks if the object is a native DOM Window.\n */\nexport function isWindow( obj: unknown ): obj is Window {\n\tconst stringifiedObject = Object.prototype.toString.apply( obj );\n\n\t// Returns `true` for the `window` object in browser environments.\n\tif ( stringifiedObject == '[object Window]' ) {\n\t\treturn true;\n\t}\n\n\t// Returns `true` for the `window` object in the Electron environment.\n\tif ( stringifiedObject == '[object global]' ) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/emittermixin\n */\n\nimport {\n\tEmitterMixin,\n\t_getEmitterListenedTo,\n\t_setEmitterId,\n\ttype Emitter,\n\ttype CallbackOptions,\n\ttype BaseEvent,\n\ttype GetCallback\n} from '../emittermixin.js';\nimport { uid } from '../uid.js';\nimport { isNode } from './isnode.js';\nimport { isWindow } from './iswindow.js';\nimport { type EventInfo } from '../eventinfo.js';\nimport type { Constructor, Mixed } from '../mix.js';\nimport { global } from './global.js';\n\nconst defaultEmitterClass = /* #__PURE__ */ DomEmitterMixin( /* #__PURE__ */ EmitterMixin() );\n\n/**\n * Mixin that injects the DOM events API into its host. It provides the API\n * compatible with {@link module:utils/emittermixin~Emitter}.\n *\n * This function creates a class that inherits from the provided `base` and implements `Emitter` interface.\n *\n * DOM emitter mixin is by default available in the {@link module:ui/view~View} class,\n * but it can also be mixed into any other class:\n *\n * ```ts\n * import { DomEmitterMixin } from '../utils/dom/emittermixin.js';\n *\n * class BaseClass { ... }\n *\n * class SomeView extends DomEmitterMixin( BaseClass ) {}\n *\n * const view = new SomeView();\n * view.listenTo( domElement, ( evt, domEvt ) => {\n * \tconsole.log( evt, domEvt );\n * } );\n * ```\n *\n * @label EXTENDS\n */\nexport function DomEmitterMixin<Base extends Constructor<Emitter>>( base: Base ): Mixed<Base, DomEmitter>;\n\n/**\n * Mixin that injects the DOM events API into its host. It provides the API\n * compatible with {@link module:utils/emittermixin~Emitter}.\n *\n * This function creates a class that implements `Emitter` interface.\n *\n * DOM emitter mixin is by default available in the {@link module:ui/view~View} class,\n * but it can also be mixed into any other class:\n *\n * ```ts\n * import { DomEmitterMixin } from '../utils/dom/emittermixin.js';\n *\n * class SomeView extends DomEmitterMixin() {}\n *\n * const view = new SomeView();\n * view.listenTo( domElement, ( evt, domEvt ) => {\n * \tconsole.log( evt, domEvt );\n * } );\n * ```\n *\n * @label NO_ARGUMENTS\n */\nexport function DomEmitterMixin(): {\n\tnew (): DomEmitter;\n\tprototype: DomEmitter;\n};\n\nexport function DomEmitterMixin( base?: Constructor<Emitter> ): unknown {\n\tif ( !base ) {\n\t\treturn defaultEmitterClass;\n\t}\n\n\tabstract class Mixin extends base implements DomEmitter {\n\t\tpublic override listenTo<K extends keyof HTMLElementEventMap>(\n\t\t\temitter: Node | Window | EventTarget,\n\t\t\tevent: K,\n\t\t\tcallback: ( this: this, ev: EventInfo, event: HTMLElementEventMap[ K ] ) => void,\n\t\t\toptions?: CallbackOptions & { readonly useCapture?: boolean; readonly usePassive?: boolean }\n\t\t): void;\n\t\tpublic override listenTo<TEvent extends BaseEvent>(\n\t\t\temitter: Emitter,\n\t\t\tevent: TEvent[ 'name' ],\n\t\t\tcallback: GetCallback<TEvent>,\n\t\t\toptions?: CallbackOptions\n\t\t): void;\n\t\tpublic override listenTo(\n\t\t\temitter: Emitter | Node | Window | EventTarget,\n\t\t\tevent: string,\n\t\t\tcallback: ( ev: EventInfo, ...args: Array<any> ) => void,\n\t\t\toptions: CallbackOptions & { readonly useCapture?: boolean; readonly usePassive?: boolean } = {}\n\t\t): void {\n\t\t\t// Check if emitter is an instance of DOM Node. If so, use corresponding ProxyEmitter (or create one if not existing).\n\t\t\tif ( isNode( emitter ) || isWindow( emitter ) || emitter instanceof global.window.EventTarget ) {\n\t\t\t\tconst proxyOptions = {\n\t\t\t\t\tcapture: !!options.useCapture,\n\t\t\t\t\tpassive: !!options.usePassive\n\t\t\t\t};\n\n\t\t\t\tconst proxyEmitter = this._getProxyEmitter( emitter, proxyOptions ) || new ProxyEmitter( emitter, proxyOptions );\n\n\t\t\t\tthis.listenTo( proxyEmitter, event, callback, options );\n\t\t\t} else {\n\t\t\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\t\t\tsuper.listenTo( emitter, event, callback, options );\n\t\t\t}\n\t\t}\n\n\t\tpublic override stopListening(\n\t\t\temitter?: Emitter | Node | Window | EventTarget,\n\t\t\tevent?: string,\n\t\t\tcallback?: Function\n\t\t): void {\n\t\t\t// Check if the emitter is an instance of DOM Node. If so, forward the call to the corresponding ProxyEmitters.\n\t\t\tif ( isNode( emitter ) || isWindow( emitter ) || emitter instanceof global.window.EventTarget ) {\n\t\t\t\tconst proxyEmitters = this._getAllProxyEmitters( emitter );\n\n\t\t\t\tfor ( const proxy of proxyEmitters ) {\n\t\t\t\t\tthis.stopListening( proxy, event, callback );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Execute parent class method with Emitter (or ProxyEmitter) instance.\n\t\t\t\tsuper.stopListening( emitter, event, callback );\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Retrieves ProxyEmitter instance for given DOM Node residing in this Host and given options.\n\t\t *\n\t\t * @param node DOM Node of the ProxyEmitter.\n\t\t * @param options Additional options.\n\t\t * @param options.useCapture Indicates that events of this type will be dispatched to the registered\n\t\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t\t * @param options.usePassive Indicates that the function specified by listener will never call preventDefault()\n\t\t * and prevents blocking browser's main thread by this event handler.\n\t\t * @returns ProxyEmitter instance bound to the DOM Node.\n\t\t */\n\t\tprivate _getProxyEmitter(\n\t\t\tnode: Node | Window | EventTarget,\n\t\t\toptions: { capture: boolean; passive: boolean }\n\t\t): Emitter | null {\n\t\t\treturn _getEmitterListenedTo( this, getProxyEmitterId( node, options ) );\n\t\t}\n\n\t\t/**\n\t\t * Retrieves all the ProxyEmitter instances for given DOM Node residing in this Host.\n\t\t *\n\t\t * @param node DOM Node of the ProxyEmitter.\n\t\t */\n\t\tprivate _getAllProxyEmitters( node: Node | Window | EventTarget ): Array<ProxyEmitter> {\n\t\t\treturn [\n\t\t\t\t{ capture: false, passive: false },\n\t\t\t\t{ capture: false, passive: true },\n\t\t\t\t{ capture: true, passive: false },\n\t\t\t\t{ capture: true, passive: true }\n\t\t\t].map( options => this._getProxyEmitter( node, options ) ).filter( proxy => !!proxy ) as any;\n\t\t}\n\t}\n\n\treturn Mixin;\n}\n\n/**\n * Creates a ProxyEmitter instance. Such an instance is a bridge between a DOM Node firing events\n * and any Host listening to them. It is backwards compatible with {@link module:utils/emittermixin~Emitter#on}.\n * There is a separate instance for each combination of modes (useCapture & usePassive). The mode is concatenated with\n * UID stored in HTMLElement to give each instance unique identifier.\n *\n *                                  listenTo( click, ... )\n *                    +-----------------------------------------+\n *                    |              stopListening( ... )       |\n *     +----------------------------+                           |             addEventListener( click, ... )\n *     | Host                       |                           |   +---------------------------------------------+\n *     +----------------------------+                           |   |       removeEventListener( click, ... )     |\n *     | _listeningTo: {            |                +----------v-------------+                                   |\n *     |   UID+mode: {              |                | ProxyEmitter           |                                   |\n *     |     emitter: ProxyEmitter, |                +------------------------+                      +------------v----------+\n *     |     callbacks: {           |                | events: {              |                      | Node (HTMLElement)    |\n *     |       click: [ callbacks ] |                |   click: [ callbacks ] |                      +-----------------------+\n *     |     }                      |                | },                     |                      | data-ck-expando: UID  |\n *     |   }                        |                | _domNode: Node,        |                      +-----------------------+\n *     | }                          |                | _domListeners: {},     |                                   |\n *     | +------------------------+ |                | _emitterId: UID+mode   |                                   |\n *     | | DomEmitterMixin        | |                +--------------^---------+                                   |\n *     | +------------------------+ |                           |   |                                             |\n *     +--------------^-------------+                           |   +---------------------------------------------+\n *                    |                                         |                  click (DOM Event)\n *                    +-----------------------------------------+\n *                                fire( click, DOM Event )\n */\nclass ProxyEmitter extends /* #__PURE__ */ EmitterMixin() {\n\tprivate readonly _domNode: Node | Window | EventTarget;\n\tprivate readonly _options: { capture: boolean; passive: boolean };\n\n\t/**\n\t * @param node DOM Node that fires events.\n\t * @param options Additional options.\n\t * @param options.useCapture Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param options.usePassive Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tconstructor(\n\t\tnode: Node | Window | EventTarget,\n\t\toptions: { capture: boolean; passive: boolean }\n\t) {\n\t\tsuper();\n\n\t\t// Set emitter ID to match DOM Node \"expando\" property.\n\t\t_setEmitterId( this, getProxyEmitterId( node, options ) );\n\n\t\t// Remember the DOM Node this ProxyEmitter is bound to.\n\t\tthis._domNode = node;\n\n\t\t// And given options.\n\t\tthis._options = options;\n\t}\n\n\t/**\n\t * Collection of native DOM listeners.\n\t */\n\tprivate _domListeners?: {\n\t\t[ event: string ]: {\n\t\t\t( domEvent: unknown ): void;\n\t\t\tremoveListener(): void;\n\t\t};\n\t};\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired.\n\t *\n\t * It attaches a native DOM listener to the DOM Node. When fired,\n\t * a corresponding Emitter event will also fire with DOM Event object as an argument.\n\t *\n\t * **Note**: This is automatically called by the\n\t * {@link module:utils/emittermixin~Emitter#listenTo `Emitter#listenTo()`}.\n\t *\n\t * @param event The name of the event.\n\t */\n\tpublic attach( event: string ): void {\n\t\t// If the DOM Listener for given event already exist it is pointless\n\t\t// to attach another one.\n\t\tif ( this._domListeners && this._domListeners[ event ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst domListener = this._createDomListener( event );\n\n\t\t// Attach the native DOM listener to DOM Node.\n\t\tthis._domNode.addEventListener( event, domListener, this._options );\n\n\t\tif ( !this._domListeners ) {\n\t\t\tthis._domListeners = {};\n\t\t}\n\n\t\t// Store the native DOM listener in this ProxyEmitter. It will be helpful\n\t\t// when stopping listening to the event.\n\t\tthis._domListeners[ event ] = domListener;\n\t}\n\n\t/**\n\t * Stops executing the callback on the given event.\n\t *\n\t * **Note**: This is automatically called by the\n\t * {@link module:utils/emittermixin~Emitter#stopListening `Emitter#stopListening()`}.\n\t *\n\t * @param event The name of the event.\n\t */\n\tpublic detach( event: string ): void {\n\t\tlet events;\n\n\t\t// Remove native DOM listeners which are orphans. If no callbacks\n\t\t// are awaiting given event, detach native DOM listener from DOM Node.\n\t\t// See: {@link attach}.\n\n\t\tif ( this._domListeners![ event ] && ( !( events = ( this as any )._events![ event ] ) || !events.callbacks.length ) ) {\n\t\t\tthis._domListeners![ event ].removeListener();\n\t\t}\n\t}\n\n\t/**\n\t * Adds callback to emitter for given event.\n\t *\n\t * @internal\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\tpublic _addEventListener<TEvent extends BaseEvent>(\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions: CallbackOptions\n\t): void {\n\t\tthis.attach( event );\n\t\t( EmitterMixin().prototype as any )._addEventListener.call( this, event, callback, options );\n\t}\n\n\t/**\n\t * Removes callback from emitter for given event.\n\t *\n\t * @internal\n\t * @param event The name of the event.\n\t * @param callback The function to stop being called.\n\t */\n\tpublic _removeEventListener( event: string, callback: Function ) {\n\t\t( EmitterMixin().prototype as any )._removeEventListener.call( this, event, callback );\n\t\tthis.detach( event );\n\t}\n\n\t/**\n\t * Creates a native DOM listener callback. When the native DOM event\n\t * is fired it will fire corresponding event on this ProxyEmitter.\n\t * Note: A native DOM Event is passed as an argument.\n\t *\n\t * @param event The name of the event.\n\t * @returns The DOM listener callback.\n\t */\n\tprivate _createDomListener( event: string ) {\n\t\tconst domListener = ( domEvt: unknown ) => {\n\t\t\tthis.fire( event, domEvt );\n\t\t};\n\n\t\t// Supply the DOM listener callback with a function that will help\n\t\t// detach it from the DOM Node, when it is no longer necessary.\n\t\t// See: {@link detach}.\n\t\tdomListener.removeListener = () => {\n\t\t\tthis._domNode.removeEventListener( event, domListener, this._options );\n\t\t\tdelete this._domListeners![ event ];\n\t\t};\n\n\t\treturn domListener;\n\t}\n}\n\n/**\n * Gets an unique DOM Node identifier. The identifier will be set if not defined.\n *\n * @returns UID for given DOM Node.\n */\nfunction getNodeUID( node: any ): string {\n\treturn node[ 'data-ck-expando' ] || ( node[ 'data-ck-expando' ] = uid() );\n}\n\n/**\n * Gets id of the ProxyEmitter for the given node.\n */\nfunction getProxyEmitterId( node: Node | Window | EventTarget, options: { [ option: string ]: any } ): string {\n\tlet id = getNodeUID( node );\n\n\tfor ( const option of Object.keys( options ).sort() ) {\n\t\tif ( options[ option ] ) {\n\t\t\tid += '-' + option;\n\t\t}\n\t}\n\n\treturn id;\n}\n\nexport interface DomEventMap extends HTMLElementEventMap, WindowEventMap {\n}\n\n/**\n * Interface representing classes which mix in {@link module:utils/dom/emittermixin~DomEmitterMixin}.\n *\n * Can be easily implemented by a class by mixing the {@link module:utils/dom/emittermixin~DomEmitterMixin} mixin.\n *\n * ```ts\n * class MyClass extends DomEmitterMixin( OtherBaseClass ) {\n * \t// This class now implements the `Emitter` interface.\n * }\n * ```\n */\nexport interface DomEmitter extends Emitter {\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific Emitter or DOM Node.\n\t * It is backwards compatible with {@link module:utils/emittermixin~Emitter#listenTo}.\n\t *\n\t * @label HTML_EMITTER\n\t * @param emitter The object that fires the event.\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t * @param options.useCapture Indicates that events of this type will be dispatched to the registered\n\t * listener before being dispatched to any EventTarget beneath it in the DOM tree.\n\t * @param options.usePassive Indicates that the function specified by listener will never call preventDefault()\n\t * and prevents blocking browser's main thread by this event handler.\n\t */\n\tlistenTo<K extends keyof DomEventMap>(\n\t\temitter: Node | Window | EventTarget,\n\t\tevent: K,\n\t\tcallback: ( this: this, ev: EventInfo, event: DomEventMap[ K ] ) => void,\n\t\toptions?: CallbackOptions & { readonly useCapture?: boolean; readonly usePassive?: boolean }\n\t): void;\n\n\t/**\n\t * Registers a callback function to be executed when an event is fired in a specific (emitter) object.\n\t *\n\t * Events can be grouped in namespaces using `:`.\n\t * When namespaced event is fired, it additionally fires all callbacks for that namespace.\n\t *\n\t * ```ts\n\t * // myEmitter.on( ... ) is a shorthand for myEmitter.listenTo( myEmitter, ... ).\n\t * myEmitter.on( 'myGroup', genericCallback );\n\t * myEmitter.on( 'myGroup:myEvent', specificCallback );\n\t *\n\t * // genericCallback is fired.\n\t * myEmitter.fire( 'myGroup' );\n\t * // both genericCallback and specificCallback are fired.\n\t * myEmitter.fire( 'myGroup:myEvent' );\n\t * // genericCallback is fired even though there are no callbacks for \"foo\".\n\t * myEmitter.fire( 'myGroup:foo' );\n\t * ```\n\t *\n\t * An event callback can {@link module:utils/eventinfo~EventInfo#stop stop the event} and\n\t * set the {@link module:utils/eventinfo~EventInfo#return return value} of the {@link #fire} method.\n\t *\n\t * @label DOM_EMITTER\n\t * @typeParam TEvent The type describing the event. See {@link module:utils/emittermixin~BaseEvent}.\n\t * @param emitter The object that fires the event.\n\t * @param event The name of the event.\n\t * @param callback The function to be called on event.\n\t * @param options Additional options.\n\t */\n\tlistenTo<TEvent extends BaseEvent>(\n\t\temitter: Emitter,\n\t\tevent: TEvent[ 'name' ],\n\t\tcallback: GetCallback<TEvent>,\n\t\toptions?: CallbackOptions\n\t): void;\n\n\t/**\n\t * Stops listening for events. It can be used at different levels:\n\t * It is backwards compatible with {@link module:utils/emittermixin~Emitter#listenTo}.\n\t *\n\t * * To stop listening to a specific callback.\n\t * * To stop listening to a specific event.\n\t * * To stop listening to all events fired by a specific object.\n\t * * To stop listening to all events fired by all objects.\n\t *\n\t * @label DOM_STOP\n\t * @param emitter The object to stop listening to.\n\t * If omitted, stops it for all objects.\n\t * @param event (Requires the `emitter`) The name of the event to stop listening to. If omitted, stops it\n\t * for all events from `emitter`.\n\t * @param callback (Requires the `event`) The function to be removed from the call list for the given\n\t * `event`.\n\t */\n\tstopListening( emitter?: Emitter | Node | Window | EventTarget, event?: string, callback?: Function ): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/findclosestscrollableancestor\n */\n\nimport { global } from './global.js';\n\n/**\n * Returns the closest scrollable ancestor of a DOM element.\n *\n * @param domElement DOM element.\n * @returns First ancestor of `domElement` that is scrollable or null if such ancestor doesn't exist.\n */\nexport function findClosestScrollableAncestor( domElement: HTMLElement ): HTMLElement | null {\n\tlet element = domElement.parentElement;\n\tif ( !element ) {\n\t\treturn null;\n\t}\n\n\twhile ( element.tagName != 'BODY' ) {\n\t\tconst overflow = element.style.overflowY || global.window.getComputedStyle( element ).overflowY;\n\n\t\tif ( overflow === 'auto' || overflow === 'scroll' ) {\n\t\t\tbreak;\n\t\t}\n\n\t\telement = element.parentElement;\n\n\t\tif ( !element ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\treturn element;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getancestors\n */\n\n/**\n * Returns all ancestors of given DOM node, starting from the top-most (root). Includes the given node itself. If the\n * node is a part of `DocumentFragment` that `DocumentFragment` will be returned. In contrary, if the node is\n * appended to a `Document`, that `Document` will not be returned (algorithms operating on DOM tree care for `Document#documentElement`\n * at most, which will be returned).\n *\n * @param node DOM node.\n * @returns Array of given `node` parents.\n */\nexport function getAncestors( node: Node ): Array<Node> {\n\tconst nodes: Array<Node> = [];\n\tlet currentNode: Node | null = node;\n\n\t// We are interested in `Node`s `DocumentFragment`s only.\n\twhile ( currentNode && currentNode.nodeType != Node.DOCUMENT_NODE ) {\n\t\tnodes.unshift( currentNode );\n\t\tcurrentNode = currentNode.parentNode;\n\t}\n\n\treturn nodes;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getdatafromelement\n */\n\n/**\n * Gets data from a given source element.\n *\n * @param el The element from which the data will be retrieved.\n * @returns The data string.\n */\nexport function getDataFromElement( el: HTMLElement ): string {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\treturn el.value;\n\t}\n\n\treturn el.innerHTML;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getborderwidths\n */\n\n/**\n * Returns an object containing CSS border widths of a specified HTML element.\n *\n * @param element An element which has CSS borders.\n * @returns An object containing `top`, `left`, `right` and `bottom` properties\n * with numerical values of the `border-[top,left,right,bottom]-width` CSS styles.\n */\nexport function getBorderWidths( element: HTMLElement ): BorderWidths {\n\t// Call getComputedStyle on the window the element document belongs to.\n\tconst style = element.ownerDocument.defaultView!.getComputedStyle( element );\n\n\treturn {\n\t\ttop: parseInt( style.borderTopWidth, 10 ),\n\t\tright: parseInt( style.borderRightWidth, 10 ),\n\t\tbottom: parseInt( style.borderBottomWidth, 10 ),\n\t\tleft: parseInt( style.borderLeftWidth, 10 )\n\t};\n}\n\n/**\n * An object describing widths of `HTMLElement` borders.\n*/\nexport interface BorderWidths {\n\ttop: number;\n\tright: number;\n\tbottom: number;\n\tleft: number;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getrangefrommouseevent\n */\n\n/**\n * Returns a DOM range from a given point specified by a mouse event.\n *\n * @param domEvent The mouse event.\n * @returns The DOM range.\n */\nexport function getRangeFromMouseEvent(\n\tdomEvent: MouseEvent & {\n\t\trangeParent?: HTMLElement;\n\t\trangeOffset?: number;\n\t}\n): Range | null {\n\tif ( !domEvent.target ) {\n\t\treturn null;\n\t}\n\n\tconst domDoc = ( domEvent.target as HTMLElement ).ownerDocument;\n\tconst x = domEvent.clientX;\n\tconst y = domEvent.clientY;\n\tlet domRange = null;\n\n\t// Webkit & Blink.\n\tif ( domDoc.caretRangeFromPoint && domDoc.caretRangeFromPoint( x, y ) ) {\n\t\tdomRange = domDoc.caretRangeFromPoint( x, y );\n\t}\n\n\t// FF.\n\telse if ( domEvent.rangeParent ) {\n\t\tdomRange = domDoc.createRange();\n\t\tdomRange.setStart( domEvent.rangeParent, domEvent.rangeOffset! );\n\t\tdomRange.collapse( true );\n\t}\n\n\treturn domRange;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getcommonancestor\n */\n\nimport { getAncestors } from './getancestors.js';\n\n/**\n * Searches and returns the lowest common ancestor of two given nodes.\n *\n * @param nodeA First node.\n * @param nodeB Second node.\n * @returns Lowest common ancestor of both nodes or `null` if nodes do not have a common ancestor.\n */\nexport function getCommonAncestor( nodeA: Node, nodeB: Node ): Node | null {\n\tconst ancestorsA = getAncestors( nodeA );\n\tconst ancestorsB = getAncestors( nodeB );\n\n\tlet i = 0;\n\n\t// It does not matter which array is shorter.\n\twhile ( ancestorsA[ i ] == ancestorsB[ i ] && ancestorsA[ i ] ) {\n\t\ti++;\n\t}\n\n\treturn i === 0 ? null : ancestorsA[ i - 1 ];\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getpositionedancestor\n */\n\nimport { global } from './global.js';\n\n/**\n * For a given element, returns the nearest ancestor element which CSS position is not \"static\".\n *\n * @param element The native DOM element to be checked.\n */\nexport function getPositionedAncestor( element?: HTMLElement ): HTMLElement | null {\n\tif ( !element || !element.parentNode ) {\n\t\treturn null;\n\t}\n\n\tif ( element.offsetParent === global.document.body ) {\n\t\treturn null;\n\t}\n\n\treturn element.offsetParent as HTMLElement;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/istext\n */\n\n/**\n * Checks if the object is a native DOM Text node.\n */\nexport function isText( obj: unknown ): obj is Text {\n\treturn Object.prototype.toString.call( obj ) == '[object Text]';\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/isrange\n */\n\n/**\n * Checks if the object is a native DOM Range.\n */\nexport function isRange( obj: unknown ): obj is Range {\n\treturn Object.prototype.toString.apply( obj ) == '[object Range]';\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/rect\n */\n\nimport { isRange } from './isrange.js';\nimport { isWindow } from './iswindow.js';\nimport { getBorderWidths } from './getborderwidths.js';\nimport { isText } from './istext.js';\nimport { getPositionedAncestor } from './getpositionedancestor.js';\nimport { global } from './global.js';\n\nconst rectProperties: Array<keyof DomRectLike> = [ 'top', 'right', 'bottom', 'left', 'width', 'height' ];\n\n/**\n * A helper class representing a `ClientRect` object, e.g. value returned by\n * the native `object.getBoundingClientRect()` method. Provides a set of methods\n * to manipulate the rect and compare it against other rect instances.\n */\nexport class Rect {\n\t/**\n\t * The \"top\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic top!: number;\n\n\t/**\n\t * The \"right\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic right!: number;\n\n\t/**\n\t * The \"bottom\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic bottom!: number;\n\n\t/**\n\t * The \"left\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic left!: number;\n\n\t/**\n\t * The \"width\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic width!: number;\n\n\t/**\n\t * The \"height\" value of the rect.\n\t *\n\t * @readonly\n\t */\n\tpublic height!: number;\n\n\t/**\n\t * The object this rect is for.\n\t *\n\t * @readonly\n\t */\n\tprivate _source!: RectSource;\n\n\t/**\n\t * Creates an instance of rect.\n\t *\n\t * ```ts\n\t * // Rect of an HTMLElement.\n\t * const rectA = new Rect( document.body );\n\t *\n\t * // Rect of a DOM Range.\n\t * const rectB = new Rect( document.getSelection().getRangeAt( 0 ) );\n\t *\n\t * // Rect of a window (web browser viewport).\n\t * const rectC = new Rect( window );\n\t *\n\t * // Rect out of an object.\n\t * const rectD = new Rect( { top: 0, right: 10, bottom: 10, left: 0, width: 10, height: 10 } );\n\t *\n\t * // Rect out of another Rect instance.\n\t * const rectE = new Rect( rectD );\n\t *\n\t * // Rect out of a ClientRect.\n\t * const rectF = new Rect( document.body.getClientRects().item( 0 ) );\n\t * ```\n\t *\n\t * **Note**: By default a rect of an HTML element includes its CSS borders and scrollbars (if any)\n\t * ant the rect of a `window` includes scrollbars too. Use {@link #excludeScrollbarsAndBorders}\n\t * to get the inner part of the rect.\n\t *\n\t * @param source A source object to create the rect.\n\t */\n\tconstructor( source: RectSource ) {\n\t\tconst isSourceRange = isRange( source );\n\n\t\tObject.defineProperty( this, '_source', {\n\t\t\t// If the source is a Rect instance, copy it's #_source.\n\t\t\tvalue: ( source as any )._source || source,\n\t\t\twritable: true,\n\t\t\tenumerable: false\n\t\t} );\n\n\t\tif ( isDomElement( source ) || isSourceRange ) {\n\t\t\t// The `Rect` class depends on `getBoundingClientRect` and `getClientRects` DOM methods. If the source\n\t\t\t// of a rect in an HTML element or a DOM range but it does not belong to any rendered DOM tree, these methods\n\t\t\t// will fail to obtain the geometry and the rect instance makes little sense to the features using it.\n\t\t\t// To get rid of this warning make sure the source passed to the constructor is a descendant of `window.document.body`.\n\t\t\t// @if CK_DEBUG // const sourceNode = isSourceRange ? source.startContainer : source;\n\t\t\t// @if CK_DEBUG // if ( !sourceNode.ownerDocument || !sourceNode.ownerDocument.body.contains( sourceNode ) ) {\n\t\t\t// @if CK_DEBUG // \tconsole.warn(\n\t\t\t// @if CK_DEBUG // \t\t'rect-source-not-in-dom: The source of this rect does not belong to any rendered DOM tree.',\n\t\t\t// @if CK_DEBUG // \t\t{ source } );\n\t\t\t// @if CK_DEBUG // }\n\n\t\t\tif ( isSourceRange ) {\n\t\t\t\tconst rangeRects = Rect.getDomRangeRects( source );\n\t\t\t\tcopyRectProperties( this, Rect.getBoundingRect( rangeRects )! );\n\t\t\t} else {\n\t\t\t\tcopyRectProperties( this, source.getBoundingClientRect() );\n\t\t\t}\n\t\t} else if ( isWindow( source ) ) {\n\t\t\tconst { innerWidth, innerHeight } = source;\n\n\t\t\tcopyRectProperties( this, {\n\t\t\t\ttop: 0,\n\t\t\t\tright: innerWidth,\n\t\t\t\tbottom: innerHeight,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: innerWidth,\n\t\t\t\theight: innerHeight\n\t\t\t} );\n\t\t} else {\n\t\t\tcopyRectProperties( this, source );\n\t\t}\n\t}\n\n\t/**\n\t * Returns a clone of the rect.\n\t *\n\t * @returns A cloned rect.\n\t */\n\tpublic clone(): Rect {\n\t\treturn new Rect( this );\n\t}\n\n\t/**\n\t * Moves the rect so that its upper–left corner lands in desired `[ x, y ]` location.\n\t *\n\t * @param x Desired horizontal location.\n\t * @param y Desired vertical location.\n\t * @returns A rect which has been moved.\n\t */\n\tpublic moveTo( x: number, y: number ): this {\n\t\tthis.top = y;\n\t\tthis.right = x + this.width;\n\t\tthis.bottom = y + this.height;\n\t\tthis.left = x;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Moves the rect in–place by a dedicated offset.\n\t *\n\t * @param x A horizontal offset.\n\t * @param y A vertical offset\n\t * @returns A rect which has been moved.\n\t */\n\tpublic moveBy( x: number, y: number ): this {\n\t\tthis.top += y;\n\t\tthis.right += x;\n\t\tthis.left += x;\n\t\tthis.bottom += y;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns a new rect a a result of intersection with another rect.\n\t */\n\tpublic getIntersection( anotherRect: Rect ): Rect | null {\n\t\tconst rect = {\n\t\t\ttop: Math.max( this.top, anotherRect.top ),\n\t\t\tright: Math.min( this.right, anotherRect.right ),\n\t\t\tbottom: Math.min( this.bottom, anotherRect.bottom ),\n\t\t\tleft: Math.max( this.left, anotherRect.left ),\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\n\t\trect.width = rect.right - rect.left;\n\t\trect.height = rect.bottom - rect.top;\n\n\t\tif ( rect.width < 0 || rect.height < 0 ) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tconst newRect = new Rect( rect );\n\n\t\t\tnewRect._source = this._source;\n\n\t\t\treturn newRect;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of intersection with another rect.\n\t *\n\t * @returns Area of intersection.\n\t */\n\tpublic getIntersectionArea( anotherRect: Rect ): number {\n\t\tconst rect = this.getIntersection( anotherRect );\n\n\t\tif ( rect ) {\n\t\t\treturn rect.getArea();\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the area of the rect.\n\t */\n\tpublic getArea(): number {\n\t\treturn this.width * this.height;\n\t}\n\n\t/**\n\t * Returns a new rect, a part of the original rect, which is actually visible to the user and is relative to the,`body`,\n\t * e.g. an original rect cropped by parent element rects which have `overflow` set in CSS\n\t * other than `\"visible\"`.\n\t *\n\t * If there's no such visible rect, which is when the rect is limited by one or many of\n\t * the ancestors, `null` is returned.\n\t *\n\t * **Note**: This method does not consider the boundaries of the viewport (window).\n\t * To get a rect cropped by all ancestors and the viewport, use an intersection such as:\n\t *\n\t * ```ts\n\t * const visibleInViewportRect = new Rect( window ).getIntersection( new Rect( source ).getVisible() );\n\t * ```\n\t *\n\t * @returns A visible rect instance or `null`, if there's none.\n\t */\n\tpublic getVisible(): Rect | null {\n\t\tconst source: RectSource & { parentNode?: Node | null; commonAncestorContainer?: Node | null } = this._source;\n\n\t\tlet visibleRect = this.clone();\n\n\t\t// There's no ancestor to crop <body> with the overflow.\n\t\tif ( isBody( source ) ) {\n\t\t\treturn visibleRect;\n\t\t}\n\n\t\tlet child: any = source;\n\t\tlet parent = source.parentNode || source.commonAncestorContainer;\n\t\tlet absolutelyPositionedChildElement;\n\n\t\t// Check the ancestors all the way up to the <body>.\n\t\twhile ( parent && !isBody( parent ) ) {\n\t\t\tconst isParentOverflowVisible = getElementOverflow( parent as HTMLElement ) === 'visible';\n\n\t\t\tif ( child instanceof HTMLElement && getElementPosition( child ) === 'absolute' ) {\n\t\t\t\tabsolutelyPositionedChildElement = child;\n\t\t\t}\n\n\t\t\tconst parentElementPosition = getElementPosition( parent );\n\n\t\t\t// The child will be cropped only if it has `position: absolute` and the parent has `position: relative` + some overflow.\n\t\t\t// Otherwise there's no chance of visual clipping and the parent can be skipped\n\t\t\t// https://github.com/ckeditor/ckeditor5/issues/14107.\n\t\t\t//\n\t\t\t// condition: isParentOverflowVisible\n\t\t\t// \t\t+---------------------------+\n\t\t\t//\t\t| #parent\t\t\t\t\t|\n\t\t\t//\t\t| (overflow: visible)\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t|\t\t\t\t| child\t\t\t\t\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t+---------------------------+\n\t\t\t//\n\t\t\t// condition: absolutelyPositionedChildElement && parentElementPosition === 'relative' && isParentOverflowVisible\n\t\t\t// \t\t+---------------------------+\n\t\t\t//\t\t| parent\t\t\t\t\t|\n\t\t\t//\t\t| (position: relative;)\t\t|\n\t\t\t//\t\t| (overflow: visible;)\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t|\t\t\t\t| child  \t\t\t\t\t|\n\t\t\t//\t\t|\t\t\t\t| (position: absolute;)\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t+---------------------------+\n\t\t\t//\n\t\t\t// condition: absolutelyPositionedChildElement && parentElementPosition !== 'relative'\n\t\t\t// \t\t+---------------------------+\n\t\t\t//\t\t| parent\t\t\t\t\t|\n\t\t\t//\t\t| (position: static;)\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t|\t\t\t\t| child  \t\t\t\t\t|\n\t\t\t//\t\t|\t\t\t\t| (position: absolute;)\t\t|\n\t\t\t//\t\t|\t\t\t\t+-----------+---------------+\n\t\t\t//\t\t+---------------------------+\n\t\t\tif (\n\t\t\t\tisParentOverflowVisible ||\n\t\t\t\tabsolutelyPositionedChildElement && (\n\t\t\t\t\t( parentElementPosition === 'relative' && isParentOverflowVisible ) ||\n\t\t\t\t\tparentElementPosition !== 'relative'\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tchild = parent;\n\t\t\t\tparent = parent.parentNode;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst parentRect = new Rect( parent as HTMLElement );\n\t\t\tconst intersectionRect = visibleRect.getIntersection( parentRect );\n\n\t\t\tif ( intersectionRect ) {\n\t\t\t\tif ( intersectionRect.getArea() < visibleRect.getArea() ) {\n\t\t\t\t\t// Reduce the visible rect to the intersection.\n\t\t\t\t\tvisibleRect = intersectionRect;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// There's no intersection, the rect is completely invisible.\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tchild = parent;\n\t\t\tparent = parent.parentNode;\n\t\t}\n\n\t\treturn visibleRect;\n\t}\n\n\t/**\n\t * Checks if all property values ({@link #top}, {@link #left}, {@link #right},\n\t * {@link #bottom}, {@link #width} and {@link #height}) are the equal in both rect\n\t * instances.\n\t *\n\t * @param anotherRect A rect instance to compare with.\n\t * @returns `true` when Rects are equal. `false` otherwise.\n\t */\n\tpublic isEqual( anotherRect: Rect ): boolean {\n\t\tfor ( const prop of rectProperties ) {\n\t\t\tif ( this[ prop ] !== anotherRect[ prop ] ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Checks whether a rect fully contains another rect instance.\n\t *\n\t * @param anotherRect\n\t * @returns `true` if contains, `false` otherwise.\n\t */\n\tpublic contains( anotherRect: Rect ): boolean {\n\t\tconst intersectRect = this.getIntersection( anotherRect );\n\n\t\treturn !!( intersectRect && intersectRect.isEqual( anotherRect ) );\n\t}\n\n\t/**\n\t * Recalculates screen coordinates to coordinates relative to the positioned ancestor offset.\n\t */\n\tpublic toAbsoluteRect(): Rect {\n\t\tconst { scrollX, scrollY } = global.window;\n\t\tconst absoluteRect = this.clone().moveBy( scrollX, scrollY );\n\n\t\tif ( isDomElement( absoluteRect._source ) ) {\n\t\t\tconst positionedAncestor = getPositionedAncestor( absoluteRect._source );\n\n\t\t\tif ( positionedAncestor ) {\n\t\t\t\tshiftRectToCompensatePositionedAncestor( absoluteRect, positionedAncestor );\n\t\t\t}\n\t\t}\n\n\t\treturn absoluteRect;\n\t}\n\n\t/**\n\t * Excludes scrollbars and CSS borders from the rect.\n\t *\n\t * * Borders are removed when {@link #_source} is an HTML element.\n\t * * Scrollbars are excluded from HTML elements and the `window`.\n\t *\n\t * @returns A rect which has been updated.\n\t */\n\tpublic excludeScrollbarsAndBorders(): this {\n\t\tconst source = this._source as ( HTMLElement | Window );\n\t\tlet scrollBarWidth, scrollBarHeight, direction;\n\n\t\tif ( isWindow( source ) ) {\n\t\t\tscrollBarWidth = source.innerWidth - source.document.documentElement.clientWidth;\n\t\t\tscrollBarHeight = source.innerHeight - source.document.documentElement.clientHeight;\n\t\t\tdirection = source.getComputedStyle( source.document.documentElement ).direction;\n\t\t} else {\n\t\t\tconst borderWidths = getBorderWidths( source );\n\n\t\t\tscrollBarWidth = source.offsetWidth - source.clientWidth - borderWidths.left - borderWidths.right;\n\t\t\tscrollBarHeight = source.offsetHeight - source.clientHeight - borderWidths.top - borderWidths.bottom;\n\t\t\tdirection = source.ownerDocument.defaultView!.getComputedStyle( source ).direction;\n\n\t\t\tthis.left += borderWidths.left;\n\t\t\tthis.top += borderWidths.top;\n\t\t\tthis.right -= borderWidths.right;\n\t\t\tthis.bottom -= borderWidths.bottom;\n\t\t\tthis.width = this.right - this.left;\n\t\t\tthis.height = this.bottom - this.top;\n\t\t}\n\n\t\tthis.width -= scrollBarWidth;\n\n\t\tif ( direction === 'ltr' ) {\n\t\t\tthis.right -= scrollBarWidth;\n\t\t} else {\n\t\t\tthis.left += scrollBarWidth;\n\t\t}\n\n\t\tthis.height -= scrollBarHeight;\n\t\tthis.bottom -= scrollBarHeight;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of rects of the given native DOM Range.\n\t *\n\t * @param range A native DOM range.\n\t * @returns DOM Range rects.\n\t */\n\tpublic static getDomRangeRects( range: Range ): Array<Rect> {\n\t\tconst rects: Array<Rect> = [];\n\t\t// Safari does not iterate over ClientRectList using for...of loop.\n\t\tconst clientRects = Array.from( range.getClientRects() );\n\n\t\tif ( clientRects.length ) {\n\t\t\tfor ( const rect of clientRects ) {\n\t\t\t\trects.push( new Rect( rect ) );\n\t\t\t}\n\t\t}\n\t\t// If there's no client rects for the Range, use parent container's bounding rect\n\t\t// instead and adjust rect's width to simulate the actual geometry of such range.\n\t\t// https://github.com/ckeditor/ckeditor5-utils/issues/153\n\t\t// https://github.com/ckeditor/ckeditor5-ui/issues/317\n\t\telse {\n\t\t\tlet startContainer = range.startContainer;\n\n\t\t\tif ( isText( startContainer ) ) {\n\t\t\t\tstartContainer = startContainer.parentNode!;\n\t\t\t}\n\n\t\t\tconst rect = new Rect( ( startContainer as Element ).getBoundingClientRect() );\n\t\t\trect.right = rect.left;\n\t\t\trect.width = 0;\n\n\t\t\trects.push( rect );\n\t\t}\n\n\t\treturn rects;\n\t}\n\n\t/**\n\t * Returns a bounding rectangle that contains all the given `rects`.\n\t *\n\t * @param rects A list of rectangles that should be contained in the result rectangle.\n\t * @returns Bounding rectangle or `null` if no `rects` were given.\n\t */\n\tpublic static getBoundingRect( rects: Iterable<Rect> ): Rect | null {\n\t\tconst boundingRectData = {\n\t\t\tleft: Number.POSITIVE_INFINITY,\n\t\t\ttop: Number.POSITIVE_INFINITY,\n\t\t\tright: Number.NEGATIVE_INFINITY,\n\t\t\tbottom: Number.NEGATIVE_INFINITY,\n\t\t\twidth: 0,\n\t\t\theight: 0\n\t\t};\n\t\tlet rectangleCount = 0;\n\n\t\tfor ( const rect of rects ) {\n\t\t\trectangleCount++;\n\n\t\t\tboundingRectData.left = Math.min( boundingRectData.left, rect.left );\n\t\t\tboundingRectData.top = Math.min( boundingRectData.top, rect.top );\n\t\t\tboundingRectData.right = Math.max( boundingRectData.right, rect.right );\n\t\t\tboundingRectData.bottom = Math.max( boundingRectData.bottom, rect.bottom );\n\t\t}\n\n\t\tif ( rectangleCount == 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tboundingRectData.width = boundingRectData.right - boundingRectData.left;\n\t\tboundingRectData.height = boundingRectData.bottom - boundingRectData.top;\n\n\t\treturn new Rect( boundingRectData );\n\t}\n}\n\n/**\n * A source of {@link module:utils/dom/rect~Rect}.\n */\nexport type RectSource = HTMLElement | Range | Window | DomRectLike;\n\n/**\n * An object that describes properties of `ClientRect` object.\n */\nexport interface DomRectLike {\n\treadonly top: number;\n\treadonly right: number;\n\treadonly bottom: number;\n\treadonly left: number;\n\treadonly width: number;\n\treadonly height: number;\n}\n\n/**\n * Acquires all the rect properties from the passed source.\n */\nfunction copyRectProperties( rect: Rect, source: DomRectLike ): void {\n\tfor ( const p of rectProperties ) {\n\t\trect[ p ] = source[ p ];\n\t}\n}\n\n/**\n * Checks if provided object is a <body> HTML element.\n */\nfunction isBody( value: unknown ): value is HTMLBodyElement {\n\tif ( !isDomElement( value ) ) {\n\t\treturn false;\n\t}\n\n\treturn value === value.ownerDocument.body;\n}\n\n/**\n * Checks if provided object \"looks like\" a DOM Element and has API required by `Rect` class.\n */\nfunction isDomElement( value: any ): value is Element {\n\t// Note: earlier we used `isElement()` from lodash library, however that function is less performant because\n\t// it makes complicated checks to make sure that given value is a DOM element.\n\treturn value !== null && typeof value === 'object' && value.nodeType === 1 && typeof value.getBoundingClientRect === 'function';\n}\n\n/**\n * Returns the value of the `position` style of an `HTMLElement`.\n */\nfunction getElementPosition( element: HTMLElement | Node ): string {\n\treturn element instanceof HTMLElement ? element.ownerDocument.defaultView!.getComputedStyle( element ).position : 'static';\n}\n\n/**\n * Returns the value of the `overflow` style of an `HTMLElement` or a `Range`.\n */\nfunction getElementOverflow( element: HTMLElement | Range ): string {\n\treturn element instanceof HTMLElement ? element.ownerDocument.defaultView!.getComputedStyle( element ).overflow : 'visible';\n}\n\n/**\n * For a given absolute Rect coordinates object and a positioned element ancestor, it updates its\n * coordinates that make up for the position and the scroll of the ancestor.\n *\n * This is necessary because while Rects (and DOMRects) are relative to the browser's viewport, their coordinates\n * are used in real–life to position elements with `position: absolute`, which are scoped by any positioned\n * (and scrollable) ancestors.\n */\nfunction shiftRectToCompensatePositionedAncestor( rect: Rect, positionedElementAncestor: HTMLElement ): void {\n\tconst ancestorPosition = new Rect( positionedElementAncestor );\n\tconst ancestorBorderWidths = getBorderWidths( positionedElementAncestor );\n\n\tlet moveX = 0;\n\tlet moveY = 0;\n\n\t// (https://github.com/ckeditor/ckeditor5-ui-default/issues/126)\n\t// If there's some positioned ancestor of the panel, then its `Rect` must be taken into\n\t// consideration. `Rect` is always relative to the viewport while `position: absolute` works\n\t// with respect to that positioned ancestor.\n\tmoveX -= ancestorPosition.left;\n\tmoveY -= ancestorPosition.top;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, not only its position must be taken into\n\t// consideration (see above) but also its internal scrolls. Scroll have an impact here because `Rect`\n\t// is relative to the viewport (it doesn't care about scrolling), while `position: absolute`\n\t// must compensate that scrolling.\n\tmoveX += positionedElementAncestor.scrollLeft;\n\tmoveY += positionedElementAncestor.scrollTop;\n\n\t// (https://github.com/ckeditor/ckeditor5-utils/issues/139)\n\t// If there's some positioned ancestor of the panel, then its `Rect` includes its CSS `borderWidth`\n\t// while `position: absolute` positioning does not consider it.\n\t// E.g. `{ position: absolute, top: 0, left: 0 }` means upper left corner of the element,\n\t// not upper-left corner of its border.\n\tmoveX -= ancestorBorderWidths.left;\n\tmoveY -= ancestorBorderWidths.top;\n\n\trect.moveBy( moveX, moveY );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/resizeobserver\n */\n\nimport { global } from './global.js';\n\n/**\n * A helper class which instances allow performing custom actions when native DOM elements are resized.\n *\n * ```ts\n * const editableElement = editor.editing.view.getDomRoot();\n *\n * const observer = new ResizeObserver( editableElement, entry => {\n * \tconsole.log( 'The editable element has been resized in DOM.' );\n * \tconsole.log( entry.target ); // -> editableElement\n * \tconsole.log( entry.contentRect.width ); // -> e.g. '423px'\n * } );\n * ```\n *\n * It uses the [native DOM resize observer](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)\n * under the hood.\n */\nexport class ResizeObserver {\n\t/**\n\t * The element observed by this observer.\n\t */\n\tprivate readonly _element: Element;\n\n\t/**\n\t * The callback executed each time {@link #_element} is resized.\n\t */\n\tprivate readonly _callback: ( entry: ResizeObserverEntry ) => void;\n\n\t/**\n\t * The single native observer instance shared across all {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n\t */\n\tprivate static _observerInstance: InstanceType<typeof global.window.ResizeObserver> | null = null;\n\n\t/**\n\t * A mapping of native DOM elements and their callbacks shared across all\n\t * {@link module:utils/dom/resizeobserver~ResizeObserver} instances.\n\t */\n\tprivate static _elementCallbacks: Map<Element, Set<( entry: ResizeObserverEntry ) => void>> | null = null;\n\n\t/**\n\t * Creates an instance of the `ResizeObserver` class.\n\t *\n\t * @param element A DOM element that is to be observed for resizing. Note that\n\t * the element must be visible (i.e. not detached from DOM) for the observer to work.\n\t * @param callback A function called when the observed element was resized. It passes\n\t * the [`ResizeObserverEntry`](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserverEntry)\n\t * object with information about the resize event.\n\t */\n\tconstructor( element: Element, callback: ( entry: ResizeObserverEntry ) => void ) {\n\t\t// **Note**: For the maximum performance, this class ensures only a single instance of the native\n\t\t// observer is used no matter how many instances of this class were created.\n\t\tif ( !ResizeObserver._observerInstance ) {\n\t\t\tResizeObserver._createObserver();\n\t\t}\n\n\t\tthis._element = element;\n\t\tthis._callback = callback;\n\n\t\tResizeObserver._addElementCallback( element, callback );\n\t\tResizeObserver._observerInstance!.observe( element );\n\t}\n\n\t/**\n\t * The element observed by this observer.\n\t */\n\tpublic get element(): Element {\n\t\treturn this._element;\n\t}\n\n\t/**\n\t * Destroys the observer which disables the `callback` passed to the {@link #constructor}.\n\t */\n\tpublic destroy(): void {\n\t\tResizeObserver._deleteElementCallback( this._element, this._callback );\n\t}\n\n\t/**\n\t * Registers a new resize callback for the DOM element.\n\t */\n\tprivate static _addElementCallback( element: Element, callback: ( entry: ResizeObserverEntry ) => void ): void {\n\t\tif ( !ResizeObserver._elementCallbacks ) {\n\t\t\tResizeObserver._elementCallbacks = new Map();\n\t\t}\n\n\t\tlet callbacks = ResizeObserver._elementCallbacks.get( element );\n\n\t\tif ( !callbacks ) {\n\t\t\tcallbacks = new Set();\n\t\t\tResizeObserver._elementCallbacks.set( element, callbacks );\n\t\t}\n\n\t\tcallbacks.add( callback );\n\t}\n\n\t/**\n\t * Removes a resize callback from the DOM element. If no callbacks are left\n\t * for the element, it removes the element from the native observer.\n\t */\n\tprivate static _deleteElementCallback( element: Element, callback: ( entry: ResizeObserverEntry ) => void ): void {\n\t\tconst callbacks = ResizeObserver._getElementCallbacks( element );\n\n\t\t// Remove the element callback. Check if exist first in case someone\n\t\t// called destroy() twice.\n\t\tif ( callbacks ) {\n\t\t\tcallbacks.delete( callback );\n\n\t\t\t// If no callbacks left for the element, also remove the element.\n\t\t\tif ( !callbacks.size ) {\n\t\t\t\tResizeObserver._elementCallbacks!.delete( element );\n\t\t\t\tResizeObserver._observerInstance!.unobserve( element );\n\t\t\t}\n\t\t}\n\n\t\tif ( ResizeObserver._elementCallbacks && !ResizeObserver._elementCallbacks.size ) {\n\t\t\tResizeObserver._observerInstance = null;\n\t\t\tResizeObserver._elementCallbacks = null;\n\t\t}\n\t}\n\n\t/**\n\t * Returns are registered resize callbacks for the DOM element.\n\t */\n\tprivate static _getElementCallbacks( element: Element ): Set<( entry: ResizeObserverEntry ) => void> | null | undefined {\n\t\tif ( !ResizeObserver._elementCallbacks ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn ResizeObserver._elementCallbacks.get( element );\n\t}\n\n\t/**\n\t * Creates the single native observer shared across all `ResizeObserver` instances.\n\t */\n\tprivate static _createObserver(): void {\n\t\tResizeObserver._observerInstance = new global.window.ResizeObserver( entries => {\n\t\t\tfor ( const entry of entries ) {\n\t\t\t\tconst callbacks = ResizeObserver._getElementCallbacks( entry.target );\n\n\t\t\t\tif ( callbacks ) {\n\t\t\t\t\tfor ( const callback of callbacks ) {\n\t\t\t\t\t\tcallback( entry );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/setdatainelement\n */\n\n/**\n * Sets data in a given element.\n *\n * @param el The element in which the data will be set.\n * @param data The data string.\n */\nexport function setDataInElement( el: HTMLElement, data: string ): void {\n\tif ( el instanceof HTMLTextAreaElement ) {\n\t\tel.value = data;\n\t}\n\n\tel.innerHTML = data;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/tounit\n */\n\n/**\n * Returns a helper function, which adds a desired trailing\n * `unit` to the passed value.\n *\n * @param unit An unit like \"px\" or \"em\".\n */\nexport function toUnit( unit: string ): ToUnitHelper {\n\treturn value => value + unit;\n}\n\n/**\n * A function, which adds a pre–defined trailing `unit`\n * to the passed `value`.\n *\n * @param value A value to be given the unit.\n * @returns A value with the trailing unit.\n */\nexport type ToUnitHelper = ( value: string | number ) => string;\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/indexof\n */\n\n/**\n * Returns index of the node in the parent element.\n *\n * @param node Node which index is tested.\n * @returns Index of the node in the parent element. Returns 0 if node has no parent.\n */\nexport function indexOf( node: Node ): number {\n\tlet index = 0;\n\n\twhile ( node.previousSibling ) {\n\t\tnode = node.previousSibling;\n\t\tindex++;\n\t}\n\n\treturn index;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/insertat\n */\n\n/**\n * Inserts node to the parent at given index.\n *\n * @param parentElement Parent element.\n * @param index Insertions index.\n * @param nodeToInsert Node to insert.\n */\nexport function insertAt(\n\tparentElement: Element,\n\tindex: number,\n\tnodeToInsert: Node\n): void {\n\tparentElement.insertBefore( nodeToInsert, parentElement.childNodes[ index ] || null );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/iscomment\n */\n\n/**\n * Checks whether the object is a native DOM Comment node.\n */\nexport function isComment( obj: any ): obj is Comment {\n\treturn obj && obj.nodeType === Node.COMMENT_NODE;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/isvalidattributename\n */\n\nimport { global } from './global.js';\n\n/**\n * Checks if the given attribute name is valid in terms of HTML.\n *\n * @param name Attribute name.\n */\nexport function isValidAttributeName( name: string ): boolean {\n\ttry {\n\t\tglobal.document.createAttribute( name );\n\t} catch {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/isvisible\n */\n\nimport { isText } from './istext.js';\n\n/**\n * Checks whether the element is visible to the user in DOM:\n *\n * * connected to the root of the document,\n * * has no `display: none`,\n * * has no ancestors with `display: none`.\n *\n * **Note**: This helper does not check whether the element is hidden by cropping, overflow, etc..\n * To check that, use {@link module:utils/dom/rect~Rect} instead.\n */\nexport function isVisible( element: Text | HTMLElement | null | undefined ): boolean {\n\tif ( !element ) {\n\t\treturn false;\n\t}\n\n\tif ( isText( element ) ) {\n\t\treturn isVisible( element.parentElement );\n\t}\n\n\tif ( element.getClientRects ) {\n\t\treturn !!( element.getClientRects().length );\n\t}\n\n\treturn false;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/position\n */\n\nimport { global } from './global.js';\nimport { Rect, type RectSource } from './rect.js';\nimport { getPositionedAncestor } from './getpositionedancestor.js';\nimport { isFunction } from 'es-toolkit/compat';\n\n// @if CK_DEBUG_POSITION // const {\n// @if CK_DEBUG_POSITION // \tdefault: RectDrawer,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesBlack,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesGreen,\n// @if CK_DEBUG_POSITION // \tdiagonalStylesRed\n// @if CK_DEBUG_POSITION // } = require( '@ckeditor/ckeditor5-utils/tests/_utils/rectdrawer' );\n// @if CK_DEBUG_POSITION // const TARGET_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px', outlineStyle: 'dashed', outlineColor: 'blue', outlineOffset: '2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VISIBLE_TARGET_RECT_STYLE = {\n// @if CK_DEBUG_POSITION //\t\t...diagonalStylesBlack,\n// @if CK_DEBUG_POSITION //\t\topacity: '1',\n// @if CK_DEBUG_POSITION //\t\tbackgroundColor: '#00000033',\n// @if CK_DEBUG_POSITION //\t\toutlineWidth: '2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VIEWPORT_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px',\n// @if CK_DEBUG_POSITION // \toutlineOffset: '-2px',\n// @if CK_DEBUG_POSITION // \toutlineStyle: 'solid',\n// @if CK_DEBUG_POSITION // \toutlineColor: 'red'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const VISIBLE_LIMITER_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \t...diagonalStylesGreen,\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px',\n// @if CK_DEBUG_POSITION // \toutlineOffset: '-2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const ELEMENT_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \toutlineWidth: '2px', outlineColor: 'orange', outlineOffset: '-2px'\n// @if CK_DEBUG_POSITION // };\n// @if CK_DEBUG_POSITION // const CHOSEN_POSITION_RECT_STYLE = {\n// @if CK_DEBUG_POSITION // \topacity: .5, outlineColor: 'magenta', backgroundColor: 'magenta'\n// @if CK_DEBUG_POSITION // };\n\n/**\n * Calculates the `position: absolute` coordinates of a given element so it can be positioned with respect to the\n * target in the visually most efficient way, taking various restrictions like viewport or limiter geometry\n * into consideration.\n *\n * **Note**: If there are no position coordinates found that meet the requirements (arguments of this helper),\n * `null` is returned.\n *\n * ```ts\n * // The element which is to be positioned.\n * const element = document.body.querySelector( '#toolbar' );\n *\n * // A target to which the element is positioned relatively.\n * const target = document.body.querySelector( '#container' );\n *\n * // Finding the optimal coordinates for the positioning.\n * const { left, top, name } = getOptimalPosition( {\n * \telement: element,\n * \ttarget: target,\n *\n * \t// The algorithm will chose among these positions to meet the requirements such\n * \t// as \"limiter\" element or \"fitInViewport\", set below. The positions are considered\n * \t// in the order of the array.\n * \tpositions: [\n * \t\t//\n * \t \t//\t[ Target ]\n * \t\t//\t+-----------------+\n * \t\t//\t|     Element     |\n * \t\t//\t+-----------------+\n * \t\t//\n * \t\ttargetRect => ( {\n * \t\t\ttop: targetRect.bottom,\n * \t\t\tleft: targetRect.left,\n * \t\t\tname: 'mySouthEastPosition'\n * \t\t} ),\n *\n * \t\t//\n * \t\t//\t+-----------------+\n * \t\t//\t|     Element     |\n * \t\t//\t+-----------------+\n * \t\t//\t[ Target ]\n * \t\t//\n * \t\t( targetRect, elementRect ) => ( {\n * \t\t\ttop: targetRect.top - elementRect.height,\n * \t\t\tleft: targetRect.left,\n * \t\t\tname: 'myNorthEastPosition'\n * \t\t} )\n * \t],\n *\n * \t// Find a position such guarantees the element remains within visible boundaries of <body>.\n * \tlimiter: document.body,\n *\n * \t// Find a position such guarantees the element remains within visible boundaries of the browser viewport.\n * \tfitInViewport: true\n * } );\n *\n * // The best position which fits into document.body and the viewport. May be useful\n * // to set proper class on the `element`.\n * console.log( name ); // -> \"myNorthEastPosition\"\n *\n * // Using the absolute coordinates which has been found to position the element\n * // as in the diagram depicting the \"myNorthEastPosition\" position.\n * element.style.top = top;\n * element.style.left = left;\n * ```\n *\n * @param options The input data and configuration of the helper.\n */\nexport function getOptimalPosition( {\n\telement, target, positions, limiter, fitInViewport, viewportOffsetConfig\n}: DomOptimalPositionOptions ): DomPoint | null {\n\t// If the {@link module:utils/dom/position~Options#target} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-utils/issues/157\n\tif ( isFunction( target ) ) {\n\t\ttarget = target();\n\t}\n\n\t// If the {@link module:utils/dom/position~Options#limiter} is a function, use what it returns.\n\t// https://github.com/ckeditor/ckeditor5-ui/issues/260\n\tif ( isFunction( limiter ) ) {\n\t\tlimiter = limiter();\n\t}\n\n\tconst positionedElementAncestor = getPositionedAncestor( element );\n\tconst constrainedViewportRect = getConstrainedViewportRect( viewportOffsetConfig );\n\tconst elementRect = new Rect( element );\n\tconst visibleTargetRect = getVisibleViewportIntersectionRect( target, constrainedViewportRect );\n\n\tlet bestPosition: DomPoint | null;\n\n\t// @if CK_DEBUG_POSITION // const targetRect = new Rect( target );\n\t// @if CK_DEBUG_POSITION // RectDrawer.clear();\n\t// @if CK_DEBUG_POSITION // RectDrawer.draw( targetRect, TARGET_RECT_STYLE, 'Target' );\n\t// @if CK_DEBUG_POSITION // if ( constrainedViewportRect ) {\n\t// @if CK_DEBUG_POSITION //\t\tRectDrawer.draw( constrainedViewportRect, VIEWPORT_RECT_STYLE, 'Viewport' );\n\t// @if CK_DEBUG_POSITION // }\n\n\t// If the target got cropped by ancestors or went off the screen, positioning does not make any sense.\n\tif ( !visibleTargetRect || !constrainedViewportRect.getIntersection( visibleTargetRect ) ) {\n\t\treturn null;\n\t}\n\n\t// @if CK_DEBUG_POSITION //\tRectDrawer.draw( visibleTargetRect, VISIBLE_TARGET_RECT_STYLE, 'VisTgt' );\n\n\tconst positionOptions: PositionObjectOptions = {\n\t\ttargetRect: visibleTargetRect,\n\t\telementRect,\n\t\tpositionedElementAncestor,\n\t\tviewportRect: constrainedViewportRect\n\t};\n\n\t// If there are no limits, just grab the very first position and be done with that drama.\n\tif ( !limiter && !fitInViewport ) {\n\t\tbestPosition = new PositionObject( positions[ 0 ], positionOptions );\n\t} else {\n\t\tif ( limiter ) {\n\t\t\tconst visibleLimiterRect = getVisibleViewportIntersectionRect( limiter, constrainedViewportRect );\n\n\t\t\tif ( visibleLimiterRect ) {\n\t\t\t\tpositionOptions.limiterRect = visibleLimiterRect;\n\t\t\t\t// @if CK_DEBUG_POSITION // RectDrawer.draw( visibleLimiterRect, VISIBLE_LIMITER_RECT_STYLE, 'VisLim' );\n\t\t\t}\n\t\t}\n\n\t\t// If there's no best position found, i.e. when all intersections have no area because\n\t\t// rects have no width or height, then just return `null`\n\t\tbestPosition = getBestPosition( positions, positionOptions );\n\t}\n\n\treturn bestPosition;\n}\n\n/**\n * Returns intersection of visible source `Rect` with Viewport `Rect`. In case when source `Rect` is not visible\n * or there is no intersection between source `Rect` and Viewport `Rect`, `null` will be returned.\n */\nfunction getVisibleViewportIntersectionRect( source: RectSource, viewportRect: Rect ): Rect | null {\n\tconst visibleSourceRect = new Rect( source ).getVisible();\n\n\tif ( !visibleSourceRect ) {\n\t\treturn null;\n\t}\n\n\treturn visibleSourceRect.getIntersection( viewportRect );\n}\n\n/**\n * Returns a viewport `Rect` shrunk by the viewport offset config from all sides.\n */\nfunction getConstrainedViewportRect( viewportOffsetConfig: DomOptimalPositionOptions[ 'viewportOffsetConfig' ] ): Rect {\n\tviewportOffsetConfig = Object.assign( { top: 0, bottom: 0, left: 0, right: 0 }, viewportOffsetConfig );\n\n\tconst viewportRect = new Rect( global.window );\n\n\tviewportRect.top += viewportOffsetConfig.top!;\n\tviewportRect.height -= viewportOffsetConfig.top!;\n\tviewportRect.bottom -= viewportOffsetConfig.bottom!;\n\tviewportRect.height -= viewportOffsetConfig.bottom!;\n\n\treturn viewportRect;\n}\n\n/**\n * For a given array of positioning functions, returns such that provides the best\n * fit of the `elementRect` into the `limiterRect` and `viewportRect`.\n */\nfunction getBestPosition(\n\tpositions: ReadonlyArray<PositioningFunction>,\n\toptions: ConstructorParameters<typeof PositionObject>[ 1 ]\n): DomPoint | null {\n\tconst { elementRect } = options;\n\n\t// This is when element is fully visible.\n\tconst elementRectArea = elementRect.getArea();\n\n\tconst positionInstances = positions\n\t\t.map( positioningFunction => new PositionObject( positioningFunction, options ) )\n\t\t// Some positioning functions may return `null` if they don't want to participate.\n\t\t.filter( position => !!position.name );\n\n\tlet maxFitFactor = 0;\n\tlet bestPosition = null;\n\n\tfor ( const position of positionInstances ) {\n\t\tconst { limiterIntersectionArea, viewportIntersectionArea } = position;\n\n\t\t// If a such position is found that element is fully contained by the limiter then, obviously,\n\t\t// there will be no better one, so finishing.\n\t\tif ( limiterIntersectionArea === elementRectArea ) {\n\t\t\t// @if CK_DEBUG_POSITION //\tRectDrawer.draw( position._rect, CHOSEN_POSITION_RECT_STYLE, [\n\t\t\t// @if CK_DEBUG_POSITION //\t\tposition.name,\n\t\t\t// @if CK_DEBUG_POSITION //\t\t'100% fit',\n\t\t\t// @if CK_DEBUG_POSITION //\t].join( '\\n' ) );\n\n\t\t\treturn position;\n\t\t}\n\n\t\t// To maximize both viewport and limiter intersection areas we use distance on _viewportIntersectionArea\n\t\t// and _limiterIntersectionArea plane (without sqrt because we are looking for max value).\n\t\tconst fitFactor = viewportIntersectionArea ** 2 + limiterIntersectionArea ** 2;\n\n\t\t// @if CK_DEBUG_POSITION //\tRectDrawer.draw( position._rect, { opacity: .4 }, [\n\t\t// @if CK_DEBUG_POSITION //\t\tposition.name,\n\t\t// @if CK_DEBUG_POSITION //\t\t'Vi=' +  Math.round( viewportIntersectionArea ),\n\t\t// @if CK_DEBUG_POSITION //\t\t'Li=' + Math.round( limiterIntersectionArea )\n\t\t// @if CK_DEBUG_POSITION //\t].join( '\\n' ) );\n\n\t\tif ( fitFactor > maxFitFactor ) {\n\t\t\tmaxFitFactor = fitFactor;\n\t\t\tbestPosition = position;\n\t\t}\n\t}\n\n\t// @if CK_DEBUG_POSITION // if ( bestPosition ) {\n\t// @if CK_DEBUG_POSITION // \tRectDrawer.draw( bestPosition._rect, CHOSEN_POSITION_RECT_STYLE );\n\t// @if CK_DEBUG_POSITION // }\n\n\treturn bestPosition;\n}\n\n/**\n * A position object which instances are created and used by the {@link module:utils/dom/position~getOptimalPosition} helper.\n *\n * {@link module:utils/dom/position~DomPoint#top} and {@link module:utils/dom/position~DomPoint#left} properties of the position instance\n * translate directly to the `top` and `left` properties in CSS \"`position: absolute` coordinate system\". If set on the positioned element\n * in DOM, they will make it display it in the right place in the viewport.\n */\nexport interface DomPoint {\n\n\t/**\n\t * Position name.\n\t */\n\treadonly name?: string;\n\n\t/**\n\t * Additional position configuration, as passed from the {@link module:utils/dom/position~PositioningFunction positioning function}.\n\t *\n\t * This object can be use, for instance, to pass through presentation options used by the consumer of the\n\t * {@link module:utils/dom/position~getOptimalPosition} helper.\n\t */\n\treadonly config?: object;\n\n\t/**\n\t * The left value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */\n\treadonly left: number;\n\n\t/**\n\t * The top value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */\n\treadonly top: number;\n}\n\n/**\n * A position options object which options are passed in the {@link module:utils/dom/position~PositionObject Class constructor},\n * to be used by {@link module:utils/dom/position~PositioningFunction positioning function}.\n */\ntype PositionObjectOptions = {\n\telementRect: Rect;\n\ttargetRect: Rect;\n\tviewportRect: Rect;\n\tpositionedElementAncestor?: HTMLElement | null;\n\tlimiterRect?: Rect;\n};\n\n/**\n * A position class which instances are created and used by the {@link module:utils/dom/position~getOptimalPosition} helper.\n *\n * {@link module:utils/dom/position~Position#top} and {@link module:utils/dom/position~Position#left} properties of the position instance\n * translate directly to the `top` and `left` properties in CSS \"`position: absolute` coordinate system\". If set on the positioned element\n * in DOM, they will make it display it in the right place in the viewport.\n */\nclass PositionObject implements DomPoint {\n\tpublic name?: string;\n\tpublic config?: object;\n\n\tprivate _positioningFunctionCoordinates!: { left: number; top: number };\n\tprivate _options!: ConstructorParameters<typeof PositionObject>[ 1 ];\n\tprivate _cachedRect?: Rect;\n\tprivate _cachedAbsoluteRect?: Rect;\n\n\t/**\n\t * Creates an instance of the {@link module:utils/dom/position~PositionObject} class.\n\t *\n\t * @param positioningFunction function The function that defines the expected\n\t * coordinates the positioned element should move to.\n\t * @param options options object.\n\t * @param options.elementRect The positioned element rect.\n\t * @param options.targetRect The target element rect.\n\t * @param options.viewportRect The viewport rect.\n\t * @param options.limiterRect The limiter rect.\n\t * @param options.positionedElementAncestor Nearest element ancestor element which CSS position is not \"static\".\n\t */\n\tconstructor(\n\t\tpositioningFunction: PositioningFunction,\n\t\toptions: Readonly<PositionObjectOptions>\n\t) {\n\t\tconst positioningFunctionOutput = positioningFunction(\n\t\t\toptions.targetRect,\n\t\t\toptions.elementRect,\n\t\t\toptions.viewportRect,\n\t\t\toptions.limiterRect\n\t\t);\n\n\t\t// Nameless position for a function that didn't participate.\n\t\tif ( !positioningFunctionOutput ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { left, top, name, config } = positioningFunctionOutput;\n\n\t\tthis.name = name;\n\t\tthis.config = config;\n\n\t\tthis._positioningFunctionCoordinates = { left, top };\n\t\tthis._options = options;\n\t}\n\n\t/**\n\t * The left value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */\n\tpublic get left(): number {\n\t\treturn this._absoluteRect.left;\n\t}\n\n\t/**\n\t * The top value in pixels in the CSS `position: absolute` coordinate system.\n\t * Set it on the positioned element in DOM to move it to the position.\n\t */\n\tpublic get top(): number {\n\t\treturn this._absoluteRect.top;\n\t}\n\n\t/**\n\t * An intersection area between positioned element and limiter within viewport constraints.\n\t */\n\tpublic get limiterIntersectionArea(): number {\n\t\tconst limiterRect = this._options.limiterRect;\n\n\t\tif ( limiterRect ) {\n\t\t\treturn limiterRect.getIntersectionArea( this._rect );\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\t/**\n\t * An intersection area between positioned element and viewport.\n\t */\n\tpublic get viewportIntersectionArea(): number {\n\t\tconst viewportRect = this._options.viewportRect!;\n\n\t\treturn viewportRect.getIntersectionArea( this._rect );\n\t}\n\n\t/**\n\t * An already positioned element rect. A clone of the element rect passed to the constructor\n\t * but placed in the viewport according to the positioning function.\n\t */\n\tprivate get _rect(): Rect {\n\t\tif ( this._cachedRect ) {\n\t\t\treturn this._cachedRect;\n\t\t}\n\n\t\tthis._cachedRect = this._options.elementRect.clone().moveTo(\n\t\t\tthis._positioningFunctionCoordinates.left,\n\t\t\tthis._positioningFunctionCoordinates.top\n\t\t);\n\n\t\treturn this._cachedRect;\n\t}\n\n\t/**\n\t * An already absolutely positioned element rect. See ({@link #_rect}).\n\t */\n\tprivate get _absoluteRect(): Rect {\n\t\tif ( this._cachedAbsoluteRect ) {\n\t\t\treturn this._cachedAbsoluteRect;\n\t\t}\n\n\t\tthis._cachedAbsoluteRect = this._rect.toAbsoluteRect();\n\n\t\treturn this._cachedAbsoluteRect;\n\t}\n}\n\n/**\n * The `getOptimalPosition()` helper options.\n */\nexport interface DomOptimalPositionOptions {\n\n\t/**\n\t * Element that is to be positioned.\n\t */\n\treadonly element: HTMLElement;\n\n\t/**\n\t * Target with respect to which the `element` is to be positioned.\n\t */\n\treadonly target: RectSource | ( () => RectSource );\n\n\t/**\n\t * An array of positioning functions.\n\t *\n\t * **Note**: Positioning functions are processed in the order of preference. The first function that works\n\t * in the current environment (e.g. offers the complete fit in the viewport geometry) will be picked by\n\t * `getOptimalPosition()`.\n\t *\n\t * **Note**: Any positioning function returning `null` is ignored.\n\t */\n\treadonly positions: ReadonlyArray<PositioningFunction>;\n\n\t/**\n\t * When set, the algorithm will chose position which fits the most in the\n\t * limiter's bounding rect.\n\t */\n\treadonly limiter?: RectSource | ( () => ( RectSource | null ) ) | null;\n\n\t/**\n\t * When set, the algorithm will chose such a position which fits `element`\n\t * the most inside visible viewport.\n\t */\n\treadonly fitInViewport?: boolean;\n\n\t/**\n\t * Viewport offset config object. It restricts the visible viewport available to the `getOptimalPosition()` from each side.\n\t *\n\t * ```ts\n\t * {\n\t * \ttop: 50,\n\t * \tright: 50,\n\t * \tbottom: 50,\n\t * \tleft: 50\n\t * }\n\t * ```\n\t */\n\treadonly viewportOffsetConfig?: {\n\t\treadonly top?: number;\n\t\treadonly right?: number;\n\t\treadonly bottom?: number;\n\t\treadonly left?: number;\n\t};\n}\n\n/**\n * A positioning function which, based on positioned element and target {@link module:utils/dom/rect~Rect Rects}, returns rect coordinates\n * representing the geometrical relation between them. Used by the {@link module:utils/dom/position~getOptimalPosition} helper.\n *\n * ```ts\n * // This simple position will place the element directly under the target, in the middle:\n * //\n * //\t    [ Target ]\n * //\t+-----------------+\n * //\t|     Element     |\n * //\t+-----------------+\n * //\n * const position = ( targetRect, elementRect, [ viewportRect ] ) => ( {\n * \ttop: targetRect.bottom,\n * \tleft: targetRect.left + targetRect.width / 2 - elementRect.width / 2,\n * \tname: 'bottomMiddle',\n *\n * \t// Note: The config is optional.\n * \tconfig: {\n * \t\tzIndex: '999'\n * \t}\n * } );\n * ```\n *\n * @param elementRect The rect of the element to be positioned.\n * @param targetRect The rect of the target the element (its rect) is relatively positioned to.\n * @param viewportRect The rect of the visual browser viewport.\n * @returns When the function returns `null`, it will not be considered by {@link module:utils/dom/position~getOptimalPosition}.\n */\nexport type PositioningFunction = (\n\telementRect: Rect,\n\ttargetRect: Rect,\n\tviewportRect: Rect,\n\tlimiterRect?: Rect\n) => DomPositioningFunctionResult | null;\n\n/**\n * The result of {@link module:utils/dom/position~PositioningFunction}.\n */\nexport interface DomPositioningFunctionResult {\n\n\t/**\n\t * The `top` value of the element rect that would represent the position.\n\t */\n\ttop: number;\n\n\t/**\n\t * The `left` value of the element rect that would represent the position.\n\t */\n\tleft: number;\n\n\t/**\n\t * The name of the position. It helps the user of the {@link module:utils/dom/position~getOptimalPosition}\n\t * helper to recognize different positioning function results. It will pass through to the {@link module:utils/dom/position~DomPoint}\n\t * returned by the helper.\n\t */\n\tname?: string;\n\n\t/**\n\t * An optional configuration that will pass-through the {@link module:utils/dom/position~getOptimalPosition} helper\n\t * to the {@link module:utils/dom/position~DomPoint} returned by this helper.\n\t * This configuration may, for instance, let the user of {@link module:utils/dom/position~getOptimalPosition} know that this particular\n\t * position comes with a certain presentation.\n\t */\n\tconfig?: object;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/remove\n */\n\n/**\n * Removes given node from parent.\n *\n * @param node Node to remove.\n */\nexport function remove( node: Node ): void {\n\tconst parent = node.parentNode;\n\n\tif ( parent ) {\n\t\tparent.removeChild( node );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/getvisualviewportoffset\n */\n\nimport { global } from './global.js';\nimport { env } from '../env.js';\n\n/**\n * Returns the visual viewport offsets to adjust elements with `position: fixed` style.\n */\nexport function getVisualViewportOffset(): { left: number; top: number } {\n\tconst visualViewport = global.window.visualViewport;\n\n\tif ( !visualViewport || !( env.isiOS || env.isSafari ) ) {\n\t\treturn { left: 0, top: 0 };\n\t}\n\n\tconst left = Math.max( Math.round( visualViewport.offsetLeft ), 0 );\n\tconst top = Math.max( Math.round( visualViewport.offsetTop ), 0 );\n\n\treturn { left, top };\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/dom/scroll\n */\n\nimport { isRange } from './isrange.js';\nimport { Rect } from './rect.js';\nimport { isText } from './istext.js';\n\nexport type IfTrue<T> = T extends true ? true : never;\n\n/**\n * Makes any page `HTMLElement` or `Range` (`target`) visible inside the browser viewport.\n * This helper will scroll all `target` ancestors and the web browser viewport to reveal the target to\n * the user. If the `target` is already visible, nothing will happen.\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.target A target, which supposed to become visible to the user.\n * @param options.viewportOffset An offset from the edge of the viewport (in pixels)\n * the `target` will be moved by if the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the viewport and thus making it easier to\n * read or edit by the user.\n * @param options.ancestorOffset An offset from the boundary of scrollable ancestors (if any)\n * the `target` will be moved by if the viewport is scrolled. It enhances the user experience\n * by keeping the `target` some distance from the edge of the ancestors and thus making it easier to\n * read or edit by the user.\n * @param options.alignToTop When set `true`, the helper will make sure the `target` is scrolled up\n * to the top boundary of the viewport and/or scrollable ancestors if scrolled up. When not set\n * (default), the `target` will be revealed by scrolling as little as possible. This option will\n * not affect `targets` that must be scrolled down because they will appear at the top of the boundary\n * anyway.\n *\n * ```\n *                                             scrollViewportToShowTarget() with            scrollViewportToShowTarget() with\n *          Initial state                        alignToTop unset (default)                        alignToTop = true\n *\n * ┌────────────────────────────────┬─┐       ┌────────────────────────────────┬─┐        ┌────────────────────────────────┬─┐\n * │                                │▲│       │                                │▲│        │   [ Target to be revealed ]    │▲│\n * │                                │ │       │                                │ │        │                                │ │\n * │                                │█│       │                                │ │        │                                │ │\n * │                                │█│       │                                │ │        │                                │ │\n * │                                │ │       │                                │█│        │                                │ │\n * │                                │ │       │                                │█│        │                                │█│\n * │                                │ │       │                                │ │        │                                │█│\n * │                                │▼│       │   [ Target to be revealed ]    │▼│        │                                │▼│\n * └────────────────────────────────┴─┘       └────────────────────────────────┴─┘        └────────────────────────────────┴─┘\n *\n *\n *     [ Target to be revealed ]\n *```\n *\n * @param options.forceScroll When set `true`, the `target` will be aligned to the top of the viewport\n * and scrollable ancestors whether it is already visible or not. This option will only work when `alignToTop`\n * is `true`\n */\nexport function scrollViewportToShowTarget<T extends boolean, U extends IfTrue<T>>(\n\t{\n\t\ttarget,\n\t\tviewportOffset = 0,\n\t\tancestorOffset = 0,\n\t\talignToTop,\n\t\tforceScroll\n\t}:\n\t{\n\t\treadonly target: HTMLElement | Range;\n\t\treadonly viewportOffset?: number | { top: number; bottom: number; left: number; right: number };\n\t\treadonly ancestorOffset?: number;\n\t\treadonly alignToTop?: T;\n\t\treadonly forceScroll?: U;\n\t}\n): void {\n\tconst targetWindow = getWindow( target );\n\tlet currentWindow: Window | null = targetWindow;\n\tlet currentFrame: HTMLElement | null = null;\n\n\tviewportOffset = normalizeViewportOffset( viewportOffset );\n\n\t// Iterate over all windows, starting from target's parent window up to window#top.\n\twhile ( currentWindow ) {\n\t\tlet firstAncestorToScroll: HTMLElement;\n\n\t\t// Let's scroll target's ancestors first to reveal it. Then, once the ancestor scrolls\n\t\t// settled down, the algorithm can eventually scroll the viewport of the current window.\n\t\t//\n\t\t// Note: If the current window is target's **original** window (e.g. the first one),\n\t\t// start scrolling the closest parent of the target. If not, scroll the closest parent\n\t\t// of an iframe that resides in the current window.\n\t\tif ( currentWindow == targetWindow ) {\n\t\t\tfirstAncestorToScroll = getParentElement( target );\n\t\t} else {\n\t\t\tfirstAncestorToScroll = getParentElement( currentFrame! );\n\t\t}\n\n\t\t// Scroll the target's ancestors first. Once done, scrolling the viewport is easy.\n\t\tscrollAncestorsToShowRect( {\n\t\t\tparent: firstAncestorToScroll,\n\t\t\tgetRect: () => {\n\t\t\t\t// Note: If the target does not belong to the current window **directly**,\n\t\t\t\t// i.e. it resides in an iframe belonging to the window, obtain the target's rect\n\t\t\t\t// in the coordinates of the current window. By default, a Rect returns geometry\n\t\t\t\t// relative to the current window's viewport. To make it work in a parent window,\n\t\t\t\t// it must be shifted.\n\t\t\t\treturn getRectRelativeToWindow( target, currentWindow! );\n\t\t\t},\n\t\t\talignToTop,\n\t\t\tancestorOffset,\n\t\t\tforceScroll\n\t\t} );\n\n\t\t// Obtain the rect of the target after it has been scrolled within its ancestors.\n\t\t// It's time to scroll the viewport.\n\t\tlet targetRect = getRectRelativeToWindow( target, currentWindow );\n\n\t\t// Detect situation where the target is higher than the first scrollable ancestor.\n\t\t// In such case scrolling the viewport to reveal the target might be malfunctioning because\n\t\t// the target `.top` position is lower than the ancestor's `.top` position. If it's large enough it can be negative.\n\t\t// It causes the `scrollWindowToShowRect` to scroll the viewport to the negative top position which is not possible\n\t\t// and leads to the viewport being scrolled to the absolute top of the document. To prevent this, the target's rect\n\t\t// must be shifted to the ancestor's top position. It should not affect the target's visibility because the ancestor\n\t\t// is already scrolled to reveal the target.\n\t\t// See more: https://github.com/ckeditor/ckeditor5/issues/17079\n\t\tconst ancestorWindowRelativeRect = getRectRelativeToWindow( firstAncestorToScroll, currentWindow );\n\n\t\tif ( targetRect.height > ancestorWindowRelativeRect.height ) {\n\t\t\tconst ancestorTargetIntersection = targetRect.getIntersection( ancestorWindowRelativeRect );\n\n\t\t\tif ( ancestorTargetIntersection ) {\n\t\t\t\ttargetRect = ancestorTargetIntersection;\n\t\t\t}\n\t\t}\n\n\t\tscrollWindowToShowRect( {\n\t\t\twindow: currentWindow,\n\t\t\trect: targetRect,\n\t\t\tviewportOffset,\n\t\t\talignToTop,\n\t\t\tforceScroll\n\t\t} );\n\n\t\tif ( currentWindow.parent != currentWindow ) {\n\t\t\t// Keep the reference to the <iframe> element the \"previous current window\" was\n\t\t\t// rendered within. It will be useful to re–calculate the rect of the target\n\t\t\t// in the parent window's relative geometry. The target's rect must be shifted\n\t\t\t// by it's iframe's position.\n\t\t\tcurrentFrame = currentWindow.frameElement as HTMLElement | null;\n\t\t\tcurrentWindow = currentWindow.parent;\n\n\t\t\t// If the current window has some parent but frameElement is inaccessible, then they have\n\t\t\t// different domains/ports and, due to security reasons, accessing and scrolling\n\t\t\t// the parent window won't be possible.\n\t\t\t// See https://github.com/ckeditor/ckeditor5/issues/930.\n\t\t\tif ( !currentFrame ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentWindow = null;\n\t\t}\n\t}\n}\n\n/**\n * Makes any page `HTMLElement` or `Range` (target) visible within its scrollable ancestors,\n * e.g. if they have `overflow: scroll` CSS style.\n *\n * @param target A target, which supposed to become visible to the user.\n * @param ancestorOffset An offset between the target and the boundary of scrollable ancestors\n * to be maintained while scrolling.\n * @param limiterElement The outermost ancestor that should be scrolled. If specified, it can prevent\n * scrolling the whole page.\n */\nexport function scrollAncestorsToShowTarget( target: HTMLElement | Range, ancestorOffset?: number, limiterElement?: HTMLElement ): void {\n\tconst targetParent = getParentElement( target );\n\n\tscrollAncestorsToShowRect( {\n\t\tparent: targetParent,\n\t\tgetRect: () => new Rect( target ),\n\t\tancestorOffset,\n\t\tlimiterElement\n\t} );\n}\n\n/**\n * Makes a given rect visible within its parent window.\n *\n * Note: Avoid the situation where the caret is still in the viewport, but totally\n * at the edge of it. In such situation, if it moved beyond the viewport in the next\n * action e.g. after paste, the scrolling would move it to the viewportOffset level\n * and it all would look like the caret visually moved up/down:\n *\n * 1.\n * ```\n * | foo[]\n * |                                    <--- N px of space below the caret\n * +---------------------------------...\n * ```\n *\n * 2. *paste*\n * 3.\n * ```\n * |\n * |\n * +-foo-----------------------------...\n *   bar[]                              <--- caret below viewport, scrolling...\n * ```\n *\n * 4. *scrolling*\n * 5.\n * ```\n * |\n * | foo\n * | bar[]                              <--- caret precisely at the edge\n * +---------------------------------...\n * ```\n *\n * To prevent this, this method checks the rects moved by the viewportOffset to cover\n * the upper/lower edge of the viewport. It makes sure if the action repeats, there's\n * no twitching – it's a purely visual improvement:\n *\n * 5. (after fix)\n * ```\n * |\n * | foo\n * | bar[]\n * |                                    <--- N px of space below the caret\n * +---------------------------------...\n * ```\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.window A window which is scrolled to reveal the rect.\n * @param options.rect A rect which is to be revealed.\n * @param options.viewportOffset An offset from the edge of the viewport (in pixels) the `rect` will be\n * moved by if the viewport is scrolled.\n * @param options.alignToTop When set `true`, the helper will make sure the `rect` is scrolled up\n * to the top boundary of the viewport if scrolled up. When not set (default), the `rect` will be\n * revealed by scrolling as little as possible. This option will not affect rects that must be scrolled\n * down because they will appear at the top of the boundary anyway.\n * @param options.forceScroll When set `true`, the `rect` will be aligned to the top of the viewport\n * whether it is already visible or not. This option will only work when `alignToTop` is `true`\n */\nfunction scrollWindowToShowRect<T extends boolean, U extends IfTrue<T>>(\n\t{\n\t\twindow,\n\t\trect,\n\t\talignToTop,\n\t\tforceScroll,\n\t\tviewportOffset\n\t}: {\n\t\treadonly window: Window;\n\t\treadonly rect: Rect;\n\t\treadonly viewportOffset: { top: number; bottom: number; left: number; right: number };\n\t\treadonly alignToTop?: T;\n\t\treadonly forceScroll?: U;\n\t}\n): void {\n\tconst targetShiftedDownRect = rect.clone().moveBy( 0, viewportOffset.bottom );\n\tconst targetShiftedUpRect = rect.clone().moveBy( 0, -viewportOffset.top );\n\tconst viewportRect = new Rect( window ).excludeScrollbarsAndBorders();\n\n\tconst rects = [ targetShiftedUpRect, targetShiftedDownRect ];\n\tconst forceScrollToTop = alignToTop && forceScroll;\n\tconst allRectsFitInViewport = rects.every( rect => viewportRect.contains( rect ) );\n\n\tlet { scrollX, scrollY } = window;\n\tconst initialScrollX = scrollX;\n\tconst initialScrollY = scrollY;\n\n\tif ( forceScrollToTop ) {\n\t\tscrollY -= ( viewportRect.top - rect.top ) + viewportOffset.top;\n\t} else if ( !allRectsFitInViewport ) {\n\t\tif ( isAbove( targetShiftedUpRect, viewportRect ) ) {\n\t\t\tscrollY -= viewportRect.top - rect.top + viewportOffset.top;\n\t\t} else if ( isBelow( targetShiftedDownRect, viewportRect ) ) {\n\t\t\tif ( alignToTop ) {\n\t\t\t\tscrollY += rect.top - viewportRect.top - viewportOffset.top;\n\t\t\t} else {\n\t\t\t\tscrollY += rect.bottom - viewportRect.bottom + viewportOffset.bottom;\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( !allRectsFitInViewport ) {\n\t\t// TODO: Web browsers scroll natively to place the target in the middle\n\t\t// of the viewport. It's not a very popular case, though.\n\t\tif ( isLeftOf( rect, viewportRect ) ) {\n\t\t\tscrollX -= viewportRect.left - rect.left + viewportOffset.left;\n\t\t} else if ( isRightOf( rect, viewportRect ) ) {\n\t\t\tscrollX += rect.right - viewportRect.right + viewportOffset.right;\n\t\t}\n\t}\n\n\tif ( scrollX != initialScrollX || scrollY !== initialScrollY ) {\n\t\twindow.scrollTo( scrollX, scrollY );\n\t}\n}\n\n/**\n * Recursively scrolls element ancestors to visually reveal a rect.\n *\n * @param options Additional configuration of the scrolling behavior.\n * @param options.parent The first parent ancestor to start scrolling.\n * @param options.getRect A function which returns the Rect, which is to be revealed.\n * @param options.ancestorOffset An offset from the boundary of scrollable ancestors (if any)\n * the `Rect` instance will be moved by if the viewport is scrolled.\n * @param options.alignToTop When set `true`, the helper will make sure the `Rect` instance is scrolled up\n * to the top boundary of the scrollable ancestors if scrolled up. When not set (default), the `rect`\n * will be revealed by scrolling as little as possible. This option will not affect rects that must be\n * scrolled down because they will appear at the top of the boundary\n * anyway.\n * @param options.forceScroll When set `true`, the `rect` will be aligned to the top of scrollable ancestors\n * whether it is already visible or not. This option will only work when `alignToTop` is `true`\n * @param options.limiterElement The outermost ancestor that should be scrolled. Defaults to the `<body>` element.\n */\nfunction scrollAncestorsToShowRect<T extends boolean, U extends IfTrue<T>>(\n\t{\n\t\tparent,\n\t\tgetRect,\n\t\talignToTop,\n\t\tforceScroll,\n\t\tancestorOffset = 0,\n\t\tlimiterElement\n\t}: {\n\t\treadonly parent: HTMLElement;\n\t\treadonly getRect: () => Rect;\n\t\treadonly alignToTop?: T;\n\t\treadonly forceScroll?: U;\n\t\treadonly ancestorOffset?: number;\n\t\treadonly limiterElement?: HTMLElement;\n\t}\n): void {\n\tconst parentWindow = getWindow( parent );\n\tconst forceScrollToTop = alignToTop && forceScroll;\n\tlet parentRect: Rect, targetRect: Rect, targetFitsInTarget: boolean;\n\n\tconst limiter = limiterElement || parentWindow.document.body;\n\n\twhile ( parent != limiter ) {\n\t\ttargetRect = getRect();\n\t\tparentRect = new Rect( parent ).excludeScrollbarsAndBorders();\n\t\ttargetFitsInTarget = parentRect.contains( targetRect );\n\n\t\tif ( forceScrollToTop ) {\n\t\t\tparent.scrollTop -= ( parentRect.top - targetRect.top ) + ancestorOffset;\n\t\t} else if ( !targetFitsInTarget ) {\n\t\t\tif ( isAbove( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollTop -= parentRect.top - targetRect.top + ancestorOffset;\n\t\t\t} else if ( isBelow( targetRect, parentRect ) ) {\n\t\t\t\tif ( alignToTop ) {\n\t\t\t\t\tparent.scrollTop += targetRect.top - parentRect.top - ancestorOffset;\n\t\t\t\t} else {\n\t\t\t\t\tparent.scrollTop += targetRect.bottom - parentRect.bottom + ancestorOffset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( !targetFitsInTarget ) {\n\t\t\tif ( isLeftOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft -= parentRect.left - targetRect.left + ancestorOffset;\n\t\t\t} else if ( isRightOf( targetRect, parentRect ) ) {\n\t\t\t\tparent.scrollLeft += targetRect.right - parentRect.right + ancestorOffset;\n\t\t\t}\n\t\t}\n\n\t\tparent = parent.parentNode as HTMLElement;\n\t}\n}\n\n/**\n * Determines if a given `Rect` extends beyond the bottom edge of the second `Rect`.\n */\nfunction isBelow( firstRect: Rect, secondRect: Rect ): boolean {\n\treturn firstRect.bottom > secondRect.bottom;\n}\n\n/**\n * Determines if a given `Rect` extends beyond the top edge of the second `Rect`.\n */\nfunction isAbove( firstRect: Rect, secondRect: Rect ): boolean {\n\treturn firstRect.top < secondRect.top;\n}\n\n/**\n * Determines if a given `Rect` extends beyond the left edge of the second `Rect`.\n */\nfunction isLeftOf( firstRect: Rect, secondRect: Rect ): boolean {\n\treturn firstRect.left < secondRect.left;\n}\n\n/**\n * Determines if a given `Rect` extends beyond the right edge of the second `Rect`.\n */\nfunction isRightOf( firstRect: Rect, secondRect: Rect ): boolean {\n\treturn firstRect.right > secondRect.right;\n}\n\n/**\n * Returns the closest window of an element or range.\n */\nfunction getWindow( elementOrRange: HTMLElement | Range ): Window {\n\tif ( isRange( elementOrRange ) ) {\n\t\treturn elementOrRange.startContainer.ownerDocument!.defaultView!;\n\t} else {\n\t\treturn elementOrRange.ownerDocument.defaultView!;\n\t}\n}\n\n/**\n * Returns the closest parent of an element or DOM range.\n */\nfunction getParentElement( elementOrRange: HTMLElement | Range ): HTMLElement {\n\tif ( isRange( elementOrRange ) ) {\n\t\tlet parent = elementOrRange.commonAncestorContainer as HTMLElement;\n\n\t\t// If a Range is attached to the Text, use the closest element ancestor.\n\t\tif ( isText( parent ) ) {\n\t\t\tparent = parent.parentNode as HTMLElement;\n\t\t}\n\n\t\treturn parent;\n\t} else {\n\t\treturn elementOrRange.parentNode as HTMLElement;\n\t}\n}\n\n/**\n * Returns the rect of an element or range residing in an iframe.\n * The result rect is relative to the geometry of the passed window instance.\n *\n * @param target Element or range which rect should be returned.\n * @param relativeWindow A window the rect should be relative to.\n */\nfunction getRectRelativeToWindow( target: HTMLElement | Range, relativeWindow: Window ): Rect {\n\tconst targetWindow = getWindow( target );\n\tconst rect = new Rect( target );\n\n\tif ( targetWindow === relativeWindow ) {\n\t\treturn rect;\n\t} else {\n\t\tlet currentWindow = targetWindow;\n\n\t\twhile ( currentWindow != relativeWindow ) {\n\t\t\tconst frame = currentWindow.frameElement as HTMLElement;\n\t\t\tconst frameRect = new Rect( frame ).excludeScrollbarsAndBorders();\n\n\t\t\trect.moveBy( frameRect.left, frameRect.top );\n\n\t\t\tcurrentWindow = currentWindow.parent;\n\t\t}\n\t}\n\n\treturn rect;\n}\n\n/**\n * A helper that explodes the `viewportOffset` configuration if defined as a plain number into an object\n * with `top`, `bottom`, `left`, and `right` properties.\n *\n * If an object value is passed, this helper will pass it through.\n *\n * @param viewportOffset Viewport offset to be normalized.\n */\nfunction normalizeViewportOffset( viewportOffset: number | { top: number; bottom: number; left: number; right: number } ) {\n\tif ( typeof viewportOffset === 'number' ) {\n\t\treturn {\n\t\t\ttop: viewportOffset,\n\t\t\tbottom: viewportOffset,\n\t\t\tleft: viewportOffset,\n\t\t\tright: viewportOffset\n\t\t};\n\t}\n\n\treturn viewportOffset;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * A set of utilities related to keyboard support.\n *\n * @module utils/keyboard\n */\n\nimport type { LanguageDirection } from './language.js';\nimport { CKEditorError } from './ckeditorerror.js';\nimport { env } from './env.js';\n\nconst modifiersToGlyphsMac = {\n\tctrl: '⌃',\n\tcmd: '⌘',\n\talt: '⌥',\n\tshift: '⇧'\n} as const;\n\nconst modifiersToGlyphsNonMac = {\n\tctrl: 'Ctrl+',\n\talt: 'Alt+',\n\tshift: 'Shift+'\n} as const;\n\nconst keyCodesToGlyphs: { [key: number]: string } = {\n\t37: '←',\n\t38: '↑',\n\t39: '→',\n\t40: '↓',\n\t9: '⇥',\n\t33: 'Page Up',\n\t34: 'Page Down'\n} as const;\n\n/**\n * An object with `keyName => keyCode` pairs for a set of known keys.\n *\n * Contains:\n *\n * * `a-z`,\n * * `0-9`,\n * * `f1-f12`,\n * * `` ` ``, `-`, `=`, `[`, `]`, `;`, `'`, `,`, `.`, `/`, `\\`,\n * * `arrow(left|up|right|bottom)`,\n * * `backspace`, `delete`, `end`, `enter`, `esc`, `home`, `tab`,\n * * `ctrl`, `cmd`, `shift`, `alt`.\n */\nexport const keyCodes = /* #__PURE__ */ generateKnownKeyCodes();\n\nconst keyCodeNames: { readonly [ keyCode: number ]: string } = /* #__PURE__ */ Object.fromEntries(\n\t/* #__PURE__ */ Object.entries( keyCodes ).map( ( [ name, code ] ) => {\n\t\tlet prettyKeyName;\n\n\t\tif ( code in keyCodesToGlyphs ) {\n\t\t\tprettyKeyName = keyCodesToGlyphs[ code ];\n\t\t} else {\n\t\t\tprettyKeyName = name.charAt( 0 ).toUpperCase() + name.slice( 1 );\n\t\t}\n\n\t\treturn [ code, prettyKeyName ];\n\t} )\n);\n\n/**\n * Converts a key name or {@link module:utils/keyboard~KeystrokeInfo keystroke info} into a key code.\n *\n * Note: Key names are matched with {@link module:utils/keyboard#keyCodes} in a case-insensitive way.\n *\n * @param key A key name (see {@link module:utils/keyboard#keyCodes}) or a keystroke data object.\n * @returns Key or keystroke code.\n */\nexport function getCode( key: string | Readonly<KeystrokeInfo> ): number {\n\tlet keyCode: number | undefined;\n\n\tif ( typeof key == 'string' ) {\n\t\tkeyCode = keyCodes[ key.toLowerCase() ];\n\n\t\tif ( !keyCode ) {\n\t\t\t/**\n\t\t\t * Unknown key name. Only key names included in the {@link module:utils/keyboard#keyCodes} can be used.\n\t\t\t *\n\t\t\t * @error keyboard-unknown-key\n\t\t\t * @param {string} key Ths specified key name.\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'keyboard-unknown-key', null, { key } );\n\t\t}\n\t} else {\n\t\tkeyCode = key.keyCode +\n\t\t\t( key.altKey ? keyCodes.alt : 0 ) +\n\t\t\t( key.ctrlKey ? keyCodes.ctrl : 0 ) +\n\t\t\t( key.shiftKey ? keyCodes.shift : 0 ) +\n\t\t\t( key.metaKey ? keyCodes.cmd : 0 );\n\t}\n\n\treturn keyCode;\n}\n\n/**\n * Parses the keystroke and returns a keystroke code that will match the code returned by\n * {@link module:utils/keyboard~getCode} for the corresponding {@link module:utils/keyboard~KeystrokeInfo keystroke info}.\n *\n * The keystroke can be passed in two formats:\n *\n * * as a single string – e.g. `ctrl + A`,\n * * as an array of {@link module:utils/keyboard~keyCodes known key names} and key codes – e.g.:\n *   * `[ 'ctrl', 32 ]` (ctrl + space),\n *   * `[ 'ctrl', 'a' ]` (ctrl + A).\n *\n * Note: Key names are matched with {@link module:utils/keyboard#keyCodes} in a case-insensitive way.\n *\n * Note: Only keystrokes with a single non-modifier key are supported (e.g. `ctrl+A` is OK, but `ctrl+A+B` is not).\n *\n * Note: On macOS, keystroke handling is translating the `Ctrl` key to the `Cmd` key and handling only that keystroke.\n * For example, a registered keystroke `Ctrl+A` will be translated to `Cmd+A` on macOS. To disable the translation of some keystroke,\n * use the forced modifier: `Ctrl!+A` (note the exclamation mark).\n *\n * @param keystroke The keystroke definition.\n * @returns Keystroke code.\n */\nexport function parseKeystroke( keystroke: string | ReadonlyArray<number | string> ): number {\n\tif ( typeof keystroke == 'string' ) {\n\t\tkeystroke = splitKeystrokeText( keystroke );\n\t}\n\n\treturn keystroke\n\t\t.map( key => ( typeof key == 'string' ) ? getEnvKeyCode( key ) : key )\n\t\t.reduce( ( key, sum ) => sum + key, 0 );\n}\n\n/**\n * Translates any keystroke string text like `\"Ctrl+A\"` to an\n * environment–specific keystroke, i.e. `\"⌘A\"` on macOS.\n *\n * @param keystroke The keystroke text.\n * @param [forcedEnv] The environment to force the key translation to. If not provided, the current environment is used.\n * @returns The keystroke text specific for the environment.\n */\nexport function getEnvKeystrokeText( keystroke: string, forcedEnv?: 'PC' | 'Mac' ): string {\n\tlet keystrokeCode = parseKeystroke( keystroke );\n\n\tconst isMac = forcedEnv ? forcedEnv === 'Mac' : env.isMac || env.isiOS;\n\n\tconst modifiersToGlyphs = Object.entries( isMac ? modifiersToGlyphsMac : modifiersToGlyphsNonMac );\n\n\tconst modifiers = modifiersToGlyphs.reduce( ( modifiers, [ name, glyph ] ) => {\n\t\t// Modifier keys are stored as a bit mask so extract those from the keystroke code.\n\t\tif ( ( keystrokeCode & keyCodes[ name ] ) != 0 ) {\n\t\t\tkeystrokeCode &= ~keyCodes[ name ];\n\t\t\tmodifiers += glyph;\n\t\t}\n\n\t\treturn modifiers;\n\t}, '' );\n\n\treturn modifiers + ( keystrokeCode ? keyCodeNames[ keystrokeCode ] : '' );\n}\n\n/**\n * Returns `true` if the provided key code represents one of the arrow keys.\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n */\nexport function isArrowKeyCode( keyCode: number ): boolean {\n\treturn keyCode == keyCodes.arrowright ||\n\t\tkeyCode == keyCodes.arrowleft ||\n\t\tkeyCode == keyCodes.arrowup ||\n\t\tkeyCode == keyCodes.arrowdown;\n}\n\n/**\n * String representing a direction of an arrow key kode.\n */\nexport type ArrowKeyCodeDirection = 'left' | 'up' | 'right' | 'down';\n\n/**\n * Returns the direction in which the {@link module:engine/model/documentselection~ModelDocumentSelection selection}\n * will move when the provided arrow key code is pressed considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) content languages, pressing the left arrow means moving the selection right (forward)\n * in the model structure. Similarly, pressing the right arrow moves the selection left (backward).\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n * @returns Localized arrow direction or `undefined` for non-arrow key codes.\n */\nexport function getLocalizedArrowKeyCodeDirection(\n\tkeyCode: number,\n\tcontentLanguageDirection: LanguageDirection\n): ArrowKeyCodeDirection | undefined {\n\tconst isLtrContent = contentLanguageDirection === 'ltr';\n\n\tswitch ( keyCode ) {\n\t\tcase keyCodes.arrowleft:\n\t\t\treturn isLtrContent ? 'left' : 'right';\n\n\t\tcase keyCodes.arrowright:\n\t\t\treturn isLtrContent ? 'right' : 'left';\n\n\t\tcase keyCodes.arrowup:\n\t\t\treturn 'up';\n\n\t\tcase keyCodes.arrowdown:\n\t\t\treturn 'down';\n\t}\n}\n\n/**\n * Converts a key name to the key code with mapping based on the env.\n *\n * See: {@link module:utils/keyboard~getCode}.\n *\n * @param key The key name (see {@link module:utils/keyboard#keyCodes}).\n * @returns Key code.\n */\nfunction getEnvKeyCode( key: string ): number {\n\t// Don't remap modifier key for forced modifiers.\n\tif ( key.endsWith( '!' ) ) {\n\t\treturn getCode( key.slice( 0, -1 ) );\n\t}\n\n\tconst code = getCode( key );\n\n\treturn ( env.isMac || env.isiOS ) && code == keyCodes.ctrl ? keyCodes.cmd : code;\n}\n\n/**\n * Determines if the provided key code moves the {@link module:engine/model/documentselection~ModelDocumentSelection selection}\n * forward or backward considering the language direction of the editor content.\n *\n * For instance, in right–to–left (RTL) languages, pressing the left arrow means moving forward\n * in the model structure. Similarly, pressing the right arrow moves the selection backward.\n *\n * @param keyCode A key code as in {@link module:utils/keyboard~KeystrokeInfo#keyCode}.\n * @param contentLanguageDirection The content language direction, corresponding to\n * {@link module:utils/locale~Locale#contentLanguageDirection}.\n */\nexport function isForwardArrowKeyCode(\n\tkeyCode: number,\n\tcontentLanguageDirection: LanguageDirection\n): boolean {\n\tconst localizedKeyCodeDirection = getLocalizedArrowKeyCodeDirection( keyCode, contentLanguageDirection );\n\n\treturn localizedKeyCodeDirection === 'down' || localizedKeyCodeDirection === 'right';\n}\n\nfunction generateKnownKeyCodes(): { readonly [ keyCode: string ]: number } {\n\tconst keyCodes: { [keyCode: string]: number } = {\n\t\tpageup: 33,\n\t\tpagedown: 34,\n\t\tend: 35,\n\t\thome: 36,\n\t\tarrowleft: 37,\n\t\tarrowup: 38,\n\t\tarrowright: 39,\n\t\tarrowdown: 40,\n\t\tbackspace: 8,\n\t\tdelete: 46,\n\t\tenter: 13,\n\t\tspace: 32,\n\t\tesc: 27,\n\t\ttab: 9,\n\n\t\t// The idea about these numbers is that they do not collide with any real key codes, so we can use them\n\t\t// like bit masks.\n\t\tctrl: 0x110000,\n\t\tshift: 0x220000,\n\t\talt: 0x440000,\n\t\tcmd: 0x880000\n\t};\n\n\t// a-z\n\tfor ( let code = 65; code <= 90; code++ ) {\n\t\tconst letter = String.fromCharCode( code );\n\n\t\tkeyCodes[ letter.toLowerCase() ] = code;\n\t}\n\n\t// 0-9\n\tfor ( let code = 48; code <= 57; code++ ) {\n\t\tkeyCodes[ code - 48 ] = code;\n\t}\n\n\t// F1-F12\n\tfor ( let code = 112; code <= 123; code++ ) {\n\t\tkeyCodes[ 'f' + ( code - 111 ) ] = code;\n\t}\n\n\t// other characters\n\tObject.assign( keyCodes, {\n\t\t'\\'': 222,\n\t\t',': 108,\n\t\t'-': 109,\n\t\t'.': 110,\n\t\t'/': 111,\n\t\t';': 186,\n\t\t'=': 187,\n\t\t'[': 219,\n\t\t'\\\\': 220,\n\t\t']': 221,\n\t\t'`': 223\n\t} );\n\n\treturn keyCodes;\n}\n\nfunction splitKeystrokeText( keystroke: string ): Array<string> {\n\treturn keystroke.split( '+' ).map( key => key.trim() );\n}\n\n/**\n * Information about the keystroke.\n */\nexport interface KeystrokeInfo {\n\n\t/**\n\t * The [key code](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode).\n\t */\n\tkeyCode: number;\n\n\t/**\n\t * Whether the <kbd>Alt</kbd> modifier was pressed.\n\t */\n\taltKey: boolean;\n\n\t/**\n\t * Whether the <kbd>Cmd</kbd> modifier was pressed.\n\t */\n\tmetaKey: boolean;\n\n\t/**\n\t * Whether the <kbd>Ctrl</kbd> modifier was pressed.\n\t */\n\tctrlKey: boolean;\n\n\t/**\n\t * Whether the <kbd>Shift</kbd> modifier was pressed.\n\t */\n\tshiftKey: boolean;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/language\n */\n\n/**\n * String representing a language direction.\n */\nexport type LanguageDirection = 'ltr' | 'rtl';\n\nconst RTL_LANGUAGE_CODES = [\n\t'ar', 'ara', // Arabic\n\t'dv', 'div', // Dhivehi\n\t'fa', 'per', 'fas', // Persian\n\t'he', 'heb', // Hebrew\n\t'ku', 'kur', // Kurdish\n\t'ug', 'uig', // Uighur, Uyghur\n\t'ur', 'urd' // Urdu\n];\n\n/**\n * Helps determine whether a language text direction is LTR or RTL.\n *\n * @param languageCode The ISO 639-1 or ISO 639-2 language code.\n */\nexport function getLanguageDirection( languageCode: string ): LanguageDirection {\n\treturn RTL_LANGUAGE_CODES.includes( languageCode ) ? 'rtl' : 'ltr';\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/toarray\n */\n\n/**\n * Transforms any value to an array. If the provided value is already an array, it is returned unchanged.\n *\n * @label MUTABLE\n * @param data The value to transform to an array.\n * @returns An array created from data.\n */\nexport function toArray<T>( data: ArrayOrItem<T> ): Array<T>;\n\n/**\n * Transforms any value to an array. If the provided value is already an array, it is returned unchanged.\n *\n * @label IMMUTABLE\n * @param data The value to transform to an array.\n * @returns An array created from data.\n */\nexport function toArray<T>( data: ReadonlyArrayOrItem<T> ): ReadonlyArray<T>;\n\nexport function toArray<T>( data: ArrayOrItem<T> ): Array<T> {\n\treturn Array.isArray( data ) ? data : [ data ];\n}\n\nexport type ArrayOrItem<T> = T | Array<T>;\nexport type ReadonlyArrayOrItem<T> = T | ReadonlyArray<T>;\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/translation-service\n */\n\nimport type { Translations } from './locale.js';\nimport { CKEditorError } from './ckeditorerror.js';\nimport { global } from './dom/global.js';\nimport { merge } from 'es-toolkit/compat';\nimport { type ArrayOrItem } from './toarray.js';\n\ndeclare global {\n\tvar CKEDITOR_TRANSLATIONS: Translations;\n}\n\n/* istanbul ignore else -- @preserve */\nif ( !global.window.CKEDITOR_TRANSLATIONS ) {\n\tglobal.window.CKEDITOR_TRANSLATIONS = {};\n}\n\n/**\n * Adds translations to existing ones or overrides the existing translations. These translations will later\n * be available for the {@link module:utils/locale~Locale#t `t()`} function.\n *\n * The `translations` is an object which consists of `messageId: translation` pairs. Note that the message ID can be\n * either constructed from the message string or from the message ID if it was passed\n * (this happens rarely and mostly for short messages or messages with placeholders).\n * Since the editor displays only the message string, the message ID can be found either in the source code or in the\n * built translations for another language.\n *\n * ```ts\n * add( 'pl', {\n * \t'Cancel': 'Anuluj',\n * \t'IMAGE': 'obraz', // Note that the `IMAGE` comes from the message ID, while the string can be `image`.\n * } );\n * ```\n *\n * If the message is supposed to support various plural forms, make sure to provide an array with the singular form and all plural forms:\n *\n * ```ts\n * add( 'pl', {\n * \t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * } );\n * ```\n *\n * You should also specify the third argument (the `getPluralForm()` function) that will be used to determine the plural form if no\n * language file was loaded for that language. All language files coming from CKEditor 5 sources will have this option set, so\n * these plural form rules will be reused by other translations added to the registered languages. The `getPluralForm()` function\n * can return either a Boolean or a number.\n *\n * ```ts\n * add( 'en', {\n * \t// ... Translations.\n * }, n => n !== 1 );\n * add( 'pl', {\n * \t// ... Translations.\n * }, n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n * ```\n *\n * All translations extend the global `window.CKEDITOR_TRANSLATIONS` object. An example of this object can be found below:\n *\n * ```ts\n * {\n * \tpl: {\n * \t\tdictionary: {\n * \t\t\t'Cancel': 'Anuluj',\n * \t\t\t'Add space': [ 'Dodaj spację', 'Dodaj %0 spacje', 'Dodaj %0 spacji' ]\n * \t\t},\n * \t\t// A function that returns the plural form index.\n * \t\tgetPluralForm: n => n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && ( n % 100 < 10 || n % 100 >= 20 ) ? 1 : 2 );\n * \t}\n * \t// Other languages.\n * \t}\n * ```\n *\n * If you cannot import { this function } from this module (e.g. because you use a CKEditor 5 build), you can\n * still add translations by extending the global `window.CKEDITOR_TRANSLATIONS` object by using a function like\n * the one below:\n *\n * ```ts\n * function addTranslations( language, translations, getPluralForm ) {\n * \tif ( !global.window.CKEDITOR_TRANSLATIONS ) {\n * \t\tglobal.window.CKEDITOR_TRANSLATIONS = {};\n * \t}\n\n * \tif ( !global.window.CKEDITOR_TRANSLATIONS[ language ] ) {\n * \t\tglobal.window.CKEDITOR_TRANSLATIONS[ language ] = {};\n * \t}\n *\n * \tconst languageTranslations = global.window.CKEDITOR_TRANSLATIONS[ language ];\n *\n * \tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n * \tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n *\n * \t// Extend the dictionary for the given language.\n * \tObject.assign( languageTranslations.dictionary, translations );\n * }\n * ```\n *\n * @param language Target language.\n * @param translations An object with translations which will be added to the dictionary.\n * For each message ID the value should be either a translation or an array of translations if the message\n * should support plural forms.\n * @param getPluralForm A function that returns the plural form index (a number).\n */\nexport function add(\n\tlanguage: string,\n\ttranslations: { readonly [ messageId: string ]: string | ReadonlyArray<string> },\n\tgetPluralForm?: ( n: number ) => number\n): void {\n\tif ( !global.window.CKEDITOR_TRANSLATIONS[ language ] ) {\n\t\tglobal.window.CKEDITOR_TRANSLATIONS[ language ] = {} as any;\n\t}\n\n\tconst languageTranslations = global.window.CKEDITOR_TRANSLATIONS[ language ];\n\n\tlanguageTranslations.dictionary = languageTranslations.dictionary || {};\n\tlanguageTranslations.getPluralForm = getPluralForm || languageTranslations.getPluralForm;\n\n\tObject.assign( languageTranslations.dictionary, translations );\n}\n\n/**\n * **Note:** This method is internal, use {@link module:utils/locale~Locale#t the `t()` function} instead to translate\n * the editor UI parts.\n *\n * This function is responsible for translating messages to the specified language. It uses translations added perviously\n * by {@link module:utils/translation-service~add} (a translations dictionary and the `getPluralForm()` function\n * to provide accurate translations of plural forms).\n *\n * When no translation is defined in the dictionary or the dictionary does not exist, this function returns\n * the original message string or the message plural depending on the number of elements.\n *\n * ```ts\n * translate( 'pl', { string: 'Cancel' } ); // 'Cancel'\n * ```\n *\n * The third optional argument is the number of elements, based on which the single form or one of the plural forms\n * should be picked when the message is supposed to support various plural forms.\n *\n * ```ts\n * translate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space'\n * translate( 'en', { string: 'Add a space', plural: 'Add %0 spaces' }, 3 ); // 'Add %0 spaces'\n * ```\n *\n * The message should provide an ID using the `id` property when the message strings are not unique and their\n * translations should be different.\n *\n * ```ts\n * translate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n * translate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n * ```\n *\n * @internal\n * @param language Target language.\n * @param message A message that will be translated.\n * @param quantity The number of elements for which a plural form should be picked from the target language dictionary.\n * @param translations Translations passed in editor config, if not provided use the global `window.CKEDITOR_TRANSLATIONS`.\n * @returns Translated sentence.\n */\nexport function _translate(\n\tlanguage: string,\n\tmessage: Message,\n\tquantity: number = 1,\n\ttranslations?: Translations\n): string {\n\tif ( typeof quantity !== 'number' ) {\n\t\t/**\n\t\t * An incorrect value was passed to the translation function. This was probably caused\n\t\t * by an incorrect message interpolation of a plural form. Note that for messages supporting plural forms\n\t\t * the second argument of the `t()` function should always be a number or an array with a number as the first element.\n\t\t *\n\t\t * @error translation-service-quantity-not-a-number\n\t\t */\n\t\tthrow new CKEditorError( 'translation-service-quantity-not-a-number', null, { quantity } );\n\t}\n\n\tconst normalizedTranslations: Translations = translations || global.window.CKEDITOR_TRANSLATIONS;\n\tconst numberOfLanguages = getNumberOfLanguages( normalizedTranslations );\n\n\tif ( numberOfLanguages === 1 ) {\n\t\t// Override the language to the only supported one.\n\t\t// This can't be done in the `Locale` class, because the translations comes after the `Locale` class initialization.\n\t\tlanguage = Object.keys( normalizedTranslations )[ 0 ];\n\t}\n\n\tconst messageId = message.id || message.string;\n\n\tif ( numberOfLanguages === 0 || !hasTranslation( language, messageId, normalizedTranslations ) ) {\n\t\tif ( quantity !== 1 ) {\n\t\t\t// Return the default plural form that was passed in the `message.plural` parameter.\n\t\t\treturn message.plural!;\n\t\t}\n\n\t\treturn message.string;\n\t}\n\n\tconst dictionary = normalizedTranslations[ language ].dictionary;\n\tconst getPluralForm = normalizedTranslations[ language ].getPluralForm || ( n => n === 1 ? 0 : 1 );\n\tconst translation = dictionary[ messageId ];\n\n\tif ( typeof translation === 'string' ) {\n\t\treturn translation;\n\t}\n\n\tconst pluralFormIndex = Number( getPluralForm( quantity ) );\n\n\t// Note: The `translate` function is not responsible for replacing `%0, %1, ...` with values.\n\treturn translation[ pluralFormIndex ];\n}\n\n/**\n * Clears dictionaries for test purposes.\n *\n * @internal\n */\nexport function _clear(): void {\n\tif ( global.window.CKEDITOR_TRANSLATIONS ) {\n\t\tglobal.window.CKEDITOR_TRANSLATIONS = {};\n\t}\n}\n\n/**\n * If array then merge objects which are inside otherwise return given object.\n *\n * @internal\n * @param translations Translations passed in editor config.\n */\nexport function _unifyTranslations(\n\ttranslations?: ArrayOrItem<Translations>\n): Translations | undefined {\n\treturn Array.isArray( translations ) ?\n\t\ttranslations.reduce( ( acc, translation ) => merge( acc, translation ) ) :\n\t\ttranslations;\n}\n\n/**\n * Checks whether the dictionary exists and translation in that dictionary exists.\n */\nfunction hasTranslation( language: string, messageId: string, translations: Translations ): boolean {\n\treturn !!translations[ language ] && !!translations[ language ].dictionary[ messageId ];\n}\n\nfunction getNumberOfLanguages( translations: Translations ): number {\n\treturn Object.keys( translations ).length;\n}\n\n/**\n * The internationalization message interface. A message that implements this interface can be passed to the `t()` function\n * to be translated to the target UI language.\n */\nexport interface Message {\n\n\t/**\n\t * The message string to translate. Acts as a default translation if the translation for a given language\n\t * is not defined. When the message is supposed to support plural forms, the string should be the English singular form of the message.\n\t */\n\treadonly string: string;\n\n\t/**\n\t * The message ID. If passed, the message ID is taken from this property instead of the `message.string`.\n\t * This property is useful when various messages share the same message string, for example, the `editor` string in `in the editor`\n\t * and `my editor` sentences.\n\t */\n\treadonly id?: string;\n\n\t/**\n\t * The plural form of the message. This property should be skipped when a message is not supposed\n\t * to support plural forms. Otherwise it should always be set to a string with the English plural form of the message.\n\t */\n\treadonly plural?: string;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/locale\n */\n\nimport { toArray, type ArrayOrItem } from './toarray.js';\nimport { _translate, _unifyTranslations, type Message } from './translation-service.js';\nimport { getLanguageDirection, type LanguageDirection } from './language.js';\n\n/**\n * Represents the localization services.\n */\nexport class Locale {\n\t/**\n\t * The editor UI language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * If the {@link #contentLanguage content language} was not specified in the `Locale` constructor,\n\t * it also defines the language of the content.\n\t */\n\tpublic readonly uiLanguage: string;\n\n\t/**\n\t * Text direction of the {@link #uiLanguage editor UI language}. Either `'ltr'` or `'rtl'`.\n\t */\n\tpublic readonly uiLanguageDirection: LanguageDirection;\n\n\t/**\n\t * The editor content language code in the [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format.\n\t *\n\t * Usually the same as the {@link #uiLanguage editor language}, it can be customized by passing an optional\n\t * argument to the `Locale` constructor.\n\t */\n\tpublic readonly contentLanguage: string;\n\n\t/**\n\t * Text direction of the {@link #contentLanguage editor content language}.\n\t *\n\t * If the content language was passed directly to the `Locale` constructor, this property represents the\n\t * direction of that language.\n\t *\n\t * If the {@link #contentLanguage editor content language} was derived from the {@link #uiLanguage editor language},\n\t * the content language direction is the same as the {@link #uiLanguageDirection UI language direction}.\n\t *\n\t * The value is either `'ltr'` or `'rtl'`.\n\t */\n\tpublic readonly contentLanguageDirection: LanguageDirection;\n\n\t/**\n\t * Translates the given message to the {@link #uiLanguage}. This method is also available in\n\t * {@link module:core/editor/editor~Editor#t `Editor`} and {@link module:ui/view~View#t `View`}.\n\t *\n\t * This method's context is statically bound to the `Locale` instance and **should always be called as a function**:\n\t *\n\t * ```ts\n\t * const t = locale.t;\n\t * t( 'Label' );\n\t * ```\n\t *\n\t * The message can be either a string or an object implementing the {@link module:utils/translation-service~Message} interface.\n\t *\n\t * The message may contain placeholders (`%<index>`) for value(s) that are passed as a `values` parameter.\n\t * For an array of values, the `%<index>` will be changed to an element of that array at the given index.\n\t * For a single value passed as the second argument, only the `%0` placeholders will be changed to the provided value.\n\t *\n\t * ```ts\n\t * t( 'Created file \"%0\" in %1ms.', [ fileName, timeTaken ] );\n\t * t( 'Created file \"%0\", fileName );\n\t * ```\n\t *\n\t * The message supports plural forms. To specify the plural form, use the `plural` property. Singular or plural form\n\t * will be chosen depending on the first value from the passed `values`. The value of the `plural` property is used\n\t * as a default plural translation when the translation for the target language is missing.\n\t *\n\t * ```ts\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Add a space' for the English language.\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Add 5 spaces' for the English language.\n\t * t( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Add 2 spaces' for the English language.\n\t *\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 1 ); // 'Dodaj spację' for the Polish language.\n\t * t( { string: 'Add a space', plural: 'Add %0 spaces' }, 5 ); // 'Dodaj 5 spacji' for the Polish language.\n\t * t( { string: '%1 a space', plural: '%1 %0 spaces' }, [ 2, 'Add' ] ); // 'Dodaj 2 spacje' for the Polish language.\n\t * ```\n\t *\n\t *  * The message should provide an ID using the `id` property when the message strings are not unique and their\n\t * translations should be different.\n\t *\n\t * ```ts\n\t * translate( 'en', { string: 'image', id: 'ADD_IMAGE' } );\n\t * translate( 'en', { string: 'image', id: 'AN_IMAGE' } );\n\t * ```\n\t */\n\tpublic readonly t: LocaleTranslate;\n\n\t/**\n\t * Object that contains translations.\n\t */\n\tpublic translations?: Translations;\n\n\t/**\n\t * Creates a new instance of the locale class. Learn more about\n\t * {@glink getting-started/setup/ui-language configuring the language of the editor}.\n\t *\n\t * @param options Locale configuration.\n\t * @param options.uiLanguage The editor UI language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. See {@link #uiLanguage}.\n\t * @param options.contentLanguage The editor content language code in the\n\t * [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) format. If not specified, the same as `options.language`.\n\t * See {@link #contentLanguage}.\n\t * @param options.translations Translations passed as a editor config parameter.\n\t */\n\tconstructor(\n\t\t{\n\t\t\tuiLanguage = 'en',\n\t\t\tcontentLanguage,\n\t\t\ttranslations\n\t\t}: {\n\t\t\treadonly uiLanguage?: string;\n\t\t\treadonly contentLanguage?: string;\n\t\t\treadonly translations?: ArrayOrItem<Translations>;\n\t\t} = {}\n\t) {\n\t\tthis.uiLanguage = uiLanguage;\n\t\tthis.contentLanguage = contentLanguage || this.uiLanguage;\n\t\tthis.uiLanguageDirection = getLanguageDirection( this.uiLanguage );\n\t\tthis.contentLanguageDirection = getLanguageDirection( this.contentLanguage );\n\t\tthis.translations = _unifyTranslations( translations );\n\t\tthis.t = ( message, values ) => this._t( message, values );\n\t}\n\n\t/**\n\t * An unbound version of the {@link #t} method.\n\t */\n\tprivate _t( message: string | Message, values: number | string | ReadonlyArray<number | string> = [] ): string {\n\t\tvalues = toArray( values );\n\n\t\tif ( typeof message === 'string' ) {\n\t\t\tmessage = { string: message };\n\t\t}\n\n\t\tconst hasPluralForm = !!message.plural;\n\t\tconst quantity = hasPluralForm ? values[ 0 ] as number : 1;\n\n\t\tconst translatedString = _translate( this.uiLanguage, message, quantity, this.translations );\n\n\t\treturn interpolateString( translatedString, values );\n\t}\n}\n\n/**\n * @param message A message that will be localized (translated).\n * @param values A value or an array of values that will fill message placeholders.\n * For messages supporting plural forms the first value will determine the plural form.\n */\nexport type LocaleTranslate = (\n\tmessage: string | Message,\n\tvalues?: number | string | ReadonlyArray<number | string>\n) => string;\n\n/**\n * Fills the `%0, %1, ...` string placeholders with values.\n */\nfunction interpolateString( string: string, values: ReadonlyArray<any> ): string {\n\treturn string.replace( /%(\\d+)/g, ( match, index ) => {\n\t\treturn ( index < values.length ) ? values[ index ] : match;\n\t} );\n}\n\n/**\n * Translations object definition.\n */\nexport type Translations = {\n\t[ language: string ]: {\n\t\tdictionary: { [ messageId: string ]: string | ReadonlyArray<string> };\n\t\tgetPluralForm?: ( ( n: number ) => number | boolean ) | null;\n\t};\n};\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/collection\n */\n\nimport { EmitterMixin } from './emittermixin.js';\nimport { CKEditorError } from './ckeditorerror.js';\nimport { uid } from './uid.js';\nimport { isIterable } from './isiterable.js';\n\n/**\n * Collections are ordered sets of objects. Items in the collection can be retrieved by their indexes\n * in the collection (like in an array) or by their ids.\n *\n * If an object without an `id` property is being added to the collection, the `id` property will be generated\n * automatically. Note that the automatically generated id is unique only within this single collection instance.\n *\n * By default an item in the collection is identified by its `id` property. The name of the identifier can be\n * configured through the constructor of the collection.\n *\n * @typeParam T The type of the collection element.\n */\nexport class Collection<T extends Record<string, any>> extends /* #__PURE__ */ EmitterMixin() implements Iterable<T> {\n\t/**\n\t * The internal list of items in the collection.\n\t */\n\tprivate readonly _items: Array<T>;\n\n\t/**\n\t * The internal map of items in the collection.\n\t */\n\tprivate readonly _itemMap: Map<string, T>;\n\n\t/**\n\t * The name of the property which is considered to identify an item.\n\t */\n\tprivate readonly _idProperty: string;\n\n\t/**\n\t * A collection instance this collection is bound to as a result\n\t * of calling {@link #bindTo} method.\n\t */\n\tprivate _bindToCollection?: Collection<any> | null;\n\n\t/**\n\t * A helper mapping external items of a bound collection ({@link #bindTo})\n\t * and actual items of this collection. It provides information\n\t * necessary to properly remove items bound to another collection.\n\t *\n\t * See {@link #_bindToInternalToExternalMap}.\n\t */\n\tprivate readonly _bindToExternalToInternalMap: WeakMap<any, T>;\n\n\t/**\n\t * A helper mapping items of this collection to external items of a bound collection\n\t * ({@link #bindTo}). It provides information necessary to manage the bindings, e.g.\n\t * to avoid loops in two–way bindings.\n\t *\n\t * See {@link #_bindToExternalToInternalMap}.\n\t */\n\tprivate readonly _bindToInternalToExternalMap: WeakMap<T, any>;\n\n\t/**\n\t * Stores indexes of skipped items from bound external collection.\n\t */\n\tprivate _skippedIndexesFromExternal: Array<number>;\n\n\t/**\n\t * Creates a new Collection instance.\n\t *\n\t * You can pass a configuration object as the argument of the constructor:\n\t *\n\t * ```ts\n\t * const emptyCollection = new Collection<{ name: string }>( { idProperty: 'name' } );\n\t * emptyCollection.add( { name: 'John' } );\n\t * console.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t * ```\n\t *\n\t * The collection is empty by default. You can add new items using the {@link #add} method:\n\t *\n\t * ```ts\n\t * const collection = new Collection<{ id: string }>();\n\t *\n\t * collection.add( { id: 'John' } );\n\t * console.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t * ```\n\t *\n\t * @label NO_ITEMS\n\t * @param options The options object.\n\t * @param options.idProperty The name of the property which is used to identify an item.\n\t * Items that do not have such a property will be assigned one when added to the collection.\n\t */\n\tconstructor( options?: { readonly idProperty?: string } );\n\n\t/**\n\t * Creates a new Collection instance with specified initial items.\n\t *\n\t * ```ts\n\t * const collection = new Collection<{ id: string }>( [ { id: 'John' }, { id: 'Mike' } ] );\n\t *\n\t * console.log( collection.get( 0 ) ); // -> { id: 'John' }\n\t * console.log( collection.get( 1 ) ); // -> { id: 'Mike' }\n\t * console.log( collection.get( 'Mike' ) ); // -> { id: 'Mike' }\n\t * ```\n\t *\n\t * You can always pass a configuration object as the last argument of the constructor:\n\t *\n\t * ```ts\n\t * const nonEmptyCollection = new Collection<{ name: string }>( [ { name: 'John' } ], { idProperty: 'name' } );\n\t * nonEmptyCollection.add( { name: 'George' } );\n\t * console.log( collection.get( 'George' ) ); // -> { name: 'George' }\n\t * console.log( collection.get( 'John' ) ); // -> { name: 'John' }\n\t * ```\n\t *\n\t * @label INITIAL_ITEMS\n\t * @param initialItems The initial items of the collection.\n\t * @param options The options object.\n\t * @param options.idProperty The name of the property which is used to identify an item.\n\t * Items that do not have such a property will be assigned one when added to the collection.\n\t */\n\tconstructor( initialItems: Iterable<T>, options?: { readonly idProperty?: string } );\n\n\tconstructor(\n\t\tinitialItemsOrOptions: Iterable<T> | { readonly idProperty?: string } = {},\n\t\toptions: { readonly idProperty?: string } = {}\n\t) {\n\t\tsuper();\n\n\t\tconst hasInitialItems = isIterable( initialItemsOrOptions );\n\n\t\tif ( !hasInitialItems ) {\n\t\t\toptions = initialItemsOrOptions;\n\t\t}\n\n\t\tthis._items = [];\n\t\tthis._itemMap = new Map();\n\t\tthis._idProperty = options.idProperty || 'id';\n\t\tthis._bindToExternalToInternalMap = new WeakMap();\n\t\tthis._bindToInternalToExternalMap = new WeakMap();\n\t\tthis._skippedIndexesFromExternal = [];\n\n\t\t// Set the initial content of the collection (if provided in the constructor).\n\t\tif ( hasInitialItems ) {\n\t\t\tfor ( const item of initialItemsOrOptions ) {\n\t\t\t\tthis._items.push( item );\n\t\t\t\tthis._itemMap.set( this._getItemIdBeforeAdding( item ), item );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * The number of items available in the collection.\n\t */\n\tpublic get length(): number {\n\t\treturn this._items.length;\n\t}\n\n\t/**\n\t * Returns the first item from the collection or null when collection is empty.\n\t */\n\tpublic get first(): T | null {\n\t\treturn this._items[ 0 ] || null;\n\t}\n\n\t/**\n\t * Returns the last item from the collection or null when collection is empty.\n\t */\n\tpublic get last(): T | null {\n\t\treturn this._items[ this.length - 1 ] || null;\n\t}\n\n\t/**\n\t * Adds an item into the collection.\n\t *\n\t * If the item does not have an id, then it will be automatically generated and set on the item.\n\t *\n\t * @param item\n\t * @param index The position of the item in the collection. The item\n\t * is pushed to the collection when `index` not specified.\n\t * @fires add\n\t * @fires change\n\t */\n\tpublic add( item: T, index?: number ): this {\n\t\treturn this.addMany( [ item ], index );\n\t}\n\n\t/**\n\t * Adds multiple items into the collection.\n\t *\n\t * Any item not containing an id will get an automatically generated one.\n\t *\n\t * @param items\n\t * @param index The position of the insertion. Items will be appended if no `index` is specified.\n\t * @fires add\n\t * @fires change\n\t */\n\tpublic addMany( items: Iterable<T>, index?: number ): this {\n\t\tif ( index === undefined ) {\n\t\t\tindex = this._items.length;\n\t\t} else if ( index > this._items.length || index < 0 ) {\n\t\t\t/**\n\t\t\t * The `index` passed to {@link module:utils/collection~Collection#addMany `Collection#addMany()`}\n\t\t\t * is invalid. It must be a number between 0 and the collection's length.\n\t\t\t *\n\t\t\t * @error collection-add-item-invalid-index\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-add-item-invalid-index', this );\n\t\t}\n\n\t\tlet offset = 0;\n\n\t\tfor ( const item of items ) {\n\t\t\tconst itemId = this._getItemIdBeforeAdding( item );\n\t\t\tconst currentItemIndex = index + offset;\n\n\t\t\tthis._items.splice( currentItemIndex, 0, item );\n\t\t\tthis._itemMap.set( itemId, item );\n\n\t\t\tthis.fire<CollectionAddEvent<T>>( 'add', item, currentItemIndex );\n\n\t\t\toffset++;\n\t\t}\n\n\t\tthis.fire<CollectionChangeEvent<T>>( 'change', {\n\t\t\tadded: items,\n\t\t\tremoved: [],\n\t\t\tindex\n\t\t} );\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gets an item by its ID or index.\n\t *\n\t * @param idOrIndex The item ID or index in the collection.\n\t * @returns The requested item or `null` if such item does not exist.\n\t */\n\tpublic get( idOrIndex: string | number ): T | null {\n\t\tlet item: T | undefined;\n\n\t\tif ( typeof idOrIndex == 'string' ) {\n\t\t\titem = this._itemMap.get( idOrIndex );\n\t\t} else if ( typeof idOrIndex == 'number' ) {\n\t\t\titem = this._items[ idOrIndex ];\n\t\t} else {\n\t\t\t/**\n\t\t\t * An index or ID must be given.\n\t\t\t *\n\t\t\t * @error collection-get-invalid-arg\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-get-invalid-arg', this );\n\t\t}\n\n\t\treturn item || null;\n\t}\n\n\t/**\n\t * Returns a Boolean indicating whether the collection contains an item.\n\t *\n\t * @param itemOrId The item or its ID in the collection.\n\t * @returns `true` if the collection contains the item, `false` otherwise.\n\t */\n\tpublic has( itemOrId: T | string ): boolean {\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\treturn this._itemMap.has( itemOrId );\n\t\t} else { // Object\n\t\t\tconst idProperty = this._idProperty;\n\t\t\tconst id = itemOrId[ idProperty ];\n\n\t\t\treturn id && this._itemMap.has( id );\n\t\t}\n\t}\n\n\t/**\n\t * Gets an index of an item in the collection.\n\t * When an item is not defined in the collection, the index will equal -1.\n\t *\n\t * @param itemOrId The item or its ID in the collection.\n\t * @returns The index of a given item.\n\t */\n\tpublic getIndex( itemOrId: T | string ): number {\n\t\tlet item: T | undefined;\n\n\t\tif ( typeof itemOrId == 'string' ) {\n\t\t\titem = this._itemMap.get( itemOrId );\n\t\t} else {\n\t\t\titem = itemOrId;\n\t\t}\n\n\t\treturn item ? this._items.indexOf( item ) : -1;\n\t}\n\n\t/**\n\t * Removes an item from the collection.\n\t *\n\t * @param subject The item to remove, its ID or index in the collection.\n\t * @returns The removed item.\n\t * @fires remove\n\t * @fires change\n\t */\n\tpublic remove( subject: T | number | string ): T {\n\t\tconst [ item, index ] = this._remove( subject );\n\n\t\tthis.fire<CollectionChangeEvent<T>>( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: [ item ],\n\t\t\tindex\n\t\t} );\n\n\t\treturn item;\n\t}\n\n\t/**\n\t * Executes the callback for each item in the collection and composes an array or values returned by this callback.\n\t *\n\t * @typeParam U The result type of the callback.\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The result of mapping.\n\t */\n\tpublic map<U>(\n\t\tcallback: ( item: T, index: number ) => U,\n\t\tctx?: any\n\t): Array<U> {\n\t\treturn this._items.map( callback, ctx );\n\t}\n\n\t/**\n\t * Performs the specified action for each item in the collection.\n\t *\n\t * @param ctx Context in which the `callback` will be called.\n\t */\n\tpublic forEach(\n\t\tcallback: ( item: T, index: number ) => unknown,\n\t\tctx?: any\n\t): void {\n\t\tthis._items.forEach( callback, ctx );\n\t}\n\n\t/**\n\t * Finds the first item in the collection for which the `callback` returns a true value.\n\t *\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The item for which `callback` returned a true value.\n\t */\n\tpublic find(\n\t\tcallback: ( item: T, index: number ) => boolean,\n\t\tctx?: any\n\t): T | undefined {\n\t\treturn this._items.find( callback, ctx );\n\t}\n\n\t/**\n\t * Returns an array with items for which the `callback` returned a true value.\n\t *\n\t * @param callback\n\t * @param ctx Context in which the `callback` will be called.\n\t * @returns The array with matching items.\n\t */\n\tpublic filter(\n\t\tcallback: ( item: T, index: number ) => boolean,\n\t\tctx?: any\n\t): Array<T> {\n\t\treturn this._items.filter( callback, ctx );\n\t}\n\n\t/**\n\t * Removes all items from the collection and destroys the binding created using\n\t * {@link #bindTo}.\n\t *\n\t * @fires remove\n\t * @fires change\n\t */\n\tpublic clear(): void {\n\t\tif ( this._bindToCollection ) {\n\t\t\tthis.stopListening( this._bindToCollection );\n\t\t\tthis._bindToCollection = null;\n\t\t}\n\n\t\tconst removedItems = Array.from( this._items );\n\n\t\twhile ( this.length ) {\n\t\t\tthis._remove( 0 );\n\t\t}\n\n\t\tthis.fire<CollectionChangeEvent<T>>( 'change', {\n\t\t\tadded: [],\n\t\t\tremoved: removedItems,\n\t\t\tindex: 0\n\t\t} );\n\t}\n\n\t/**\n\t * Binds and synchronizes the collection with another one.\n\t *\n\t * The binding can be a simple factory:\n\t *\n\t * ```ts\n\t * class FactoryClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * const source = new Collection<{ label: string }>( { idProperty: 'label' } );\n\t * const target = new Collection<FactoryClass>();\n\t *\n\t * target.bindTo( source ).as( FactoryClass );\n\t *\n\t * source.add( { label: 'foo' } );\n\t * source.add( { label: 'bar' } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 1 ).label ); // 'bar'\n\t *\n\t * source.remove( 0 );\n\t * console.log( target.length ); // 1\n\t * console.log( target.get( 0 ).label ); // 'bar'\n\t * ```\n\t *\n\t * or the factory driven by a custom callback:\n\t *\n\t * ```ts\n\t * class FooClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * class BarClass {\n\t * \tpublic label: string;\n\t *\n\t * \tconstructor( data: { label: string } ) {\n\t * \t\tthis.label = data.label;\n\t * \t}\n\t * }\n\t *\n\t * const source = new Collection<{ label: string }>( { idProperty: 'label' } );\n\t * const target = new Collection<FooClass | BarClass>();\n\t *\n\t * target.bindTo( source ).using( ( item ) => {\n\t * \tif ( item.label == 'foo' ) {\n\t * \t\treturn new FooClass( item );\n\t * \t} else {\n\t * \t\treturn new BarClass( item );\n\t * \t}\n\t * } );\n\t *\n\t * source.add( { label: 'foo' } );\n\t * source.add( { label: 'bar' } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 0 ) instanceof FooClass ); // true\n\t * console.log( target.get( 1 ) instanceof BarClass ); // true\n\t * ```\n\t *\n\t * or the factory out of property name:\n\t *\n\t * ```ts\n\t * const source = new Collection<{ nested: { value: string } }>();\n\t * const target = new Collection<{ value: string }>();\n\t *\n\t * target.bindTo( source ).using( 'nested' );\n\t *\n\t * source.add( { nested: { value: 'foo' } } );\n\t * source.add( { nested: { value: 'bar' } } );\n\t *\n\t * console.log( target.length ); // 2\n\t * console.log( target.get( 0 ).value ); // 'foo'\n\t * console.log( target.get( 1 ).value ); // 'bar'\n\t * ```\n\t *\n\t * It's possible to skip specified items by returning null value:\n\t *\n\t * ```ts\n\t * const source = new Collection<{ hidden: boolean }>();\n\t * const target = new Collection<{ hidden: boolean }>();\n\t *\n\t * target.bindTo( source ).using( item => {\n\t * \tif ( item.hidden ) {\n\t * \t\treturn null;\n\t * \t}\n\t *\n\t * \treturn item;\n\t * } );\n\t *\n\t * source.add( { hidden: true } );\n\t * source.add( { hidden: false } );\n\t *\n\t * console.log( source.length ); // 2\n\t * console.log( target.length ); // 1\n\t * ```\n\t *\n\t * **Note**: {@link #clear} can be used to break the binding.\n\t *\n\t * @typeParam S The type of `externalCollection` element.\n\t * @param externalCollection A collection to be bound.\n\t * @returns The binding chain object.\n\t */\n\tpublic bindTo<S extends Record<string, any>>(\n\t\texternalCollection: Collection<S>\n\t): CollectionBindToChain<S, T> {\n\t\tif ( this._bindToCollection ) {\n\t\t\t/**\n\t\t\t * The collection cannot be bound more than once.\n\t\t\t *\n\t\t\t * @error collection-bind-to-rebind\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-bind-to-rebind', this );\n\t\t}\n\n\t\tthis._bindToCollection = externalCollection;\n\n\t\treturn {\n\t\t\tas: Class => {\n\t\t\t\tthis._setUpBindToBinding<S>( item => new Class( item ) );\n\t\t\t},\n\n\t\t\tusing: callbackOrProperty => {\n\t\t\t\tif ( typeof callbackOrProperty == 'function' ) {\n\t\t\t\t\tthis._setUpBindToBinding<S>( callbackOrProperty );\n\t\t\t\t} else {\n\t\t\t\t\tthis._setUpBindToBinding<S>( item => item[ callbackOrProperty ] );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Finalizes and activates a binding initiated by {@link #bindTo}.\n\t *\n\t * @param factory A function which produces collection items.\n\t */\n\tprivate _setUpBindToBinding<S>( factory: ( item: S ) => T | null ): void {\n\t\tconst externalCollection = this._bindToCollection!;\n\n\t\t// Adds the item to the collection once a change has been done to the external collection.\n\t\tconst addItem = ( evt: unknown, externalItem: S, index: number ) => {\n\t\t\tconst isExternalBoundToThis = externalCollection._bindToCollection == this;\n\t\t\tconst externalItemBound = externalCollection._bindToInternalToExternalMap.get( externalItem );\n\n\t\t\t// If an external collection is bound to this collection, which makes it a 2–way binding,\n\t\t\t// and the particular external collection item is already bound, don't add it here.\n\t\t\t// The external item has been created **out of this collection's item** and (re)adding it will\n\t\t\t// cause a loop.\n\t\t\tif ( isExternalBoundToThis && externalItemBound ) {\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, externalItemBound );\n\t\t\t\tthis._bindToInternalToExternalMap.set( externalItemBound, externalItem );\n\t\t\t} else {\n\t\t\t\tconst item = factory( externalItem );\n\n\t\t\t\t// When there is no item we need to remember skipped index first and then we can skip this item.\n\t\t\t\tif ( !item ) {\n\t\t\t\t\tthis._skippedIndexesFromExternal.push( index );\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Lets try to put item at the same index as index in external collection\n\t\t\t\t// but when there are a skipped items in one or both collections we need to recalculate this index.\n\t\t\t\tlet finalIndex = index;\n\n\t\t\t\t// When we try to insert item after some skipped items from external collection we need\n\t\t\t\t// to include this skipped items and decrease index.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal' ]\n\t\t\t\t// internal -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'B - skipped for internal', 'C - skipped for internal', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We can't just add 'D' to internal at the same index as index in external because\n\t\t\t\t// this will produce empty indexes what is invalid:\n\t\t\t\t// internal -> [ 'A', empty, empty, 'D' ]\n\t\t\t\t//\n\t\t\t\t// So we need to include skipped items and decrease index\n\t\t\t\t// internal -> [ 'A', 'D' ]\n\t\t\t\tfor ( const skipped of this._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\t\tfinalIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration that external collection could skip some items from\n\t\t\t\t// internal collection.\n\t\t\t\t//\n\t\t\t\t// For the following example:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external' ]\n\t\t\t\t// external -> [ A ]\n\t\t\t\t//\n\t\t\t\t// Another item is been added at the end of external collection:\n\t\t\t\t// external.add( 'D' )\n\t\t\t\t// external -> [ 'A', 'D' ]\n\t\t\t\t//\n\t\t\t\t// We need to include skipped items and place new item after them:\n\t\t\t\t// internal -> [ 'A', 'B - skipped for external', 'C - skipped for external', 'D' ]\n\t\t\t\tfor ( const skipped of externalCollection._skippedIndexesFromExternal ) {\n\t\t\t\t\tif ( finalIndex >= skipped ) {\n\t\t\t\t\t\tfinalIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._bindToExternalToInternalMap.set( externalItem, item );\n\t\t\t\tthis._bindToInternalToExternalMap.set( item, externalItem );\n\t\t\t\tthis.add( item, finalIndex );\n\n\t\t\t\t// After adding new element to internal collection we need update indexes\n\t\t\t\t// of skipped items in external collection.\n\t\t\t\tfor ( let i = 0; i < externalCollection._skippedIndexesFromExternal.length; i++ ) {\n\t\t\t\t\tif ( finalIndex <= externalCollection._skippedIndexesFromExternal[ i ] ) {\n\t\t\t\t\t\texternalCollection._skippedIndexesFromExternal[ i ]++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Load the initial content of the collection.\n\t\tfor ( const externalItem of externalCollection ) {\n\t\t\taddItem( null, externalItem, externalCollection.getIndex( externalItem ) );\n\t\t}\n\n\t\t// Synchronize the with collection as new items are added.\n\t\tthis.listenTo<CollectionAddEvent<S>>( externalCollection, 'add', addItem );\n\n\t\t// Synchronize the with collection as new items are removed.\n\t\tthis.listenTo<CollectionRemoveEvent<S>>( externalCollection, 'remove', ( evt, externalItem, index ) => {\n\t\t\tconst item = this._bindToExternalToInternalMap.get( externalItem );\n\n\t\t\tif ( item ) {\n\t\t\t\tthis.remove( item );\n\t\t\t}\n\n\t\t\t// After removing element from external collection we need update/remove indexes\n\t\t\t// of skipped items in internal collection.\n\t\t\tthis._skippedIndexesFromExternal = this._skippedIndexesFromExternal.reduce( ( result, skipped ) => {\n\t\t\t\tif ( index < skipped ) {\n\t\t\t\t\tresult.push( skipped - 1 );\n\t\t\t\t}\n\n\t\t\t\tif ( index > skipped ) {\n\t\t\t\t\tresult.push( skipped );\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [] as Array<number> );\n\t\t} );\n\t}\n\n\t/**\n\t * Returns an unique id property for a given `item`.\n\t *\n\t * The method will generate new id and assign it to the `item` if it doesn't have any.\n\t *\n\t * @param item Item to be added.\n\t */\n\tprivate _getItemIdBeforeAdding( item: any ): string {\n\t\tconst idProperty = this._idProperty;\n\t\tlet itemId: string | undefined;\n\n\t\tif ( ( idProperty in item ) ) {\n\t\t\titemId = item[ idProperty ];\n\n\t\t\tif ( typeof itemId != 'string' ) {\n\t\t\t\t/**\n\t\t\t\t * This item's ID should be a string.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-invalid-id\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-invalid-id', this );\n\t\t\t}\n\n\t\t\tif ( this.get( itemId ) ) {\n\t\t\t\t/**\n\t\t\t\t * This item already exists in the collection.\n\t\t\t\t *\n\t\t\t\t * @error collection-add-item-already-exists\n\t\t\t\t */\n\t\t\t\tthrow new CKEditorError( 'collection-add-item-already-exists', this );\n\t\t\t}\n\t\t} else {\n\t\t\titem[ idProperty ] = itemId = uid();\n\t\t}\n\n\t\treturn itemId;\n\t}\n\n\t/**\n\t * Core {@link #remove} method implementation shared in other functions.\n\t *\n\t * In contrast this method **does not** fire the {@link #event:change} event.\n\t *\n\t * @param subject The item to remove, its id or index in the collection.\n\t * @returns Returns an array with the removed item and its index.\n\t * @fires remove\n\t */\n\tprivate _remove( subject: T | number | string ): [ item: T, index: number ] {\n\t\tlet index: number, id: string, item: T;\n\t\tlet itemDoesNotExist = false;\n\t\tconst idProperty = this._idProperty;\n\n\t\tif ( typeof subject == 'string' ) {\n\t\t\tid = subject;\n\t\t\titem = this._itemMap.get( id )!;\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tindex = this._items.indexOf( item );\n\t\t\t}\n\t\t} else if ( typeof subject == 'number' ) {\n\t\t\tindex = subject;\n\t\t\titem = this._items[ index ];\n\t\t\titemDoesNotExist = !item;\n\n\t\t\tif ( item ) {\n\t\t\t\tid = item[ idProperty ]!;\n\t\t\t}\n\t\t} else {\n\t\t\titem = subject;\n\t\t\tid = item[ idProperty ]!;\n\t\t\tindex = this._items.indexOf( item );\n\t\t\titemDoesNotExist = ( index == -1 || !this._itemMap.get( id ) );\n\t\t}\n\n\t\tif ( itemDoesNotExist ) {\n\t\t\t/**\n\t\t\t * Item not found.\n\t\t\t *\n\t\t\t * @error collection-remove-404\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'collection-remove-404', this );\n\t\t}\n\n\t\tthis._items.splice( index!, 1 );\n\t\tthis._itemMap.delete( id! );\n\n\t\tconst externalItem = this._bindToInternalToExternalMap.get( item );\n\t\tthis._bindToInternalToExternalMap.delete( item );\n\t\tthis._bindToExternalToInternalMap.delete( externalItem );\n\n\t\tthis.fire<CollectionRemoveEvent<T>>( 'remove', item, index! );\n\n\t\treturn [ item, index! ];\n\t}\n\n\t/**\n\t * Iterable interface.\n\t */\n\tpublic [ Symbol.iterator ](): Iterator<T> {\n\t\treturn this._items[ Symbol.iterator ]();\n\t}\n}\n\n/**\n * Fired when an item is added to the collection.\n *\n * @eventName ~Collection#add\n * @param item The added item.\n * @param index An index where the addition occurred.\n */\nexport type CollectionAddEvent<T = any> = {\n\tname: 'add';\n\targs: [ item: T, index: number ];\n};\n\n/**\n * Fired when the collection was changed due to adding or removing items.\n *\n * @eventName ~Collection#change\n * @param data Changed items.\n */\nexport type CollectionChangeEvent<T = any> = {\n\tname: 'change';\n\targs: [ data: CollectionChangeEventData<T> ];\n};\n\n/**\n * A structure describing the {@link ~Collection#event:change `Collection#change`} event.\n */\nexport type CollectionChangeEventData<T = any> = {\n\n\t/**\n\t * A list of added items.\n\t */\n\tadded: Iterable<T>;\n\n\t/**\n\t * A list of removed items.\n\t */\n\tremoved: Iterable<T>;\n\n\t/**\n\t * An index where the addition or removal occurred.\n\t */\n\tindex: number;\n};\n\n/**\n * Fired when an item is removed from the collection.\n *\n * @eventName ~Collection#remove\n * @param item The removed item.\n * @param index Index from which item was removed.\n */\nexport type CollectionRemoveEvent<T = any> = {\n\tname: 'remove';\n\targs: [ item: T, index: number ];\n};\n\n/**\n * An object returned by the {@link module:utils/collection~Collection#bindTo `bindTo()`} method\n * providing functions that specify the type of the binding.\n *\n * See the {@link module:utils/collection~Collection#bindTo `bindTo()`} documentation for examples.\n */\nexport interface CollectionBindToChain<S, T> {\n\n\t/**\n\t * Creates the class factory binding in which items of the source collection are passed to\n\t * the constructor of the specified class.\n\t *\n\t * @param Class The class constructor used to create instances in the factory.\n\t */\n\tas( Class: new ( item: S ) => T ): void;\n\n\t/**\n\t * Creates a callback or a property binding.\n\t *\n\t * @param callbackOrProperty When the function is passed, it should return\n\t * the collection items. When the string is provided, the property value is used to create the bound collection items.\n\t */\n\tusing( callbackOrProperty: keyof S | ( ( item: S ) => T | null ) ): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/first\n */\n\n/**\n * Returns first item of the given `iterator`.\n */\nexport function first<T>( iterator: Iterator<T> ): T | null {\n\tconst iteratorItem = iterator.next();\n\n\tif ( iteratorItem.done ) {\n\t\treturn null;\n\t}\n\n\treturn iteratorItem.value;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/nth\n */\n\n/**\n * Returns `nth` (starts from `0` of course) item of the given `iterable`.\n *\n * If the iterable is a generator, then it consumes **all its items**.\n * If it's a normal iterator, then it consumes **all items up to the given index**.\n * Refer to the [Iterators and Generators](https://developer.mozilla.org/en/docs/Web/JavaScript/Guide/Iterators_and_Generators)\n * guide to learn differences between these interfaces.\n */\nexport function nth<T>( index: number, iterable: Iterable<T> ): T | null {\n\tfor ( const item of iterable ) {\n\t\tif ( index === 0 ) {\n\t\t\treturn item;\n\t\t}\n\t\tindex -= 1;\n\t}\n\n\treturn null;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/focustracker\n */\n\nimport { DomEmitterMixin } from './dom/emittermixin.js';\nimport { ObservableMixin } from './observablemixin.js';\nimport { CKEditorError } from './ckeditorerror.js';\nimport type { View } from '@ckeditor/ckeditor5-ui';\nimport { isElement as _isElement } from 'es-toolkit/compat';\n\n/**\n * Allows observing a group of DOM `Element`s or {@link module:ui/view~View view instances} whether at least one of them (or their child)\n * is focused.\n *\n * Used by the {@link module:core/editor/editor~Editor} in order to track whether the focus is still within the application,\n * or were used outside of its UI.\n *\n * **Note** `focus` and `blur` listeners use event capturing, so it is only needed to register wrapper `Element`\n * which contain other `focusable` elements. But note that this wrapper element has to be focusable too\n * (have e.g. `tabindex=\"-1\"`).\n *\n * Check out the {@glink framework/deep-dive/ui/focus-tracking \"Deep dive into focus tracking\"} guide to learn more.\n */\nexport class FocusTracker extends /* #__PURE__ */ DomEmitterMixin( /* #__PURE__ */ ObservableMixin() ) {\n\t/**\n\t * True when one of the registered {@link #elements} or {@link #externalViews} is focused.\n\t *\n\t * @readonly\n\t * @observable\n\t */\n\tdeclare public isFocused: boolean;\n\n\t/**\n\t * The currently focused element.\n\t *\n\t * While {@link #isFocused `isFocused`} remains `true`, the focus can move between different UI elements. This property tracks those\n\t * elements and tells which one is currently focused.\n\t *\n\t * **Note**: The values of this property are restricted to {@link #elements} or {@link module:ui/view~View#element elements}\n\t * registered in {@link #externalViews}.\n\t *\n\t * @readonly\n\t * @observable\n\t */\n\tdeclare public focusedElement: Element | null;\n\n\t/**\n\t * List of registered DOM elements.\n\t *\n\t * @internal\n\t */\n\tpublic _elements: Set<Element> = new Set();\n\n\t/**\n\t * List of views with external focus trackers that contribute to the state of this focus tracker.\n\t *\n\t * @internal\n\t */\n\tpublic _externalViews: Set<ViewWithFocusTracker> = new Set();\n\n\t/**\n\t * Asynchronous blur event timeout.\n\t */\n\tprivate _blurTimeout: ReturnType<typeof setTimeout> | null = null;\n\n\t// @if CK_DEBUG_FOCUSTRACKER // public _label?: string;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.set( 'isFocused', false );\n\t\tthis.set( 'focusedElement', null );\n\n\t\t// @if CK_DEBUG_FOCUSTRACKER // FocusTracker._instances.push( this );\n\t}\n\n\t/**\n\t * List of registered DOM elements.\n\t *\n\t * **Note**: The list does do not include elements from {@link #externalViews}.\n\t */\n\tpublic get elements(): Array<Element> {\n\t\treturn Array.from( this._elements.values() );\n\t}\n\n\t/**\n\t * List of external focusable views that contribute to the state of this focus tracker. See {@link #add} to learn more.\n\t */\n\tpublic get externalViews(): Array<ViewWithFocusTracker> {\n\t\treturn Array.from( this._externalViews.values() );\n\t}\n\n\t/**\n\t * Starts tracking a specified DOM element or a {@link module:ui/view~View} instance.\n\t *\n\t * * If a DOM element is passed, the focus tracker listens to the `focus` and `blur` events on this element.\n\t * Tracked elements are listed in {@link #elements}.\n\t * * If a {@link module:ui/view~View} instance is passed that has a `FocusTracker` instance ({@link ~ViewWithFocusTracker}),\n\t * the external focus tracker's state ({@link #isFocused}, {@link #focusedElement}) starts contributing to the current tracker instance.\n\t * This allows for increasing the \"reach\" of a focus tracker instance, by connecting two or more focus trackers together when DOM\n\t * elements they track are located in different subtrees in DOM. External focus trackers are listed in {@link #externalViews}.\n\t * * If a {@link module:ui/view~View} instance is passed that has no `FocusTracker` (**not** a {@link ~ViewWithFocusTracker}),\n\t * its {@link module:ui/view~View#element} is used to track focus like any other DOM element.\n\t */\n\tpublic add( elementOrView: Element | View ): void {\n\t\tif ( isElement( elementOrView ) ) {\n\t\t\tthis._addElement( elementOrView );\n\t\t} else {\n\t\t\tif ( isViewWithFocusTracker( elementOrView ) ) {\n\t\t\t\tthis._addView( elementOrView );\n\t\t\t} else {\n\t\t\t\tif ( !elementOrView.element ) {\n\t\t\t\t\t/**\n\t\t\t\t\t * The {@link module:ui/view~View} added to the {@link module:utils/focustracker~FocusTracker} does not have an\n\t\t\t\t\t * {@link module:ui/view~View#element}. Make sure the view is {@link module:ui/view~View#render} before adding\n\t\t\t\t\t * it to the focus tracker.\n\t\t\t\t\t *\n\t\t\t\t\t * @error focustracker-add-view-missing-element\n\t\t\t\t\t */\n\t\t\t\t\tthrow new CKEditorError( 'focustracker-add-view-missing-element', {\n\t\t\t\t\t\tfocusTracker: this,\n\t\t\t\t\t\tview: elementOrView\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tthis._addElement( elementOrView.element );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Stops tracking focus in the specified DOM element or a {@link module:ui/view~View view instance}. See {@link #add} to learn more.\n\t */\n\tpublic remove( elementOrView: Element | View ): void {\n\t\tif ( isElement( elementOrView ) ) {\n\t\t\tthis._removeElement( elementOrView );\n\t\t} else {\n\t\t\tif ( isViewWithFocusTracker( elementOrView ) ) {\n\t\t\t\tthis._removeView( elementOrView );\n\t\t\t} else {\n\t\t\t\t// Assuming that if the view was successfully added, it must have come with an existing #element.\n\t\t\t\tthis._removeElement( elementOrView.element! );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Adds a DOM element to the focus tracker and starts listening to the `focus` and `blur` events on it.\n\t */\n\tprivate _addElement( element: Element ): void {\n\t\tif ( this._elements.has( element ) ) {\n\t\t\t/**\n\t\t\t * This element is already tracked by {@link module:utils/focustracker~FocusTracker}.\n\t\t\t *\n\t\t\t * @error focustracker-add-element-already-exist\n\t\t\t */\n\t\t\tthrow new CKEditorError( 'focustracker-add-element-already-exist', this );\n\t\t}\n\n\t\tthis.listenTo( element, 'focus', () => {\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Focus with useCapture on DOM element` );\n\n\t\t\tconst externalFocusedViewInSubtree = this.externalViews.find( view => isExternalViewSubtreeFocused( element, view ) );\n\n\t\t\tif ( externalFocusedViewInSubtree ) {\n\t\t\t\tthis._focus( externalFocusedViewInSubtree.element! );\n\t\t\t} else {\n\t\t\t\tthis._focus( element );\n\t\t\t}\n\t\t}, { useCapture: true } );\n\n\t\tthis.listenTo( element, 'blur', () => {\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Blur with useCapture on DOM element` );\n\n\t\t\tthis._blur();\n\t\t}, { useCapture: true } );\n\n\t\tthis._elements.add( element );\n\t}\n\n\t/**\n\t * Removes a DOM element from the focus tracker.\n\t */\n\tprivate _removeElement( element: Element ): void {\n\t\tif ( this._elements.has( element ) ) {\n\t\t\tthis.stopListening( element );\n\t\t\tthis._elements.delete( element );\n\t\t}\n\n\t\tif ( element === this.focusedElement ) {\n\t\t\tthis._blur();\n\t\t}\n\t}\n\n\t/**\n\t * Adds an external {@link module:ui/view~View view instance} to this focus tracker and makes it contribute to this focus tracker's\n\t * state either by its `View#element` or by its `View#focusTracker` instance.\n\t */\n\tprivate _addView( view: ViewWithFocusTracker ): void {\n\t\tif ( view.element ) {\n\t\t\tthis._addElement( view.element );\n\t\t}\n\n\t\tthis.listenTo( view.focusTracker, 'change:focusedElement', () => {\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // console.log(\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // \t`\"${ getName( this ) }\": Related \"${ getName( view.focusTracker ) }\"#focusedElement = `,\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // \tview.focusTracker.focusedElement\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // );\n\n\t\t\tif ( view.focusTracker.focusedElement ) {\n\t\t\t\tif ( view.element ) {\n\t\t\t\t\tthis._focus( view.element );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._blur();\n\t\t\t}\n\t\t} );\n\n\t\tthis._externalViews.add( view );\n\t}\n\n\t/**\n\t * Removes an external {@link module:ui/view~View view instance} from this focus tracker.\n\t */\n\tprivate _removeView( view: ViewWithFocusTracker ): void {\n\t\tif ( view.element ) {\n\t\t\tthis._removeElement( view.element );\n\t\t}\n\n\t\tthis.stopListening( view.focusTracker );\n\t\tthis._externalViews.delete( view );\n\t}\n\n\t/**\n\t * Destroys the focus tracker by:\n\t * - Disabling all event listeners attached to tracked elements or external views.\n\t * - Removing all tracked elements and views that were previously added.\n\t */\n\tpublic destroy(): void {\n\t\tthis.stopListening();\n\n\t\tthis._elements.clear();\n\t\tthis._externalViews.clear();\n\n\t\tthis.isFocused = false;\n\t\tthis.focusedElement = null;\n\t}\n\n\t/**\n\t * Stores currently focused element as {@link #focusedElement} and sets {@link #isFocused} `true`.\n\t */\n\tprivate _focus( element: Element ): void {\n\t\t// @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": _focus() on element`, element );\n\n\t\tthis._clearBlurTimeout();\n\n\t\tthis.focusedElement = element;\n\t\tthis.isFocused = true;\n\t}\n\n\t/**\n\t * Clears currently {@link #focusedElement} and sets {@link #isFocused} `false`.\n\t *\n\t * This method uses `setTimeout()` to change order of `blur` and `focus` events calls, ensuring that moving focus between\n\t * two elements within a single focus tracker's scope, will not cause `[ blurA, focusB ]` sequence but just `[ focusB ]`.\n\t * The former would cause a momentary change of `#isFocused` to `false` which is not desired because any logic listening to\n\t * a focus tracker state would experience UI flashes and glitches as the user focus travels across the UI.\n\t */\n\tprivate _blur(): void {\n\t\tconst isAnyElementFocused = this.elements.find( element => element.contains( document.activeElement ) );\n\n\t\t// Avoid blurs originating from external FTs when the focus still remains in one of the #elements.\n\t\tif ( isAnyElementFocused ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isAnyExternalViewFocused = this.externalViews.find( view => {\n\t\t\t// Do not consider external views's focus trackers as focused if there's a blur timeout pending.\n\t\t\treturn view.focusTracker.isFocused && !view.focusTracker._blurTimeout;\n\t\t} );\n\n\t\t// Avoid unnecessary DOM blurs coming from #elements when the focus still remains in one of #externalViews.\n\t\tif ( isAnyExternalViewFocused ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._clearBlurTimeout();\n\n\t\tthis._blurTimeout = setTimeout( () => {\n\t\t\t// @if CK_DEBUG_FOCUSTRACKER // console.log( `\"${ getName( this ) }\": Blur.` );\n\n\t\t\tthis.focusedElement = null;\n\t\t\tthis.isFocused = false;\n\t\t}, 0 );\n\t}\n\n\t/**\n\t * Clears the asynchronous blur event timeout on demand. See {@link #_blur} to learn more.\n\t */\n\tprivate _clearBlurTimeout(): void {\n\t\tclearTimeout( this._blurTimeout! );\n\t\tthis._blurTimeout = null;\n\t}\n\n\t// @if CK_DEBUG_FOCUSTRACKER // public static _instances: Array<FocusTracker> = [];\n}\n\n/**\n * A {@link module:ui/view~View} instance with a {@link module:utils/focustracker~FocusTracker} instance exposed\n * at the `#focusTracker` property.\n */\nexport type ViewWithFocusTracker = View & { focusTracker: FocusTracker };\n\n/**\n * Checks whether a view is an instance of {@link ~ViewWithFocusTracker}.\n */\nexport function isViewWithFocusTracker( view: any ): view is ViewWithFocusTracker {\n\treturn 'focusTracker' in view && view.focusTracker instanceof FocusTracker;\n}\n\nfunction isElement( value: any ): value is Element {\n\treturn _isElement( value );\n}\n\nfunction isExternalViewSubtreeFocused( subTreeRoot: Element, view: ViewWithFocusTracker ): boolean {\n\tif ( isFocusedView( subTreeRoot, view ) ) {\n\t\treturn true;\n\t}\n\n\treturn !!view.focusTracker.externalViews.find( view => isFocusedView( subTreeRoot, view ) );\n}\n\nfunction isFocusedView( subTreeRoot: Element, view: View ): boolean {\n\t// Note: You cannot depend on externalView.focusTracker.focusedElement because blurs are asynchronous and the value may\n\t// be outdated when moving focus between two elements. Using document.activeElement instead.\n\treturn !!view.element && view.element.contains( document.activeElement ) && subTreeRoot.contains( view.element );\n}\n\n// @if CK_DEBUG_FOCUSTRACKER // declare global {\n// @if CK_DEBUG_FOCUSTRACKER // \tinterface Window {\n// @if CK_DEBUG_FOCUSTRACKER // \t\tlogFocusTrackers: Function;\n// @if CK_DEBUG_FOCUSTRACKER // \t}\n// @if CK_DEBUG_FOCUSTRACKER // }\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // function getName( focusTracker: FocusTracker ): string {\n// @if CK_DEBUG_FOCUSTRACKER // \treturn focusTracker._label || 'Unknown';\n// @if CK_DEBUG_FOCUSTRACKER // }\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // function logState(\n// @if CK_DEBUG_FOCUSTRACKER // \tfocusTracker: FocusTracker,\n// @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string> = [ 'isFocused', 'focusedElement' ]\n// @if CK_DEBUG_FOCUSTRACKER // ): string {\n// @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog.forEach( key => { console.log( `${ key }=`, focusTracker[ key ] ) } );\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.log( 'elements', focusTracker.elements );\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.log( 'externalViews', focusTracker.externalViews );\n// @if CK_DEBUG_FOCUSTRACKER // }\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // window.logFocusTrackers = (\n// @if CK_DEBUG_FOCUSTRACKER // \tfilter = () => true,\n// @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string>\n// @if CK_DEBUG_FOCUSTRACKER // ): void => {\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.group( 'FocusTrackers' );\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \tfor ( const focusTracker of FocusTracker._instances ) {\n// @if CK_DEBUG_FOCUSTRACKER // \t\tif ( filter( focusTracker ) ) {\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\tconsole.group( `\"${ getName( focusTracker ) }\"` );\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\tlogState( focusTracker, keysToLog );\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\tconsole.groupEnd();\n// @if CK_DEBUG_FOCUSTRACKER // \t\t}\n// @if CK_DEBUG_FOCUSTRACKER // \t}\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.groupEnd();\n// @if CK_DEBUG_FOCUSTRACKER // };\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // window.logFocusTrackerTree = (\n// @if CK_DEBUG_FOCUSTRACKER // \trootFocusTracker: FocusTracker,\n// @if CK_DEBUG_FOCUSTRACKER // \tfilter = () => true,\n// @if CK_DEBUG_FOCUSTRACKER // \tkeysToLog: Array<string>\n// @if CK_DEBUG_FOCUSTRACKER // ): void => {\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.group( 'FocusTrackers tree' );\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \tlogBranch( rootFocusTracker, filter );\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \tfunction logBranch( focusTracker, filter ) {\n// @if CK_DEBUG_FOCUSTRACKER // \t\tconsole.group( `\"${ getName( focusTracker ) }\"` );\n// @if CK_DEBUG_FOCUSTRACKER // \t\tlogState( focusTracker, keysToLog );\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \t\tfor ( const externalView of focusTracker.externalViews ) {\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\tif ( filter( externalView.focusTracker ) ) {\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\t\tlogBranch( externalView.focusTracker, filter );\n// @if CK_DEBUG_FOCUSTRACKER // \t\t\t}\n// @if CK_DEBUG_FOCUSTRACKER // \t\t}\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \t\tconsole.groupEnd();\n// @if CK_DEBUG_FOCUSTRACKER // \t}\n// @if CK_DEBUG_FOCUSTRACKER //\n// @if CK_DEBUG_FOCUSTRACKER // \tconsole.groupEnd();\n// @if CK_DEBUG_FOCUSTRACKER // };\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/keystrokehandler\n */\n\nimport { DomEmitterMixin, type DomEmitter } from './dom/emittermixin.js';\nimport type { Emitter } from './emittermixin.js';\nimport { getCode, parseKeystroke, type KeystrokeInfo } from './keyboard.js';\nimport type { PriorityString } from './priorities.js';\n\n/**\n * Keystroke handler allows registering callbacks for given keystrokes.\n *\n * The most frequent use of this class is through the {@link module:core/editor/editor~Editor#keystrokes `editor.keystrokes`}\n * property. It allows listening to keystrokes executed in the editing view:\n *\n * ```ts\n * editor.keystrokes.set( 'Ctrl+A', ( keyEvtData, cancel ) => {\n * \tconsole.log( 'Ctrl+A has been pressed' );\n * \tcancel();\n * } );\n * ```\n *\n * However, this utility class can be used in various part of the UI. For instance, a certain {@link module:ui/view~View}\n * can use it like this:\n *\n * ```ts\n * class MyView extends View {\n * \tconstructor() {\n * \t\tthis.keystrokes = new KeystrokeHandler();\n *\n * \t\tthis.keystrokes.set( 'tab', handleTabKey );\n * \t}\n *\n * \trender() {\n * \t\tsuper.render();\n *\n * \t\tthis.keystrokes.listenTo( this.element );\n * \t}\n * }\n * ```\n *\n * That keystroke handler will listen to `keydown` events fired in this view's main element.\n *\n */\nexport class KeystrokeHandler {\n\t/**\n\t * Listener used to listen to events for easier keystroke handler destruction.\n\t */\n\tprivate readonly _listener: DomEmitter;\n\n\t/**\n\t * Creates an instance of the keystroke handler.\n\t */\n\tconstructor() {\n\t\tthis._listener = new ( DomEmitterMixin() )();\n\t}\n\n\t/**\n\t * Starts listening for `keydown` events from a given emitter.\n\t */\n\tpublic listenTo( emitter: Emitter | HTMLElement | Window ): void {\n\t\t// The #_listener works here as a kind of dispatcher. It groups the events coming from the same\n\t\t// keystroke so the listeners can be attached to them with different priorities.\n\t\t//\n\t\t// E.g. all the keystrokes with the `keyCode` of 42 coming from the `emitter` are propagated\n\t\t// as a `_keydown:42` event by the `_listener`. If there's a callback created by the `set`\n\t\t// method for this 42 keystroke, it listens to the `_listener#_keydown:42` event only and interacts\n\t\t// only with other listeners of this particular event, thus making it possible to prioritize\n\t\t// the listeners and safely cancel execution, when needed. Instead of duplicating the Emitter logic,\n\t\t// the KeystrokeHandler re–uses it to do its job.\n\t\tthis._listener.listenTo( emitter as HTMLElement | Window, 'keydown', ( evt, keyEvtData ) => {\n\t\t\tthis._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t\t} );\n\t}\n\n\t/**\n\t * Registers a handler for the specified keystroke.\n\t *\n\t * @param keystroke Keystroke defined in a format accepted by\n\t * the {@link module:utils/keyboard~parseKeystroke} function.\n\t * @param callback A function called with the\n\t * {@link module:engine/view/observer/keyobserver~ViewDocumentKeyEventData key event data} object and\n\t * a helper function to call both `preventDefault()` and `stopPropagation()` on the underlying event.\n\t * @param options Additional options.\n\t */\n\tpublic set(\n\t\tkeystroke: string | ReadonlyArray<string | number>,\n\t\tcallback: ( ev: KeyboardEvent, cancel: () => void ) => void,\n\t\toptions: KeystrokeHandlerOptions = {}\n\t): void {\n\t\tconst keyCode = parseKeystroke( keystroke );\n\t\tconst priority = options.priority;\n\n\t\t// Execute the passed callback on KeystrokeHandler#_keydown.\n\t\t// TODO: https://github.com/ckeditor/ckeditor5-utils/issues/144\n\t\tthis._listener.listenTo( this._listener, '_keydown:' + keyCode, ( evt, keyEvtData: KeyboardEvent ) => {\n\t\t\tif ( options.filter && !options.filter( keyEvtData ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallback( keyEvtData, () => {\n\t\t\t\t// Stop the event in the DOM: no listener in the web page\n\t\t\t\t// will be triggered by this event.\n\t\t\t\tkeyEvtData.preventDefault();\n\t\t\t\tkeyEvtData.stopPropagation();\n\n\t\t\t\t// Stop the event in the KeystrokeHandler: no more callbacks\n\t\t\t\t// will be executed for this keystroke.\n\t\t\t\tevt.stop();\n\t\t\t} );\n\n\t\t\t// Mark this keystroke as handled by the callback. See: #press.\n\t\t\tevt.return = true;\n\t\t}, { priority } );\n\t}\n\n\t/**\n\t * Triggers a keystroke handler for a specified key combination, if such a keystroke was {@link #set defined}.\n\t *\n\t * @param keyEvtData Key event data.\n\t * @returns Whether the keystroke was handled.\n\t */\n\tpublic press( keyEvtData: Readonly<KeystrokeInfo> ): boolean {\n\t\treturn !!this._listener.fire( '_keydown:' + getCode( keyEvtData ), keyEvtData );\n\t}\n\n\t/**\n\t * Stops listening to `keydown` events from the given emitter.\n\t */\n\tpublic stopListening( emitter?: Emitter | HTMLElement | Window ): void {\n\t\tthis._listener.stopListening( emitter );\n\t}\n\n\t/**\n\t * Destroys the keystroke handler.\n\t */\n\tpublic destroy(): void {\n\t\tthis.stopListening();\n\t}\n}\n\n/**\n * {@link module:utils/keystrokehandler~KeystrokeHandler#set} method options.\n */\nexport interface KeystrokeHandlerOptions {\n\n\t/**\n\t * The priority of the keystroke callback. The higher the priority value the sooner the callback will be executed.\n\t * Keystrokes having the same priority are called in the order they were added.\n\t */\n\treadonly priority?: PriorityString;\n\n\t/**\n\t * An optional callback function allowing for filtering keystrokes based on arbitrary criteria.\n\t * The callback function receives `keydown` DOM event as a parameter.\n\t */\n\treadonly filter?: ( keyEvtData: KeyboardEvent ) => boolean;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/objecttomap\n */\n\n/**\n * Transforms object to map.\n *\n * ```ts\n * const map = objectToMap( { 'foo': 1, 'bar': 2 } );\n * map.get( 'foo' ); // 1\n * ```\n *\n * **Note**: For mixed data (`Object` or `Iterable`) there's a dedicated {@link module:utils/tomap~toMap} function.\n *\n * @param obj Object to transform.\n * @returns Map created from object.\n */\nexport function objectToMap<T>( obj: { readonly [ key: string ]: T } | null | undefined ): Map<string, T> {\n\tconst map = new Map<string, T>();\n\n\tfor ( const key in obj ) {\n\t\tmap.set( key, obj[ key ] );\n\t}\n\n\treturn map;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/tomap\n */\n\nimport { objectToMap } from './objecttomap.js';\nimport { isIterable } from './isiterable.js';\n\n/**\n * Transforms object or iterable to map. Iterable needs to be in the format acceptable by the `Map` constructor.\n *\n * ```ts\n * map = toMap( { 'foo': 1, 'bar': 2 } );\n * map = toMap( [ [ 'foo', 1 ], [ 'bar', 2 ] ] );\n * map = toMap( anotherMap );\n * ```\n *\n * @param data Object or iterable to transform.\n * @returns Map created from data.\n */\nexport function toMap<T>( data: { readonly [ key: string ]: T } | Iterable<readonly [ string, T ]> | null | undefined ):\nMap<string, T>\n{\n\tif ( isIterable( data ) ) {\n\t\treturn new Map( data );\n\t} else {\n\t\treturn objectToMap( data );\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/mapsequal\n */\n\n/**\n * Checks whether given `Map`s are equal, that is has same size and same key-value pairs.\n *\n * @param mapA The first map to compare.\n * @param mapB The second map to compare.\n * @returns `true` if given maps are equal, `false` otherwise.\n */\nexport function mapsEqual<Key>( mapA: Map<Key, unknown>, mapB: Map<Key, unknown> ): boolean {\n\tif ( mapA.size != mapB.size ) {\n\t\treturn false;\n\t}\n\n\tfor ( const attr of mapA.entries() ) {\n\t\tconst valA = JSON.stringify( attr[ 1 ] );\n\t\tconst valB = JSON.stringify( mapB.get( attr[ 0 ] ) );\n\n\t\tif ( valA !== valB ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/wait\n */\n\n/**\n * Returns a promise that is resolved after the specified time.\n *\n * @param timeout The time in milliseconds to wait.\n * @param options.signal A signal to abort the waiting.\n */\nexport function wait( timeout: number, options: { signal?: AbortSignal } = {} ): Promise<void> {\n\treturn new Promise( ( resolve, reject ) => {\n\t\tconst signal = options.signal || ( new AbortController() ).signal;\n\n\t\tsignal.throwIfAborted();\n\n\t\tconst timer = setTimeout( timeoutHandler, timeout );\n\n\t\tsignal.addEventListener( 'abort', abortHandler, { once: true } );\n\n\t\tfunction timeoutHandler() {\n\t\t\tsignal.removeEventListener( 'abort', abortHandler );\n\t\t\tresolve();\n\t\t}\n\n\t\tfunction abortHandler() {\n\t\t\tclearTimeout( timer );\n\t\t\treject( signal.reason );\n\t\t}\n\t} );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/retry\n */\n\nimport { wait } from './wait.js';\n\n/**\n * Tries calling the given callback until it sucessfully resolves.\n *\n * If the callback fails `maxAttempts` times, the returned promise is rejected with the last error.\n *\n * @typeParam TResult The result of a successful callback invocation.\n * @param callback The function to call until it succeeds.\n * @param options Configuration options.\n * @param options.maxAttempts Maximum number of attempts.\n * @param options.retryDelay The time in milliseconds between attempts. By default it implements exponential back-off policy.\n * @param options.signal The signal to abort further retries. The callback itself is not aborted automatically.\n */\nexport async function retry<TResult>(\n\tcallback: () => Promise<TResult>,\n\toptions: {\n\t\tmaxAttempts?: number;\n\t\tretryDelay?: ( attempt: number ) => number;\n\t\tsignal?: AbortSignal;\n\t} = {}\n): Promise<TResult> {\n\tconst {\n\t\tmaxAttempts = 4,\n\t\tretryDelay = exponentialDelay(),\n\t\tsignal = ( new AbortController() ).signal\n\t} = options;\n\n\tsignal.throwIfAborted();\n\n\tfor ( let attempt = 0; ; attempt++ ) {\n\t\ttry {\n\t\t\treturn await callback();\n\t\t} catch ( err ) {\n\t\t\tconst isLast = attempt + 1 >= maxAttempts;\n\n\t\t\tif ( isLast ) {\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\n\t\tawait wait( retryDelay( attempt ), { signal } );\n\t}\n}\n\n/**\n * Creates a function that calculates exponential back-off delay. Pass it as `options.retryDelay` to {@link ~retry}.\n *\n * @param options.delay Base delay between invocations. Defaults to 1s.\n * @param options.factor How much to increase the delay. Defaults to 2x.\n * @param options.maxDelay Maximum timeout. Even if higher timeout is calculated, it cannot get higher than this value. Default to 10s.\n * @returns The function calculating the delay.\n */\nexport function exponentialDelay(\n\toptions: {\n\t\tdelay?: number;\n\t\tfactor?: number;\n\t\tmaxDelay?: number;\n\t} = {}\n): ( attempt: number ) => number {\n\tconst {\n\t\tdelay = 1000,\n\t\tfactor = 2,\n\t\tmaxDelay = 10000\n\t} = options;\n\n\treturn attempt => Math.min( factor ** attempt * delay, maxDelay );\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/splicearray\n */\n\n/**\n * Splices one array into another. To be used instead of `Array.prototype.splice` for better\n * performance and because the latter may throw \"Maximum call stack size exceeded\" error when\n * passing huge number of items to insert.\n *\n * ```ts\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 0 );\t// [ 3, 4, 1, 2 ]\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 1 );\t// [ 1, 3, 4, 2 ]\n * spliceArray( [ 1, 2 ], [ 3, 4 ], 2 );\t// [ 1, 2, 3, 4 ]\n * spliceArray( [ 1, 2 ], [],       0 );\t// [ 1, 2 ]\n * ```\n *\n * @param targetArray Array to be spliced.\n * @param insertArray Array of elements to be inserted to target.\n * @param index Index at which nodes should be inserted.\n *\n * @returns New spliced array.\n */\nexport function spliceArray<T>(\n\ttargetArray: Array<T>,\n\tinsertArray: Array<T>,\n\tindex: number\n): void {\n\tconst originalLength = targetArray.length;\n\tconst insertLength = insertArray.length;\n\n\t// Shift elements in the target array to make space for insertArray\n\tfor ( let i = originalLength - 1; i >= index; i-- ) {\n\t\ttargetArray[ i + insertLength ] = targetArray[ i ];\n\t}\n\n\t// Copy elements from insertArray into the target array\n\tfor ( let i = 0; i < insertLength; i++ ) {\n\t\ttargetArray[ index + i ] = insertArray[ i ];\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/delay\n */\n\n/**\n * Returns a function wrapper that will trigger a function after a specified wait time.\n * The timeout can be canceled by calling the cancel function on the returned wrapped function.\n *\n * @param func The function to wrap.\n * @param wait The timeout in ms.\n */\nexport function delay<T extends ( ...args: Array<any> ) => any>( func: T, wait: number ): DelayedFunc<T> {\n\tlet timer: ReturnType<typeof setTimeout>;\n\n\tfunction delayed( ...args: Parameters<T> ) {\n\t\tdelayed.cancel();\n\t\ttimer = setTimeout( () => func( ...args ), wait );\n\t}\n\n\tdelayed.cancel = () => {\n\t\tclearTimeout( timer );\n\t};\n\n\treturn delayed;\n}\n\nexport interface DelayedFunc<T extends ( ...args: Array<any> ) => any> {\n\t( ...args: Parameters<T> ): void;\n\tcancel(): void;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/parsebase64encodedobject\n */\n\n/**\n * Parses a base64-encoded object and returns the decoded object, or null if the decoding was unsuccessful.\n */\nexport function parseBase64EncodedObject( encoded: string ): Record<string, any> | null {\n\ttry {\n\t\tif ( !encoded.startsWith( 'ey' ) ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst decoded = atob( encoded.replace( /-/g, '+' ).replace( /_/g, '/' ) );\n\n\t\treturn JSON.parse( decoded );\n\t} catch {\n\t\treturn null;\n\t}\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/crc32\n */\n\n/**\n * Generates a CRC lookup table.\n * This function creates and returns a 256-element array of pre-computed CRC values for quick CRC calculation.\n * It uses the polynomial 0xEDB88320 to compute each value in the loop, optimizing future CRC calculations.\n */\nfunction makeCrcTable(): Array<number> {\n\tconst crcTable: Array<number> = [];\n\n\tfor ( let n = 0; n < 256; n++ ) {\n\t\tlet c: number = n;\n\n\t\tfor ( let k = 0; k < 8; k++ ) {\n\t\t\tif ( c & 1 ) {\n\t\t\t\tc = 0xEDB88320 ^ ( c >>> 1 );\n\t\t\t} else {\n\t\t\t\tc = c >>> 1;\n\t\t\t}\n\t\t}\n\n\t\tcrcTable[ n ] = c;\n\t}\n\n\treturn crcTable;\n}\n\n/**\n * Calculates CRC-32 checksum for a given inputData to verify the integrity of data.\n *\n * @param inputData Accepts a single value (string, number, boolean), an array of strings, or an array of all of the above types.\n * Non-string values are converted to strings before calculating the checksum.\n * The checksum calculation is based on the concatenated string representation of the input values:\n * * `crc32('foo')` is equivalent to `crc32(['foo'])`\n * * `crc32(123)` is equivalent to `crc32(['123'])`\n * * `crc32(true)` is equivalent to `crc32(['true'])`\n * * `crc32(['foo', 123, true])` produces the same result as `crc32('foo123true')`\n * * Nested arrays of strings are flattened, so `crc32([['foo', 'bar'], 'baz'])` is equivalent to `crc32(['foobar', 'baz'])`\n *\n * @returns The CRC-32 checksum, returned as a hexadecimal string.\n */\nexport function crc32( inputData: CRCData ): string {\n\tconst dataArray = Array.isArray( inputData ) ? inputData : [ inputData ];\n\tconst crcTable: Array<number> = makeCrcTable();\n\tlet crc: number = 0 ^ ( -1 );\n\n\t// Convert data to a single string.\n\tconst dataString: string = dataArray.map( item => {\n\t\tif ( Array.isArray( item ) ) {\n\t\t\treturn item.join( '' );\n\t\t}\n\n\t\treturn String( item );\n\t} ).join( '' );\n\n\t// Calculate the CRC for the resulting string.\n\tfor ( let i = 0; i < dataString.length; i++ ) {\n\t\tconst byte: number = dataString.charCodeAt( i );\n\t\tcrc = ( crc >>> 8 ) ^ crcTable[ ( crc ^ byte ) & 0xFF ];\n\t}\n\n\tcrc = ( crc ^ ( -1 ) ) >>> 0; // Force unsigned integer.\n\n\treturn crc.toString( 16 ).padStart( 8, '0' );\n}\n\n/**\n * The input data for the CRC-32 checksum calculation.\n * Can be a single value (string, number, boolean), an array of strings, or an array of all of the above types.\n */\nexport type CRCData = CRCValue | Array<CRCValue>;\n\nexport type CRCValue = string | number | boolean | Array<string>;\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/collectstylesheets\n */\n\n/**\n * A helper function for getting concatenated CSS rules from external stylesheets.\n *\n * @param stylesheets An array of stylesheet paths delivered by the user through the plugin configuration.\n */\nexport async function collectStylesheets( stylesheets?: Array<string> ): Promise<string> {\n\tif ( !stylesheets ) {\n\t\treturn '';\n\t}\n\n\tconst results = await Promise.all(\n\t\tstylesheets.map( async stylesheet => {\n\t\t\tif ( stylesheet === 'EDITOR_STYLES' ) {\n\t\t\t\treturn getEditorStyles();\n\t\t\t}\n\n\t\t\tconst response = await window.fetch( stylesheet );\n\n\t\t\treturn response.text();\n\t\t} )\n\t);\n\n\treturn results.join( ' ' ).trim();\n}\n\n/**\n * A helper function for getting the basic editor content styles for the `.ck-content` class\n * and all CSS variables defined in the document.\n */\nfunction getEditorStyles(): string {\n\tconst editorStyles = [];\n\tconst editorCSSVariables = [];\n\n\tfor ( const styleSheet of Array.from( document.styleSheets ) ) {\n\t\tconst ownerNode = styleSheet.ownerNode as Element;\n\n\t\tif ( ownerNode.hasAttribute( 'data-cke' ) ) {\n\t\t\tfor ( const rule of Array.from( styleSheet.cssRules ) ) {\n\t\t\t\tif ( rule.cssText.indexOf( '.ck-content' ) !== -1 ) {\n\t\t\t\t\teditorStyles.push( rule.cssText );\n\t\t\t\t} else if ( rule.cssText.indexOf( ':root' ) !== -1 ) {\n\t\t\t\t\teditorCSSVariables.push( rule.cssText );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( !editorStyles.length ) {\n\t\tconsole.warn(\n\t\t\t'The editor stylesheet could not be found in the document. ' +\n\t\t\t'Check your webpack config - style-loader should use data-cke=true attribute for the editor stylesheet.'\n\t\t);\n\t}\n\n\t// We want to trim the returned value in case of `[ \"\", \"\", ... ]`.\n\treturn [ ...editorCSSVariables, ...editorStyles ].join( ' ' ).trim();\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * @module utils/formathtml\n */\n\n/**\n * A simple (and naive) HTML code formatter that returns a formatted HTML markup that can be easily\n * parsed by human eyes. It beautifies the HTML code by adding new lines between elements that behave like block elements\n * (https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\n * and a few more like `tr`, `td`, and similar ones) and inserting indents for nested content.\n *\n * WARNING: This function works only on a text that does not contain any indentations or new lines.\n * Calling this function on the already formatted text will damage the formatting.\n *\n * @param input An HTML string to format.\n */\nexport function formatHtml( input: string ): string {\n\t// A list of block-like elements around which the new lines should be inserted, and within which\n\t// the indentation of their children should be increased.\n\t// The list is partially based on https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements that contains\n\t// a full list of HTML block-level elements.\n\t// A void element is an element that cannot have any child - https://html.spec.whatwg.org/multipage/syntax.html#void-elements.\n\t// Note that <pre> element is not listed on this list to avoid breaking whitespace formatting.\n\t// Note that <br> element is not listed and handled separately so no additional white spaces are injected.\n\tconst elementsToFormat: Array<FormattedElementDefinition> = [\n\t\t{ name: 'address', isVoid: false },\n\t\t{ name: 'article', isVoid: false },\n\t\t{ name: 'aside', isVoid: false },\n\t\t{ name: 'blockquote', isVoid: false },\n\t\t{ name: 'details', isVoid: false },\n\t\t{ name: 'dialog', isVoid: false },\n\t\t{ name: 'dd', isVoid: false },\n\t\t{ name: 'div', isVoid: false },\n\t\t{ name: 'dl', isVoid: false },\n\t\t{ name: 'dt', isVoid: false },\n\t\t{ name: 'fieldset', isVoid: false },\n\t\t{ name: 'figcaption', isVoid: false },\n\t\t{ name: 'figure', isVoid: false },\n\t\t{ name: 'footer', isVoid: false },\n\t\t{ name: 'form', isVoid: false },\n\t\t{ name: 'h1', isVoid: false },\n\t\t{ name: 'h2', isVoid: false },\n\t\t{ name: 'h3', isVoid: false },\n\t\t{ name: 'h4', isVoid: false },\n\t\t{ name: 'h5', isVoid: false },\n\t\t{ name: 'h6', isVoid: false },\n\t\t{ name: 'header', isVoid: false },\n\t\t{ name: 'hgroup', isVoid: false },\n\t\t{ name: 'hr', isVoid: true },\n\t\t{ name: 'li', isVoid: false },\n\t\t{ name: 'main', isVoid: false },\n\t\t{ name: 'nav', isVoid: false },\n\t\t{ name: 'ol', isVoid: false },\n\t\t{ name: 'p', isVoid: false },\n\t\t{ name: 'section', isVoid: false },\n\t\t{ name: 'table', isVoid: false },\n\t\t{ name: 'tbody', isVoid: false },\n\t\t{ name: 'td', isVoid: false },\n\t\t{ name: 'th', isVoid: false },\n\t\t{ name: 'thead', isVoid: false },\n\t\t{ name: 'tr', isVoid: false },\n\t\t{ name: 'ul', isVoid: false }\n\t];\n\n\tconst elementNamesToFormat = elementsToFormat.map( element => element.name ).join( '|' );\n\n\t// It is not the fastest way to format the HTML markup but the performance should be good enough.\n\tconst lines = input\n\t\t// Add new line before and after `<tag>` and `</tag>`.\n\t\t// It may separate individual elements with two new lines, but this will be fixed below.\n\t\t.replace( new RegExp( `</?(${ elementNamesToFormat })( .*?)?>`, 'g' ), '\\n$&\\n' )\n\t\t// Keep `<br>`s at the end of line to avoid adding additional whitespaces before `<br>`.\n\t\t.replace( /<br[^>]*>/g, '$&\\n' )\n\t\t// Divide input string into lines, which start with either an opening tag, a closing tag, or just a text.\n\t\t.split( '\\n' );\n\n\tlet indentCount = 0;\n\tlet isPreformattedLine: ReturnType<typeof isPreformattedBlockLine> = false;\n\n\treturn lines\n\t\t.map( line => {\n\t\t\tisPreformattedLine = isPreformattedBlockLine( line, isPreformattedLine );\n\n\t\t\t// Ignore empty lines outside a <pre> block.\n\t\t\tif ( !line.length && !isPreformattedLine ) {\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif ( isNonVoidOpeningTag( line, elementsToFormat ) ) {\n\t\t\t\treturn indentLine( line, indentCount++ );\n\t\t\t}\n\n\t\t\tif ( isClosingTag( line, elementsToFormat ) ) {\n\t\t\t\treturn indentLine( line, --indentCount );\n\t\t\t}\n\n\t\t\tif ( isPreformattedLine === 'middle' || isPreformattedLine === 'last' ) {\n\t\t\t\treturn indentLine( line, 0 );\n\t\t\t}\n\n\t\t\treturn indentLine( line, indentCount );\n\t\t} )\n\t\t.join( '' )\n\t\t.trimEnd();\n}\n\n/**\n * Checks, if an argument is an opening tag of a non-void element to be formatted.\n *\n * @param line String to check.\n * @param elementsToFormat Elements to be formatted.\n */\nfunction isNonVoidOpeningTag( line: string, elementsToFormat: Array<FormattedElementDefinition> ): boolean {\n\treturn elementsToFormat.some( element => {\n\t\tif ( element.isVoid ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !new RegExp( `<${ element.name }( .*?)?>` ).test( line ) ) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} );\n}\n\n/**\n * Checks, if an argument is a closing tag.\n *\n * @param line String to check.\n * @param elementsToFormat Elements to be formatted.\n */\nfunction isClosingTag( line: string, elementsToFormat: Array<FormattedElementDefinition> ): boolean {\n\treturn elementsToFormat.some( element => {\n\t\treturn new RegExp( `</${ element.name }>` ).test( line );\n\t} );\n}\n\n/**\n * Indents a line by a specified number of characters.\n *\n * @param line Line to indent.\n * @param indentCount Number of characters to use for indentation.\n * @param indentChar Indentation character(s). 4 spaces by default.\n */\nfunction indentLine( line: string, indentCount: number, indentChar: string = '    ' ): string {\n\t// More about Math.max() here in https://github.com/ckeditor/ckeditor5/issues/10698.\n\treturn `${ indentChar.repeat( Math.max( 0, indentCount ) ) }${ line }\\n`;\n}\n\n/**\n * Checks whether a line belongs to a preformatted (`<pre>`) block.\n *\n * @param line Line to check.\n * @param isPreviousLinePreFormatted Information on whether the previous line was preformatted (and how).\n */\nfunction isPreformattedBlockLine( line: string, isPreviousLinePreFormatted: 'first' | 'last' | 'middle' | false ) {\n\tconst isPreOpen = /<pre( .*?)?>/.test( line );\n\tconst isPreClose = /<\\/pre>/.test( line );\n\n\tif ( isPreOpen && isPreClose ) {\n\t\t// If both an opening and closing a <pre> tag, no special treatment needed.\n\t\treturn false;\n\t} else if ( isPreOpen ) {\n\t\treturn 'first';\n\t} else if ( isPreClose ) {\n\t\treturn 'last';\n\t} else if ( isPreviousLinePreFormatted === 'first' || isPreviousLinePreFormatted === 'middle' ) {\n\t\t// This line is just after a 'first' or 'middle' line of a multi-line pre-block.\n\t\treturn 'middle';\n\t} else {\n\t\treturn false;\n\t}\n}\n\n/**\n * Element to be formatted.\n */\ninterface FormattedElementDefinition {\n\n\t/**\n\t *  Element name.\n\t */\n\tname: string;\n\n\t/**\n\t *  Flag indicating whether element is a void one.\n\t */\n\tisVoid: boolean;\n}\n","/**\n * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options\n */\n\n/**\n * Set of utils to handle unicode characters.\n *\n * @module utils/unicode\n */\n\n/**\n * Checks whether given `character` is a combining mark.\n *\n * @param character Character to check.\n */\nexport function isCombiningMark( character: string ): boolean {\n\t// eslint-disable-next-line no-misleading-character-class\n\treturn !!character && character.length == 1 && /[\\u0300-\\u036f\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\u20d0-\\u20ff\\ufe20-\\ufe2f]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a high half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param character Character to check.\n */\nexport function isHighSurrogateHalf( character: string ): boolean {\n\treturn !!character && character.length == 1 && /[\\ud800-\\udbff]/.test( character );\n}\n\n/**\n * Checks whether given `character` is a low half of surrogate pair.\n *\n * Using UTF-16 terminology, a surrogate pair denotes UTF-16 character using two UTF-8 characters. The surrogate pair\n * consist of high surrogate pair character followed by low surrogate pair character.\n *\n * @param character Character to check.\n */\nexport function isLowSurrogateHalf( character: string ): boolean {\n\treturn !!character && character.length == 1 && /[\\udc00-\\udfff]/.test( character );\n}\n\n/**\n * Checks whether given offset in a string is inside a surrogate pair (between two surrogate halves).\n *\n * @param string String to check.\n * @param offset Offset to check.\n */\nexport function isInsideSurrogatePair( string: string, offset: number ): boolean {\n\treturn isHighSurrogateHalf( string.charAt( offset - 1 ) ) && isLowSurrogateHalf( string.charAt( offset ) );\n}\n\n/**\n * Checks whether given offset in a string is between base character and combining mark or between two combining marks.\n *\n * @param string String to check.\n * @param offset Offset to check.\n */\nexport function isInsideCombinedSymbol( string: string, offset: number ): boolean {\n\treturn isCombiningMark( string.charAt( offset ) );\n}\n\nconst EMOJI_PATTERN = /* #__PURE__ */ buildEmojiRegexp();\n\n/**\n * Checks whether given offset in a string is inside multi-character emoji sequence.\n *\n * @param string String to check.\n * @param offset Offset to check.\n */\nexport function isInsideEmojiSequence( string: string, offset: number ): boolean {\n\tconst matches = String( string ).matchAll( EMOJI_PATTERN );\n\n\treturn Array.from( matches ).some( match => match.index! < offset && offset < match.index! + match[ 0 ].length );\n}\n\nfunction buildEmojiRegexp(): RegExp {\n\tconst parts = [\n\t\t// Emoji Tag Sequence (ETS)\n\t\t/\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}/u,\n\n\t\t// Emoji Keycap Sequence\n\t\t/\\p{Emoji}\\u{FE0F}?\\u{20E3}/u,\n\n\t\t// Emoji Presentation Sequence\n\t\t/\\p{Emoji}\\u{FE0F}/u,\n\n\t\t// Single-Character Emoji / Emoji Modifier Sequence\n\t\t/(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*/u\n\t];\n\n\tconst flagSequence = /\\p{Regional_Indicator}{2}/u.source;\n\tconst emoji = '(?:' + parts.map( part => part.source ).join( '|' ) + ')';\n\tconst sequence = `${ flagSequence }|${ emoji }(?:\\u{200D}${ emoji })*`;\n\n\treturn new RegExp( sequence, 'ug' );\n}\n"],"names":["globalVar","window","document","getUserAgent","navigator","userAgent","toLowerCase","env","isMac","isWindows","isGecko","isSafari","isiOS","isAndroid","isBlink","isMediaForcedColors","isMotionReduced","features","isRegExpUnicodePropertySupported","indexOf","match","maxTouchPoints","isSupported","search","RegExp","global","matchMedia","matches","fastDiff","a","b","cmp","atomicChanges","arrayA","Array","isArray","prototype","slice","call","arrayB","changeIndexes","findChangeBoundaryIndexes","result","changeIndexesToAtomicChanges","length","changeIndexesToChanges","arr1","arr2","firstIndex","findFirstDifferenceIndex","lastIndexOld","lastIndexNew","oldArrayReversed","cutAndReverse","newArrayReversed","lastIndex","i","Math","max","undefined","arr","howMany","reverse","newArray","push","index","type","values","newLength","fill","concat","diff","aLength","bLength","_insert","_delete","tmp","m","n","delta","es","fp","snake","k","y1","y2","dir","y","x","p","diffToChanges","output","changes","lastOperation","forEach","change","pushLast","areConnectedThroughProperties","obj1","obj2","isObject","subNodes1","getSubNodes","subNodes2","node","has","head","nodes","subNodes","Set","shift","shouldNodeBeSkipped","add","Symbol","iterator","Object","toString","EventTarget","Event","structure","spy","called","EventInfo","source","name","path","stop","off","return","HEX_NUMBERS","map","_","uid","r1","r2","r3","r4","crypto","getRandomValues","Uint32Array","priorities","get","priority","normal","highest","high","low","lowest","insertToPriorityArray","objects","objectToInsert","left","right","mid","midPriority","splice","DOCUMENTATION_URL","CKEditorError","Error","context","data","errorName","originalError","getErrorMessage","stack","is","rethrowUnexpectedError","error","logWarning","console","warn","formatConsoleArguments","logError","getLinkToDocumentationMessage","processedObjects","WeakSet","circularReferencesReplacer","key","value","stringifiedData","JSON","stringify","documentationLink","originalErrorMessage","message","documentationMessage","version","releaseDate","Date","globalThis","CKEDITOR_VERSION","_listeningTo","_emitterId","_delegations","defaultEmitterClass","EmitterMixin","base","Mixin","on","event","callback","options","listenTo","once","wasFired","onceCallback","args","stopListening","emitter","emitterInfo","eventCallbacks","emitters","_getEmitterId","_setEmitterId","emitterId","callbacks","addEventListener","removeEventListener","pop","fire","eventOrInfo","eventInfo","getCallbacksForEvent","fn","_removeEventListener","delegations","destinations","passAllDestinations","fireDelegatedEvents","err","delegate","events","to","nameOrFunction","Map","eventName","set","stopDelegating","clear","delete","_addEventListener","createEventNamespace","lists","getCallbacksListsForNamespace","callbackDefinition","_getEmitterListenedTo","listeningEmitter","listenedToEmitterId","listeningTo","id","getEvents","_events","defineProperty","makeEventNode","childEvents","childEventName","newEventNodes","substr","lastIndexOf","eventNode","callbacksLists","childCallbacksLists","currentEventName","colonIndex","substring","fireArgs","delegatedInfo","listener","observablePropertiesSymbol","boundObservablesSymbol","boundPropertiesSymbol","decoratedMethods","decoratedOriginal","defaultObservableClass","ObservableMixin","keys","property","initObservable","properties","enumerable","configurable","oldValue","newValue","bind","bindProperties","isStringArray","size","boundProperties","propertyName","bindings","binding","bindTo","toMany","bindToMany","_observable","_bindProperties","_to","_bindings","unbind","unbindProperties","boundObservables","toObservable","toProperty","toProperties","toPropertyBindings","boundObservable","decorate","methodName","originalMethod","object","evt","apply","observable","parsedArgs","parseBindToArgs","bindingsKeys","from","numberOfBindings","attachBindToListeners","updateBindToBound","updateBoundObservableProperty","observables","attribute","getBindingTargets","observableAndAttributePairs","every","parsed","lastObservable","updateBoundObservables","toPropertyName","bindingsToObservable","chain","propertyValue","hasOwnProperty","toBindings","ElementReplacer","_replacedElements","replace","element","newElement","style","display","parentNode","insertBefore","nextSibling","restore","remove","abortableDebounce","func","controller","AbortController","abortable","abort","signal","count","iterable","compareArrays","minLen","min","isIterable","createElement","doc","attributes","children","namespace","xmlns","createElementNS","setAttribute","isString","child","createTextNode","appendChild","Config","_config","configurations","defaultConfigurations","create","define","cloneConfig","_setObjectToTarget","_setToTarget","isDefine","_getFromSource","names","target","isPlainObject","parts","split","part","configuration","cloneDeepWith","leaveItemReferences","isElement","isNode","obj","defaultView","Document","ownerDocument","Node","isWindow","stringifiedObject","DomEmitterMixin","proxyOptions","capture","useCapture","passive","usePassive","proxyEmitter","_getProxyEmitter","ProxyEmitter","proxyEmitters","_getAllProxyEmitters","proxy","getProxyEmitterId","filter","_domNode","_options","_domListeners","attach","domListener","_createDomListener","detach","removeListener","domEvt","getNodeUID","option","sort","findClosestScrollableAncestor","domElement","parentElement","tagName","overflow","overflowY","getComputedStyle","getAncestors","currentNode","nodeType","DOCUMENT_NODE","unshift","getDataFromElement","el","HTMLTextAreaElement","innerHTML","getBorderWidths","top","parseInt","borderTopWidth","borderRightWidth","bottom","borderBottomWidth","borderLeftWidth","getRangeFromMouseEvent","domEvent","domDoc","clientX","clientY","domRange","caretRangeFromPoint","rangeParent","createRange","setStart","rangeOffset","collapse","getCommonAncestor","nodeA","nodeB","ancestorsA","ancestorsB","getPositionedAncestor","offsetParent","body","isText","isRange","rectProperties","Rect","width","height","_source","isSourceRange","writable","isDomElement","rangeRects","getDomRangeRects","copyRectProperties","getBoundingRect","getBoundingClientRect","innerWidth","innerHeight","clone","moveTo","moveBy","getIntersection","anotherRect","rect","newRect","getIntersectionArea","getArea","getVisible","visibleRect","isBody","parent","commonAncestorContainer","absolutelyPositionedChildElement","isParentOverflowVisible","getElementOverflow","HTMLElement","getElementPosition","parentElementPosition","parentRect","intersectionRect","isEqual","prop","contains","intersectRect","toAbsoluteRect","scrollX","scrollY","absoluteRect","positionedAncestor","shiftRectToCompensatePositionedAncestor","excludeScrollbarsAndBorders","scrollBarWidth","scrollBarHeight","direction","documentElement","clientWidth","clientHeight","borderWidths","offsetWidth","offsetHeight","range","rects","clientRects","getClientRects","startContainer","boundingRectData","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","rectangleCount","position","positionedElementAncestor","ancestorPosition","ancestorBorderWidths","moveX","moveY","scrollLeft","scrollTop","ResizeObserver","_element","_callback","_observerInstance","_elementCallbacks","_createObserver","_addElementCallback","observe","destroy","_deleteElementCallback","_getElementCallbacks","unobserve","entries","entry","setDataInElement","toUnit","unit","previousSibling","insertAt","nodeToInsert","childNodes","isComment","COMMENT_NODE","isValidAttributeName","createAttribute","isVisible","getOptimalPosition","positions","limiter","fitInViewport","viewportOffsetConfig","isFunction","constrainedViewportRect","getConstrainedViewportRect","elementRect","visibleTargetRect","getVisibleViewportIntersectionRect","bestPosition","positionOptions","targetRect","viewportRect","PositionObject","visibleLimiterRect","limiterRect","getBestPosition","visibleSourceRect","assign","elementRectArea","positionInstances","positioningFunction","maxFitFactor","limiterIntersectionArea","viewportIntersectionArea","fitFactor","config","_positioningFunctionCoordinates","_cachedRect","_cachedAbsoluteRect","positioningFunctionOutput","_absoluteRect","_rect","removeChild","getVisualViewportOffset","visualViewport","round","offsetLeft","offsetTop","scrollViewportToShowTarget","viewportOffset","ancestorOffset","alignToTop","forceScroll","targetWindow","getWindow","currentWindow","currentFrame","normalizeViewportOffset","firstAncestorToScroll","getParentElement","scrollAncestorsToShowRect","getRect","getRectRelativeToWindow","ancestorWindowRelativeRect","ancestorTargetIntersection","scrollWindowToShowRect","frameElement","scrollAncestorsToShowTarget","limiterElement","targetParent","targetShiftedDownRect","targetShiftedUpRect","forceScrollToTop","allRectsFitInViewport","initialScrollX","initialScrollY","isAbove","isBelow","isLeftOf","isRightOf","scrollTo","parentWindow","targetFitsInTarget","firstRect","secondRect","elementOrRange","relativeWindow","frame","frameRect","modifiersToGlyphsMac","ctrl","cmd","alt","modifiersToGlyphsNonMac","keyCodesToGlyphs","keyCodes","generateKnownKeyCodes","keyCodeNames","fromEntries","code","prettyKeyName","charAt","toUpperCase","getCode","keyCode","altKey","ctrlKey","shiftKey","metaKey","parseKeystroke","keystroke","splitKeystrokeText","getEnvKeyCode","reduce","sum","getEnvKeystrokeText","forcedEnv","keystrokeCode","modifiersToGlyphs","modifiers","glyph","isArrowKeyCode","arrowright","arrowleft","arrowup","arrowdown","getLocalizedArrowKeyCodeDirection","contentLanguageDirection","isLtrContent","endsWith","isForwardArrowKeyCode","localizedKeyCodeDirection","pageup","pagedown","end","home","backspace","enter","space","esc","tab","letter","String","fromCharCode","trim","RTL_LANGUAGE_CODES","getLanguageDirection","languageCode","includes","toArray","CKEDITOR_TRANSLATIONS","language","translations","getPluralForm","languageTranslations","dictionary","_translate","quantity","normalizedTranslations","numberOfLanguages","getNumberOfLanguages","messageId","string","hasTranslation","plural","translation","pluralFormIndex","_clear","_unifyTranslations","acc","merge","Locale","uiLanguage","uiLanguageDirection","contentLanguage","t","_t","hasPluralForm","translatedString","interpolateString","Collection","_items","_itemMap","_idProperty","_bindToCollection","_bindToExternalToInternalMap","_bindToInternalToExternalMap","_skippedIndexesFromExternal","initialItemsOrOptions","hasInitialItems","idProperty","WeakMap","item","_getItemIdBeforeAdding","first","last","addMany","items","offset","itemId","currentItemIndex","added","removed","idOrIndex","itemOrId","getIndex","subject","_remove","ctx","find","removedItems","externalCollection","as","Class","_setUpBindToBinding","using","callbackOrProperty","factory","addItem","externalItem","isExternalBoundToThis","externalItemBound","finalIndex","skipped","itemDoesNotExist","iteratorItem","next","done","nth","FocusTracker","_elements","_externalViews","_blurTimeout","elements","externalViews","elementOrView","_addElement","isViewWithFocusTracker","_addView","focusTracker","view","_removeElement","_removeView","externalFocusedViewInSubtree","isExternalViewSubtreeFocused","_focus","_blur","focusedElement","isFocused","_clearBlurTimeout","isAnyElementFocused","activeElement","isAnyExternalViewFocused","setTimeout","clearTimeout","_isElement","subTreeRoot","isFocusedView","KeystrokeHandler","_listener","keyEvtData","preventDefault","stopPropagation","press","objectToMap","toMap","mapsEqual","mapA","mapB","attr","valA","valB","wait","timeout","Promise","resolve","reject","throwIfAborted","timer","timeoutHandler","abortHandler","reason","retry","maxAttempts","retryDelay","exponentialDelay","attempt","isLast","delay","factor","maxDelay","spliceArray","targetArray","insertArray","originalLength","insertLength","delayed","cancel","parseBase64EncodedObject","encoded","startsWith","decoded","atob","parse","makeCrcTable","crcTable","c","crc32","inputData","dataArray","crc","dataString","join","byte","charCodeAt","padStart","collectStylesheets","stylesheets","results","all","stylesheet","getEditorStyles","response","fetch","text","editorStyles","editorCSSVariables","styleSheet","styleSheets","ownerNode","hasAttribute","rule","cssRules","cssText","formatHtml","input","elementsToFormat","isVoid","elementNamesToFormat","lines","indentCount","isPreformattedLine","line","isPreformattedBlockLine","isNonVoidOpeningTag","indentLine","isClosingTag","trimEnd","some","test","indentChar","repeat","isPreviousLinePreFormatted","isPreOpen","isPreClose","isCombiningMark","character","isHighSurrogateHalf","isLowSurrogateHalf","isInsideSurrogatePair","isInsideCombinedSymbol","EMOJI_PATTERN","buildEmojiRegexp","isInsideEmojiSequence","matchAll","flagSequence","emoji","sequence"],"mappings":"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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69],"debugId":null}}]
}