{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/matei/NovelPedia/App/src/app/auth/login/page.tsx"],"sourcesContent":["'use client';\nimport { signIn } from 'aws-amplify/auth';\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { LuMail, LuLock, LuEye, LuEyeOff } from 'react-icons/lu';\nimport { FcGoogle } from 'react-icons/fc';\nimport { DiApple } from 'react-icons/di';\nimport { FaFacebook } from 'react-icons/fa';\nimport { signInWithRedirect } from 'aws-amplify/auth';\nimport '../../../lib/amplifyClient'; // Ensure this path is correct\nexport default function LoginPage() {\n  const [form, setForm] = useState({\n    identifier: '',\n    password: '',\n  });\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [showAllSocial, setShowAllSocial] = useState(false);\n\n  \n  const router = useRouter();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setForm((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n  \n\n  function isLoggedIn() {\n    const token = typeof window !== \"undefined\" ? localStorage.getItem('token') : null;\n    if (!token) return false;\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return payload.exp * 1000 > Date.now();\n    } catch {\n      return false;\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!form.identifier.trim() || !form.password.trim()) {\n      alert('Please enter both email/username and password.');\n      return;\n    }\n  \n    setLoading(true);\n    try {\n      const user = await signIn({\n        username: form.identifier.trim(),\n        password: form.password,\n      });\n  \n      alert('Login successful!');\n      router.push('/profile');\n  \n    } catch (err: any) {\n      console.error('Login error:', err);\n      alert('Login failed: ' + err.message);\n    }\n    setLoading(false);\n  };\n  \n  // Handle Google Login\n  const handleGoogleLogin = async () => {\n    try {\n      await signInWithRedirect({\n        provider: 'Google', // must match your Cognito Identity Provider name\n      });\n    } catch (error) {\n      console.error('Google sign-in error:', error);\n      alert('Failed to start Google login: ' + (error as any).message);\n    }\n  };  \n\n  const socialButtons = [\n    {\n      key: 'google',\n      icon: <FcGoogle className=\"text-lg\" />,\n      text: 'Continue with Google',\n      onClick: handleGoogleLogin,\n    },\n    {\n      key: 'apple',\n      icon: <DiApple className=\"text-lg\" />,\n      text: 'Continue with Apple (COMING SOON)',\n    },\n    {\n      key: 'facebook',\n      icon: <FaFacebook className=\"text-lg\" />,\n      text: 'Continue with Facebook (COMING SOON)',\n    },\n  ];\n\n  const visibleSocialButtons = showAllSocial\n    ? socialButtons\n    : socialButtons.slice(0, 2);\n\n  return (\n    <div className=\"min-h-screen flex flex-col py-10 items-center justify-center bg-gradient-to-br from-[#2d004d] via-[#4b166c] to-[#6d28d9]\">\n      {/* Logo */}\n      <div className=\"flex flex-col items-center mb-8\">\n        <div className=\"bg-[#a259ec] p-3 rounded-full mb-2\">\n          <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\">\n            <rect x=\"4\" y=\"4\" width=\"16\" height=\"16\" rx=\"4\" fill=\"#fff\" />\n            <path\n              d=\"M8 8h8v2H8V8zm0 4h8v2H8v-2zm0 4h5v2H8v-2z\"\n              fill=\"#a259ec\"\n            />\n          </svg>\n        </div>\n        <h1 className=\"text-2xl font-bold text-white\">NovelPedia</h1>\n        <p className=\"text-sm text-violet-200 mt-1\">\n          Welcome back! Log in to continue your reading journey\n        </p>\n      </div>\n      <div className=\"w-[90vw] max-w-md bg-[#231942]/80 rounded-2xl shadow-xl px-8 py-10 flex flex-col items-center\">\n        <form className=\"w-full space-y-5\" onSubmit={handleSubmit}>\n          {/* Identifier */}\n          <div>\n            <label className=\"block text-violet-200 text-xs md:text-sm mb-1\">\n              Username or Email\n            </label>\n            <div className=\"relative\">\n              <LuMail className=\"absolute left-3 top-1/2 -translate-y-1/2 text-violet-400\" />\n              <input\n                type=\"text\"\n                name=\"identifier\"\n                value={form.identifier}\n                onChange={handleChange}\n                placeholder=\"Enter your username or email\"\n                className=\"w-full pl-10 pr-3 py-1 md:py-2 bg-[#313052] text-white rounded-lg border border-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-400\"\n                required\n              />\n            </div>\n          </div>\n          {/* Password */}\n          <div>\n            <label className=\"block text-violet-200 text-xs md:text-sm mb-1\">\n              Password\n            </label>\n            <div className=\"relative\">\n              <LuLock className=\"absolute left-3 top-1/2 -translate-y-1/2 text-violet-400\" />\n              <input\n                type={showPassword ? 'text' : 'password'}\n                name=\"password\"\n                value={form.password}\n                onChange={handleChange}\n                placeholder=\"Enter your password\"\n                className=\"w-full pl-10 pr-10 py-1 md:py-2 bg-[#313052] text-white rounded-lg border border-violet-700 focus:outline-none focus:ring-2 focus:ring-violet-400\"\n                required\n              />\n              <button\n                type=\"button\"\n                className=\"absolute right-3 top-1/2 -translate-y-1/2 text-violet-400\"\n                tabIndex={-1}\n                onClick={() => setShowPassword((s) => !s)}\n              >\n                {showPassword ? <LuEyeOff /> : <LuEye />}\n              </button>\n            </div>\n          </div>\n          {/* Forgot password */}\n          <div className=\"flex justify-end\">\n            <a href=\"/reset-password\" className=\"text-violet-300 text-xs hover:underline\">\n              Forgot password?\n            </a>\n          </div>\n          {/* Submit Button */}\n          <button\n            type=\"submit\"\n            disabled={loading}\n            className=\"w-full py-2 rounded-lg bg-gradient-to-r from-fuchsia-700 to-pink-500 text-white font-semibold flex items-center justify-center gap-2 hover:from-fuchsia-700 hover:to-pink-600 transition\"\n          >\n            {loading ? 'Logging in...' : 'Log In'}\n            <svg\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              strokeWidth={2}\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                d=\"M5 12h14m-7-7l7 7-7 7\"\n              />\n            </svg>\n          </button>\n        </form>\n        {/* Divider */}\n        <div className=\"flex items-center w-full my-6\">\n          <div className=\"flex-1 h-px bg-violet-700\" />\n          <span className=\"mx-3 text-violet-300 text-sm\">OR LOG IN WITH</span>\n          <div className=\"flex-1 h-px bg-violet-700\" />\n        </div>\n        {/* Social Buttons */}\n        <div\n          className=\"w-full flex flex-col gap-3 overflow-hidden transition-all duration-300 ease-in-out\"\n          style={{\n            maxHeight: showAllSocial ? 400 : 110,\n            opacity: showAllSocial ? 1 : 0.95,\n          }}\n        >\n          {visibleSocialButtons.map((btn) => (\n            <button\n              key={btn.key}\n              type=\"button\"\n              onClick={btn.onClick} \n              className=\"w-full flex items-center justify-center gap-3 py-2 rounded-lg bg-white/10 border border-violet-700 text-white font-medium hover:bg-white/20 transition\"\n            >\n              {btn.icon}\n              {btn.text}\n            </button>\n          ))}\n        </div>\n        {/* Show more / Show less */}\n        <button\n          className=\"mt-4 text-violet-300 text-sm hover:underline cursor-pointer\"\n          onClick={() => setShowAllSocial((s) => !s)}\n          type=\"button\"\n        >\n          {showAllSocial ? 'Show less' : 'Show more'}\n        </button>\n        {/* Don't have an account */}\n        <div className=\"mt-6 text-violet-300 text-sm text-center\">\n          Don&apos;t have an account?{' '}\n          <a href=\"signup\" className=\"text-white underline hover:text-violet-200\">\n            Sign up here\n          </a>\n        </div>\n        {/* validate an account */}\n        <div className=\"mt-6 text-violet-300 text-sm text-center\">\n          Validate an email?{' '}\n          <a href=\"/signup/confirm\" className=\"text-white underline hover:text-violet-200\">\n             Login here\n          </a>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}